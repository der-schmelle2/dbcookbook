<?xml version="1.0" encoding="utf-8"?><html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>The DoCookBook</title>
      <meta name="generator" content="DocBook XSL 2.0 Stylesheets V2.0.3" />
      <meta name="keywords" content="DocBook, Customization, XSLT" />
      <link rel="stylesheet" type="text/css" href="css/dbcookbook.css" /><style type="text/css">
body { background-image: url('images/draft.svg');
       background-repeat: no-repeat;
       background-position: center center;
       /* The following property make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
     }
</style><script type="text/javascript" src="js/dbmodnizr.js"></script><meta name="author" content="Thomas Schraitle" />
      <meta name="DC.format" content="text/html" scheme="DCTERMS.IMT" />
      <meta name="DC.type" content="Text" scheme="DCTERMS.DCMIType" />
      <meta name="DC.Language" content="en" scheme="DCTERMS.RFC3066" />
      <meta name="DC.title" content="The DoCookBook" />
      <meta name="DC.creator" content="Thomas Schraitle" />
      <meta name="DC.type" content="Text" scheme="DCTERMS.DCMIType" />
      <meta name="DC.identifier" scheme="DCTERMS.URI"
            content="https://sourceforge.net/projects/doccookbook/" />
      <meta name="DC.identifier" scheme="DCTERMS.URI" content="https://doccookbook.sf.net" />
      <meta name="DC.relation" content="http://dublincore.org/" scheme="DCTERMS.URI" />
      <meta name="DC.rights" content="legalnotice" scheme="DCTERMS.URI" />
   </head>
   <body class="draft">
      <article id="dbcookbook" lang="en" class="book">
         <div class="book-titlepage">
            <h1>The DoCookBook</h1>
            <h2>Recipies for DocBook Developers</h2>
            <div class="author">
               <h3><span class="personname"><span class="firstname">Thomas</span> <span class="surname">Schraitle</span></span></h3>
            </div>
            <div>
               <p>Last published version: December 2011<?dbtimestamp?></p>
            </div>
            <p class="draft">Draft (Version 0.1)</p>
            <div id="legalnotice" lang="en" class="legalnotice">
               <div class="sidebar">
                  <header class="sidebar-titlepage">
                     <h3>Licensed under Creative Commons</h3>
                  </header>
                  <div class="sidebar-content">
                     <figure id="legalnotice.2.2" class="informaltable-wrapper">
                        <div class="informaltable">
                           <table border="0" frame="void" rules="none" class="ccbox">
                              <tbody>
                                 <tr>
                                    
                                    <td valign="top"><span class="inlinemediaobject"><img src="/home/toms/dbcookbook-sf/en/xml/png/by-nc-sa-3.0-de-88x31.png" width="88"
                                               alt="Creative Commons License Agreement" /></span></td>
                                    
                                    <td>
                                       <p>This work is licensed as Creative Commons
                                          Attribution-NonCommercial-ShareAlike 3.0 Germany License (CC
                                          BY-NC-SA 3.0 DE). For more information, refer to <a href="#dbc.preface.license">Section 1.8, “Licensed under Creative Commons”</a> .
                                       </p>
                                    </td>
                                    
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </figure>
                  </div>
               </div>
            </div>
            
            <p>
               
               <div class="note admonition">
                  <h3>Draft Ahead!</h3>
                  <p>This book is a draft and still work in progress. You
                     will find funny typos, embarrassing English grammar mistakes
                     from a German native speaker, annoying inconsistencies,
                     missing topics, and plain errors. Nevertheless, I hope the
                     topics should give you an idea. 
                  </p>
                  <p>Visit this site from time to time and see how the book
                     grows and how more and more of these annoyances will vanish.
                     To accelerate this process, send me praise, critisism,
                     patches, donations, or even write a topic.<sup class="footnote"><span class="osq">[</span><a name="draftahead.1.1.3.1" href="#ftn.draftahead.1.1.3.1">1</a><span class="csq">]</span></sup> Read <a href="#dbc.preface.contrib">Section 1.6, “Contribute to the Book”</a> to
                     find more how to support me.
                  </p>
               </div>
               
            </p>      
            
            <div class="revhistory">
               <table border="0" summary="Revision History">
                  <tr>
                     <td colspan="2"><span class="title">Revision History</span></td>
                  </tr>
                  <tr class="revision">
                     <td class="date"><span class="date">07 Dec 2011</span></td>
                     <td class="author"><span class="author"><span class="firstname">Thomas</span> <span class="surname">Schraitle</span></span><span class="authorinitials">toms</span></td>
                  </tr>
                  <tr class="revdescription">
                     <td> </td>
                     <td class="revdescription" colspan="1"><span class="revdescription">
                           
                           <p>First public revision announced</p>
                           </span></td>
                  </tr>
               </table>
            </div>
         </div>
         <hr />
         <div class="toc">
            <p><b>Table of Contents</b></p>
            <ul class="toc">
               <li><span><a href="#dbc.preface">1. Welcome!</a></span><ul class="toc">
                     <li><span><a href="#dbc.preface.audience">1.1. Audience</a></span></li>
                     <li><span><a href="#dbc.preface.db4-vs-5">1.2. DocBook 4 or 5?</a></span></li>
                     <li><span><a href="#dbc.preface.further-reading">1.3. Further Readings</a></span></li>
                     <li><span><a href="#dbc.preface.typo">1.4. Typographical Conventions</a></span></li>
                     <li><span><a href="#dbc.preface.feedback">1.5. Feedback</a></span></li>
                     <li><span><a href="#dbc.preface.contrib">1.6. Contribute to the Book</a></span></li>
                     <li><span><a href="#dbc.preface.piwik">1.7. A Few Words About Piwik</a></span></li>
                     <li><span><a href="#dbc.preface.license">1.8. Licensed under Creative Commons</a></span></li>
                     <li><span><a href="#dbc.preface.ack">1.9. Acknowledgments</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#dbc.markup">1. Knowing DocBook’s Structure</a></span><ul class="toc">
                     <li><span><a href="#dbc.markup.intro">1.1. Introduction</a></span></li>
                     <li><span><a href="#dbc.db.xincludes">1.2. Modularize Your Document with XIncludes</a></span></li>
                     <li><span><a href="#dbc.section.vs.sectx">1.3. Distinguish Between Section and SectX Elements</a></span></li>
                     <li><span><a href="#dbc.markup.lists">1.4. Using Lists</a></span></li>
                     <li><span><a href="#dbc.db.remarks">1.5. Inserting Remarks</a></span></li>
                     <li><span><a href="#dbc.db.link">1.6. Choosing Between Two Link Methods</a></span></li>
                     <li><span><a href="#dbc.db.quotes">1.7. Inserting Inline Quotes</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#dbc.common">2. Common Customizations</a></span><ul class="toc">
                     <li><span><a href="#dbc.common.intro">2.1. Introduction</a></span></li>
                     <li><span><a href="#dbc.common.fonts">2.2. Finding Professional Fonts</a></span></li>
                     <li><span><a href="#dbc.common.dbcustomize">2.3. Writing Customization Layers</a></span></li>
                     <li><span><a href="#dbc.common.dbtimestamp">2.4. Inserting Date and Time</a></span></li>
                     <li><span><a href="#dbc.common.l10n">2.5. Extending Language Files with Your Own Text</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#dbc.structure">3. Manipulating DocBook Document Structure</a></span><ul class="toc">
                     <li><span><a href="#dbc.structure.intro">3.1. Introduction</a></span></li>
                     <li><span><a href="#dbc.struct.pretty-print">3.2. Pretty-Printing DocBook Documents</a></span></li>
                     <li><span><a href="#dbc.structure.db4-to-db5">3.3. Converting DocBook from Version 4 to Version 5</a></span></li>
                     <li><span><a href="#dbc.structure.db5-to-db4">3.4. Converting DocBook from Version 5 to Version 4</a></span></li>
                     <li><span><a href="#dbc.structure.splitdb">3.5. Splitting DocBook Documents</a></span></li>
                     <li><span><a href="#dbc.structure.extract">3.6. Extracting One Element from DocBook Document</a></span></li>
                     <li><span><a href="#dbc.structure.sectX-to-section">3.7. Transforming <code class="tag-element">sectX</code> Elements into <code class="tag-element">section</code> Elements</a></span></li>
                     <li><span><a href="#dbc.structure.section-to-sectX">3.8. Transforming <code class="tag-element">section</code> Elements into <code class="tag-element">sectX</code> Elements</a></span></li>
                     <li><span><a href="#dbc.structure.bridgehead-to-section">3.9. Transforming <code class="tag-element">bridgehead</code> Elements into <code class="tag-element">section</code> Elements</a></span></li>
                     <li><span><a href="#dbc.structure.remove-blocks-in-para">3.10. Moving Block Elements Outside of Paragraphs</a></span></li>
                     <li><span><a href="#dbc.structure.adding-indexterms">3.11. Adding Index Entries (Semi-)Automatically</a></span></li>
                     <li><span><a href="#dbc.structure.revision-list">3.12. Including Revision Information from Version Control Systems</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#dbc.fo">4. Print Customizations</a></span><ul class="toc">
                     <li><span><a href="#dbc.fo.intro">4.1. Introduction</a></span></li>
                     <li><span><a href="#dbc.fo.cover">4.2. Designing a Title Page</a></span></li>
                     <li><span><a href="#dbc.fo.line-height">4.3. Influencing the Leading</a></span></li>
                     <li><span><a href="#dbc.fo.hyphen-urls">4.4. Hyphenating URLs</a></span></li>
                     <li><span><a href="#dbc.fo.initials">4.5. Creating Initials and Drop Caps</a></span></li>
                     <li><span><a href="#dbc.fo.number-titles">4.6. Numbering Part, Chapter, Appendix, and other Titles</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#dbc.html">5. (X)HTML Customizations</a></span><ul class="toc">
                     <li><span><a href="#dbc.html.intro">5.1. Introduction</a></span></li>
                     <li><span><a href="#dbc.html.permalinks">5.2. Creating Permalinks</a></span></li>
                     <li><span><a href="#dbc.html.texinfo-navig">5.3. Creating Simple Navigation in Chapters</a></span></li>
                  </ul>
               </li>
               <li><span><a href="#cc-by-nc-sa-30-de">A. Namensnennung – Keine kommerzielle Nutzung – Weitergabe unter
                        gleichen Bedingungen 3.0 Deutschland</a></span></li>
               <li><span><a href="#cc-by-nc-sa-30-unported">B. Attribution-NonCommercial-ShareAlike 3.0 Unported</a></span></li>
            </ul>
         </div>
         <div class="list-of-tables">
            <p><b>List of Tables</b></p>
            <ul class="toc">
               <li>1.1. <a href="#tab.section.vs.sectx.comparison">Comparison Between <code class="tag-element">section</code> and <code class="tag-element">sectX</code> Elements</a></li>
               <li>1.2. <a href="#tab.db.xmlcomments-vs-remarks">Comparison XML Comments versus Remarks</a></li>
               <li>4.1. <a href="#tab.fo.number-titles.autolabel">Autolabel Parameters and their Default Values</a></li>
               <li>4.2. <a href="#tab.fo.">Possible Formats for Autolabel Parameters</a></li>
               <li>4.3. <a href="#dbc.fo.number-titles.5.12">Parameter Combinations</a></li>
            </ul>
         </div>
         <div class="list-of-examples">
            <p><b>List of Examples</b></p>
            <ul class="toc">
               <li>1.1. <a href="#ex.db.xincludes.book-with-3-chapters">A Book with XIncluded Chapters</a></li>
               <li>1.2. <a href="#ex.db.modularize.xifallback">Fallback Possibility with <code class="tag-element">xi:fallback</code></a></li>
               <li>1.3. <a href="#ex.db.modularize.include-text">Included Text in a Programlisting</a></li>
               <li>1.4. <a href="#dbc.markup.lists.5.4.3">Unordered List with Three Entries</a></li>
               <li>1.5. <a href="#dbc.markup.lists.5.5.3">Numbered List with Three Entries</a></li>
               <li>1.6. <a href="#dbc.markup.lists.5.6.3">Definition List with Two Entries</a></li>
               <li>1.7. <a href="#ex.db.inlineremark">A Remark Inside a Paragraph</a></li>
               <li>2.1. <a href="#ex.common.dbcustomize.general-cust-layer">General Customization Layer</a></li>
               <li>3.1. <a href="#ex.copy.xsl"><code class="filename">copy.xsl</code></a></li>
               <li>3.2. <a href="#ex.pretty.xsl"><code class="filename">pretty.xsl</code></a></li>
               <li>3.3. <a href="#ex.db5to4-core.xsl"><code class="filename">db5to4-core.xsl</code></a></li>
               <li>3.4. <a href="#ex.db5to4-info.xsl"><code class="filename">db5to4-info.xsl</code></a></li>
               <li>3.5. <a href="#ex.db5to4-withinfo.xsl"><code class="filename">db5to4-withinfo.xsl</code></a></li>
               <li>3.6. <a href="#ex.dbsplit.xsl"><code class="filename">dbsplit.xsl</code></a></li>
               <li>3.7. <a href="#sec.structure.splitdb.xsl.5"><code class="filename">chunker.xsl</code></a></li>
               <li>3.8. <a href="#ex.rootid.xsl">Extracting Stylesheet <code class="filename">rootid.xsl</code></a></li>
               <li>3.9. <a href="#ex.rootid-resolve-xrefs.xsl"><code class="filename">rootid-resolve-xrefs.xsl</code></a></li>
               <li>3.10. <a href="#ex.structure.sectX-to-section">Transforms every <code class="tag-element">sectX</code> Element into a
                     <code class="tag-element">section</code> Element</a></li>
               <li>3.11. <a href="#ex.structure.section-to-sectX">Transforms every <code class="tag-element">sectX</code> Element into a
                     <code class="tag-element">section</code> Element</a></li>
               <li>3.12. <a href="#ex.structure.sectX-to-section.check">Error Checking of Section Levels</a></li>
               <li>3.13. <a href="#dbc.structure.bridgehead-to-section.4.3">Transforms every <code class="tag-element">bridgehead</code> Element into
                     a <code class="tag-element">section</code> Element</a></li>
               <li>3.14. <a href="#ex."><code class="filename">move-blocks-outof-para.xsl</code></a></li>
               <li>3.15. <a href="#ex.profile-envar.xml"><code class="filename">profile-envar.xml</code></a></li>
               <li>3.16. <a href="#ex.profile-tag.xsl"><code class="filename">profile-tag.xsl</code></a></li>
               <li>3.17. <a href="#dbc.structure.adding-indexterms.4.3.4.2"><code class="filename">add-indexterms.xsl</code></a></li>
               <li>3.18. <a href="#dbc.structure.adding-indexterms.4.5">Output of the Transformation</a></li>
               <li>3.19. <a href="#sec.structure.revision-list.bazaar.7">Stylesheet to Convert Bazaar's Log File</a></li>
               <li>3.20. <a href="#ex.mercurial-logfile">Mercurial Log File in XML</a></li>
               <li>3.21. <a href="#ex.hg2revhistory.xsl">Stylesheet <code class="filename">hg2revhistory.xsl</code> to Convert
                     Mercurial XML Log Files into  DocBook's <code class="tag-element">revhistory</code></a></li>
               <li>4.1. <a href="#ex.hyphenate-url.xsl"><code class="filename">hyphenate-url.xsl</code></a></li>
               <li>4.2. <a href="#ex.initials-baseline.xsl"><code class="filename">initials-baseline.xsl</code></a></li>
               <li>4.3. <a href="#dbc.fo.number-titles.5.14">Extending <code class="function">autolabel.format</code></a></li>
               <li>5.1. <a href="#ex.html.permalinks">Permalink Stylesheet (<code class="filename">permalinks.xsl</code>)</a></li>
               <li>5.2. <a href="#ex.simple-navigation.xsl"><code class="filename">simple-navigation.xsl</code></a></li>
               <li>5.3. <a href="#ex.db-simple-navigation.xsl"><code class="filename">db-simple-navigation.xsl</code></a></li>
            </ul>
         </div>
         <article id="dbc.preface" class="preface">
            <header class="preface-titlepage">
               <h2>Welcome!</h2>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.preface.audience">1.1. Audience</a></span></li>
                  <li><span><a href="#dbc.preface.db4-vs-5">1.2. DocBook 4 or 5?</a></span></li>
                  <li><span><a href="#dbc.preface.further-reading">1.3. Further Readings</a></span></li>
                  <li><span><a href="#dbc.preface.typo">1.4. Typographical Conventions</a></span></li>
                  <li><span><a href="#dbc.preface.feedback">1.5. Feedback</a></span></li>
                  <li><span><a href="#dbc.preface.contrib">1.6. Contribute to the Book</a></span></li>
                  <li><span><a href="#dbc.preface.piwik">1.7. A Few Words About Piwik</a></span></li>
                  <li><span><a href="#dbc.preface.license">1.8. Licensed under Creative Commons</a></span></li>
                  <li><span><a href="#dbc.preface.ack">1.9. Acknowledgments</a></span></li>
               </ul>
            </div>
            <blockquote>
               <h3>Mission</h3>
               <p><em class="citetitle"><a href="https://doccookbook.sf.net">The DoCookBook Project</a></em> aims to create an open source
                  book about <span><a href="http://www.docbook.org/">DocBook</a></span> and the <span><a href="http://docbook.sf.net/release/xsl/current/doc/">DocBook XSL stylesheets</a></span> written in a cookbook-style
                  manner and released under a Creative Commons license.
               </p>
            </blockquote>
            <p>According to its <span><a href="http://www.docbook.org/whatis">homepage</a></span>,
               “<span class="quote">DocBook is a schema (available in several languages
                  including RELAX NG, SGML and XML DTDs, and W3C XML Schema)
                  maintained by the DocBook Technical Committee of OASIS. It is
                  particularly well suited to books and papers about computer
                  hardware and software (though it is by no means limited to these
                  applications).</span>”
            </p>
            <p>Although there are helpful and valuable documentation―be it as a
               printed book<sup id="fnt.tdg" class="footnote"><span class="osq">[</span><a name="fnt.tdg" href="#ftn.fnt.tdg">2</a><span class="csq">]</span></sup> or online<sup class="footnote"><span class="osq">[</span><a name="dbc.preface.5.2" href="#ftn.dbc.preface.5.2">3</a><span class="csq">]</span></sup>―I always felt there is a gap. This gap could be bridged
               with a guide that only concentrates on problems and their solution
               in a concise manner explained by step-by-step procedures. Until now
               nobody wrote a book that combines possible problems, pitfalls,
               “<span class="quote">how to do this</span>”, and the benefits in a cookbook
               style. My book is intented to be such a book. However, it
               <em>does not</em> seek to replace any other
               information, be it printed or online. It aims for
               <em>enhancing</em> the world of DocBook with a
               different view. 
            </p>
            <p> The topics in this book are mostly based on my own experiences
               with DocBook and the DocBook XSL stylesheets. However, it also
               includes questions and answers from other sources: from the DocBook
               mailinglists, other sites that inspired me, or questions from
               collegues. It is the nature of such topics that there might be some
               overlap with other sources. When other authors inspired me, I have
               included their names. If you think your name is missing, please let
               me know. 
            </p>
            <p>As I have learned (and still do) a lot from the masters of DocBook, 
               it is time to give something back. What you are reading is the first
               draft of the fruits of these efforts.  
               Currently, this book is available under a
               Creative Commons license (see <a href="#legalnotice">License</a> if you
               want to know more). I hope you enjoy reading this book as much as I
               enjoy writing it. 
            </p>
            <section id="dbc.preface.audience" class="section">
               <div class="section-titlepage">
                  <h3>1.1. Audience</h3>
               </div>
               <p>This book covers topics which range from very easy to pretty
                  demanding. The more challenging a problems is the more you need
                  experience from different domains (CSS, FO, XSLT, etc.) As such,
                  this book does not and cannot attempt to teach you DocBook or any
                  such related technology (with the exception of <a href="#dbc.markup">Chapter 1, <i>Knowing DocBook’s Structure</i></a>). If you want to learn DocBook or need
                  some help with XML or XSLT, search elsewhere. There are plenty of
                  information available either online or printed. 
               </p>
               <p>This book is aimed at DocBook users who write
                  <em>and</em> seek answers for their customization
                  problems. However, with some try-and-error, it can also be useful
                  for ordinary writers who want to try something out. For readers
                  who want further information, links included in the <em class="citetitle">See
                     Also</em> section at the end of each topic. 
               </p>
            </section>
            <section id="dbc.preface.db4-vs-5" class="section">
               <div class="section-titlepage">
                  <h3>1.2. DocBook 4 or 5?</h3>
               </div>
               <p>Although a lot of these topics can be used for both versions
                  with minimal changes, this book focuses on DocBook 5. Why?
                  There are several reasons: 
               </p>
               <div class="itemizedlist">
                  <ul>
                     <li>
                        <p>DocBook 4 is in maintenance mode and DocBook 5
                           is the future.
                        </p>
                     </li>
                     <li>
                        <p>I wanted to show an exhaustive example with
                           DocBook 5. With this book, I hope, users can learn how to
                           adopt and use it.
                        </p>
                     </li>
                     <li>
                        <p>It is easy to transform DocBook 4 into version 5 as
                           shown in <a href="#dbc.structure.db4-to-db5">Section 3.3, “Converting DocBook from Version 4 to Version 5”</a>.
                        </p>
                     </li>
                     <li>
                        <p>It simplifies writing <em>a lot</em> if you
                           can concentrate on only one version and not on two. It is also
                           easier to read for you.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>The differences are documented in the <em class="citetitle">DocBook5: The
                     Definitive Guide</em> book, section <em class="citetitle"><a href="http://www.docbook.org/tdg5/en/html/ch01.html#introduction-whats-new">What’s New in DocBook V5.0?</a></em>.
               </p>
               <p>Apart from the DocBook examples, the transformation examples
                  are currently based on the DocBook XSL stylesheets version 1.x.y.
                  They are stable, well-documented and can be used with any XSLT 1.0
                  processor. At the moment, these stylesheets are rewritten for XSLT
                  2.0. 
                  
               </p>
               <p>On the other side, there is always the tension between
                  implementing new concepts and retaining backward compatibility.
                  For this reason, the XSLT 1.0 stylesheets are rewritten for XSLT
                  2.0. This task is not finished yet. As soon as they are
                  production-stable, they will be covered in this book.
               </p>
            </section>
            <section id="dbc.preface.further-reading" class="section">
               <div class="section-titlepage">
                  <h3>1.3. Further Readings</h3>
               </div>
               <p>By no means is this book complete. As this book is based on
                  technologies like CSS, XML, (X)HTML, and XSLT, it is always a good
                  idea to seek other information. I highly recommend to read the
                  books by <span class="personname"><span class="firstname">Norman</span> <span class="surname">Walsh</span></span> and <span class="personname"><span class="firstname">Bob</span> <span class="surname">Stayton</span></span> as mentioned before.
               </p>
            </section>
            <section id="dbc.preface.typo" class="section">
               <div class="section-titlepage">
                  <h3>1.4. Typographical Conventions</h3>
               </div>
               <p>The following typographical conventions are used in this book:</p>
               <div class="itemizedlist">
                  <ul>
                     <li>
                        <p><em>Italic</em> is used for definition of new
                           terms or emphasised text.
                        </p>
                     </li>
                     <li>
                        <p><code class="literal">Monospace text</code> is used for code
                           listings, URLs, filenames, namespaces, or links.
                        </p>
                     </li>
                     <li>
                        <p><strong class="command">Monospace bold text</strong> for commands or
                           emphasised text in listings.
                        </p>
                     </li>
                     <li>
                        <p><em><code class="literal">Monospace italic
                                 text</code></em> is used for placeholders in
                           listings.
                        </p>
                     </li>
                  </ul>
               </div>
            </section>
            <section id="dbc.preface.feedback" class="section">
               <div class="section-titlepage">
                  <h3>1.5. Feedback</h3>
               </div>
               <p>The project is hosted on <a href="https://sourceforge.net">SourceForge</a> under the
                  name <a href="https://sourceforge.net/projects/doccookbook/">DocCookBook</a>.
                  Feel free to send me praise, constructive criticism, suggestions,
                  ideas, improvements, or anything else. 
                  
               </p>
            </section>
            <section id="dbc.preface.contrib" class="section">
               <div class="section-titlepage">
                  <h3>1.6. Contribute to the Book</h3>
               </div>
               <p>The source code of this book is published and maintained as a 
                  Mercurial repository. Feel free to clone it, make improvements and
                  mail me your changes to <code class="email">&lt;<a href="mailto:tom_schr@web.de">tom_schr@web.de</a>&gt;</code>. 
                  
               </p>
               <p>
                  Getting a copy takes just a few seconds. 
                  If you have  Mercurial already installed on your system, run the 
                  following command:
               </p>
               <div class="screen"><pre>hg clone https://hg.code.sf.net/p/doccookbook/code doccookbook</pre></div>
               <p>Mercurial is a free, distributed version control system and
                  available for Mac, Linux, and Windows. Download it from <a href="http://mercurial.selenic.com">http://mercurial.selenic.com</a>.
               </p>
            </section>
            <section id="dbc.preface.piwik" class="section">
               <div class="section-titlepage">
                  <h3>1.7. A Few Words About Piwik</h3>
               </div>
               <p>If you are reading this text online, you may have noticed that
                  this project uses <span class="application"><a href="http://piwik.org">Piwik</a></span>. According to its home page, Piwik is a
                  “<span class="quote">real time web analytics software program</span>”. The
                  result gives me detailed reports on my Web sites visitors: where do they
                  come from, which browser and operating system they use and so on.
                  
               </p>
               <p>Why Piwik? First it is open source, but that is not the main
                  reason. The main reason why I use Piwik is it collects data anonymously 
                  to create statistical studies. With these result I can improve
                  this project and make it better.
               </p>
               <p>For example, if my visitors browsing the Web through Firefox,
                  Opera, and Chromium instead of Internet Explorer, I can focus more
                  on the first three browsers. Focusing on one area gives me more
                  time to write cool new topics. Or improve existing text. Or draw
                  nice graphics. Furthermore with the collected data I can see which
                  topics are the most popular and which needs additional devotion. I
                  hope you get the idea.
               </p>
               <p>Just to make it clear: The collected data is completely
                  anonymous and only used to improve this project. It will
                  <em>never</em> be sold nor will it be used to spam
                  you.
               </p>
            </section>
            <section id="dbc.preface.license" class="section">
               <div class="section-titlepage">
                  <h3>1.8. Licensed under Creative Commons</h3>
               </div>
               <p>The book is currently released under a Creative Commons
                  <span title="Creative Commons&#xA;          Attribution-NonCommercial-ShareAlike 3.0"
                        class="acronym"><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en">CC BY-NC-SA 3.0 DE</a></span>
                  license (see original German text in <a href="#cc-by-nc-sa-30-de">Appendix A</a> or the
                  English translation in <a href="#cc-by-nc-sa-30-unported">Appendix B</a>). After this book is finished, the
                  license will be changed to <span title="Creative Commons Attribution-ShareAlike 3.0" class="acronym"><a href="http://creativecommons.org/licenses/by-sa/3.0/de/deed.en">CC BY-SA 3.0 DE</a></span>.
               </p>
            </section>
            <section id="dbc.preface.ack" class="section">
               <div class="section-titlepage">
                  <h3>1.9. Acknowledgments</h3>
               </div>
               <p>Such a large project is usually not a one man show. Many
                  people contributed to this book:
               </p>
               <div class="itemizedlist">
                  <ul>
                     <li>
                        <p><span class="personname"><span class="firstname">Antje</span> <span class="surname">Faber</span></span> for proofreading some of my texts.
                        </p>
                     </li>
                     <li>
                        <p><span class="personname"><span class="firstname">Matthias</span> <span class="surname">Weckbecker</span></span> for helping me with some wording and ideas.
                        </p>
                     </li>
                  </ul>
               </div>
            </section>
            <div class="footnotes">
               <hr width="100" align="left" class="footnotes-divider" />
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#fnt.tdg" name="ftn.fnt.tdg">2</a><span class="csq">]</span></sup>Like the reference <em class="citetitle"><a href="http://www.docbook.org/tdg51/en/html/docbook.html">DocBook 5: The Definitive Guide</a></em> from <span class="personname"><span class="firstname">Norman</span> <span class="surname">Walsh</span></span> or <span class="personname"><span class="firstname">Bob</span> <span class="surname">Stayton</span></span>'s <em class="citetitle"><a href="http://www.sagehill.net/docbookxsl/">DocBook
                           XSL</a></em></p>
               </div>
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.preface.5.2" name="ftn.dbc.preface.5.2">3</a><span class="csq">]</span></sup><span class="personname"><span class="firstname">Dave</span> <span class="surname">Pawson</span></span> maintains a <a href="http://www.dpawson.co.uk/">DocBook FAQ</a> and
                     the previous mentioned books can be found online too.
                  </p>
               </div>
            </div>
         </article>
         <article id="dbc.markup" class="chapter">
            <header class="chapter-titlepage">
               <h2>Chapter 1. Knowing DocBook’s Structure</h2>
               <div class="abstract">
                  <p>DocBook has a wide variety of elements covering different
                     semantics: from structural elements like <code class="tag-element">book</code><code class="tag-element">,
                        chapter</code>, <code class="tag-element">appendix</code>, to block elements like
                     <code class="tag-element">orderedlist</code>, <code class="tag-element">table</code>, <code class="tag-element">figure</code>,
                     to inline elements like <code class="tag-element">filename</code>, <code class="tag-element">quote</code>,
                     or <code class="tag-element">link</code>. All of these elements are well covered in
                     <em class="citetitle">The Definitive Guide</em>. This chapter
                     shows more the unknown parts and how to avoid pitfalls and
                     improve consistency throughout your documentation. 
                  </p>
               </div>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.markup.intro">1.1. Introduction</a></span></li>
                  <li><span><a href="#dbc.db.xincludes">1.2. Modularize Your Document with XIncludes</a></span></li>
                  <li><span><a href="#dbc.section.vs.sectx">1.3. Distinguish Between Section and SectX Elements</a></span></li>
                  <li><span><a href="#dbc.markup.lists">1.4. Using Lists</a></span></li>
                  <li><span><a href="#dbc.db.remarks">1.5. Inserting Remarks</a></span></li>
                  <li><span><a href="#dbc.db.link">1.6. Choosing Between Two Link Methods</a></span></li>
                  <li><span><a href="#dbc.db.quotes">1.7. Inserting Inline Quotes</a></span></li>
               </ul>
            </div>
            <section id="dbc.markup.intro" class="section">
               <div class="section-titlepage">
                  <h3>1.1. Introduction</h3>
               </div>
               <p>
                  <div class="remark">TBD</div>
               </p>
            </section>
            <section id="dbc.db.xincludes" class="section">
               <div class="section-titlepage">
                  <h3>1.2. Modularize Your Document with XIncludes<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.db.xincludes.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need a method to split your document into several
                     “<span class="quote">modules</span>” and put it together afterwards.
                  </p>
               </section>
               <section id="dbc.db.xincludes.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Use <em class="italic">XInclude</em>. It is a <span title="World Wide Web Consortium" class="acronym">W3C</span>
                     specification and defines the elements <code class="tag-element">xi:include</code> and
                     <code class="tag-element">xi:fallback</code>. They are not DocBook elements (as they
                     are definied by the <span class="acronym">W3C</span> and not <span title="Organization for the Advancement of Structured Information Standards"
                           class="acronym">OASIS</span>), however 
                     they have been integrated in version 5.x<sup class="footnote"><span class="osq">[</span><a name="dbc.db.xincludes.4.2.7" href="#ftn.dbc.db.xincludes.4.2.7">4</a><span class="csq">]</span></sup>. Note, XIncludes work in DocBook regardless which
                     version (4.x or 5.x) you use.
                  </p>
                  <p>If you want to use XIncludes, you need these things:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>A XML parser who supports XIncludes.</p>
                        </li>
                        <li>
                           <p>The element <code class="tag-element">xi:include</code>. In general, it can be
                              placed almost everywhere. It is a “<span class="quote">pointer</span>” to
                              the file which is going to be included.
                           </p>
                        </li>
                        <li>
                           <p>The attribute <code class="tag-attribute">href</code> inside the
                              <code class="tag-element">xi:include</code> element. It is an URI which refers to
                              your included file.
                           </p>
                        </li>
                        <li>
                           <p>The file which is referenced by the <code class="tag-attribute">href</code> attribute. The content of the
                              file will replace the <code class="tag-element">xi:include</code> element.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>The following example shows a book which points to a
                     substructure assuming chapters:
                  </p>
                  <figure id="ex.db.xincludes.book-with-3-chapters" class="example-wrapper">
                     <div class="title">Example 1.1. A Book with XIncluded Chapters</div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;book version="5.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;title&gt;...&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  <strong class="emphasis">&lt;xi:include href="intro.xml"/&gt;</strong>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span><strong class="emphasis">  &lt;xi:include href="conceptual-overview.xml"/&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/book&gt;</pre></div>
                     </div>
                  </figure>
                  <p>The above book contains an introduction (file
                     <code class="filename">intro.xml</code>) and a conceptual overview (file
                     <code class="filename">conceptual-overview.xml</code>). Both are
                     referenced by the XInclude´s <code class="tag-attribute">href</code>
                     attribute. 
                  </p>
                  <p>Before you transform your document, you need to resolve your
                     XIncludes, either by your XML parser or “<span class="quote">manually</span>” by
                     a XSLT transformation. The following procedure shows a typical
                     workflow:
                  </p>
                  <figure id="dbc.db.xincludes.4.9" class="procedure-wrapper">
                     <div class="title">Typical Workflow with XIncludes</div>
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Write your document structure, usually it will be a book
                                    or an article. Do not forget to include the XInclude namespace
                                    <code class="uri">http://www.w3.org/2001/XInclude</code> into the root
                                    element. It is common to use the prefix <code class="tag-prefix">xi</code>.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Add <code class="tag-element">xi:include</code> elements for those elements you
                                    want to maintain in a separate file. Typically, this can be an
                                    appendix, chapter, preface, glossary, or any other top level
                                    elements.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Resolve your XIncludes. Use a XML parser who supports
                                    XIncludes, for example, <strong class="command">xmllint</strong> from the
                                    libxml2 library. This XML parser brings the
                                    <code class="option">--xinclude</code> option to resolve all your
                                    XInclude elements in one step:
                                 </p>
                                 <div class="screen"><pre><strong class="command">xmllint</strong> --xinclude --output big.xml book.xml</pre></div>
                                 <p>The above command resolves all XIncludes and saves the
                                    result in the file <code class="filename">big.xml</code>. Note, this
                                    does not perform any validation! It just replaces
                                    <code class="tag-element">xi:include</code> with the content of the referenced
                                    file. After the XInclude elements are resolved, the file looks
                                    now like this:
                                 </p>
                                 <div class="programlisting"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;book version="5.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xi="http://www.w3.org/2001/XInclude"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;title&gt;...&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;chapter&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;title&gt;Introduction&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;...&lt;/para&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;/chapter&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;chapter&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>   &lt;title&gt;Conceptual Overview&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;para&gt;...&lt;/para&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;/chapter&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/book&gt;</pre></div>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Validate the result (in our example, it is
                                    <code class="filename">big.xml</code>) with your DocBook schema. 
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Transform the result file with your stylesheets into your
                                    output format.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
               </section>
               <section id="dbc.db.xincludes.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The previous procedure showed a book with xincluded chapters.
                     It is possible to even go deeper and include also section into a
                     chapter. Actually, there is no limit. You should only be aware
                     that you do not create circular references (file A includes file B
                     and B includes A).
                  </p>
                  <p>As XIncludes are very common nowadays, resolving
                     <code class="tag-element">xi:include</code> and transforming into the output format
                     can be done in one step. This is the case for
                     <strong class="command">xsltproc</strong> from the libxslt library. Use the
                     <code class="option">--xinclude</code> option as shown:
                  </p>
                  <div class="screen"><pre><strong class="command">xsltproc</strong> --xinclude <em class="replaceable"><code>STYLESHEET</code></em> <em class="replaceable"><code>XMLFILE</code></em></pre></div>
                  <p>If you prefer Saxon, version 9 contains the
                     <code class="option">-xi</code> option to resolve XIncludes:
                  </p>
                  <div class="screen"><pre><strong class="command">saxon9</strong> -xi -xsl:<em class="replaceable"><code>STYLESHEET</code></em> -s:<em class="replaceable"><code>XMLFILE</code></em></pre></div>
                  <p>The last section showed a general method to work with
                     XIncludes. In most cases this is enough. However, XIncludes offers
                     more benefits which are discovered in the following
                     subsections.
                  </p>
                  <section id="sec.db.modularize.xifallback" class="section">
                     <div class="section-titlepage">
                        <h5>Fallbacks</h5>
                     </div>
                     <p>If the referenced file in the <code class="tag-element">xi:include</code> element
                        is not available, the XInclude step will fail. How can you avoid
                        that? The XInclude specification defines also the
                        <code class="tag-element">xi:fallback</code> element. This element can be used to
                        add code when a referenced resource could not be retrieved:
                     </p>
                     <figure id="ex.db.modularize.xifallback" class="example-wrapper">
                        <div class="title">Example 1.2. Fallback Possibility with <code class="tag-element">xi:fallback</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xi:include href="revhistory.xml"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xi:fallback&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The revision history could not be retrieved.&lt;/para&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;/xi:fallback&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xi:include&gt;</pre></div>
                        </div>
                     </figure>
                     <p>The previous code does the following: When the
                        <code class="tag-element">xi:include</code> element is being processed, the XML
                        parser tries to include the file
                        <code class="filename">revhistory.xml</code>. If the file can not be
                        retrieved, the XML parser will consider the <code class="tag-element">xi:fallback</code> element
                        and include the contents. In the above case it includes a
                        <code class="tag-element">para</code> element showing the failed attempt.
                     </p>
                     <p>This method is useful when you want to process files which
                        cannot be expected to always be there. For example, the previous
                        revision history needs to be generated first. However, it is not
                        always sure that the revision history can be generated from an
                        possible offline version control system.
                     </p>
                  </section>
                  <section id="sec.db.modularize.include-text" class="section">
                     <div class="section-titlepage">
                        <h5>Including Text</h5>
                     </div>
                     <p>The previous examples dealt with included resources which
                        are XML only. If you need to include text, this can also be done
                        with XInclude.
                     </p>
                     <p>Most common usecase is including source code which is
                        maintained separately. The following example points to a C source
                        code which needs to be included as text:
                     </p>
                     <figure id="ex.db.modularize.include-text" class="example-wrapper">
                        <div class="title">Example 1.3. Included Text in a Programlisting</div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;programlisting language="c"&gt;&lt;xi:include
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>   <strong class="emphasis">parse="text"</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   href="parser.c"/&gt;&lt;/programlisting&gt;</pre></div>
                        </div>
                     </figure>
                     <p>The important line is <code class="code">parse="text"</code>. This
                        advises the XInclude processor to handle the referenced file
                        just as text and not as XML. The default value for <code class="tag-attribute">parse</code> is <code class="tag-attvalue">xml</code>.
                     </p>
                     <p>It is recommended to remove any whitespaces inside
                        <code class="tag-element">programlisting</code> as shown above to avoid spurious
                        indendation or linebreaks.
                     </p>
                  </section>
               </section>
               <section id="dbc.db.xincludes.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><a href="http://www.w3.org/TR/xinclude/">XML Inclusions (XInclude) Version 1.0</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.sagehill.net/docbookxsl/ModularDoc.html#UsingXinclude">Using XInclude</a></p>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
            <section id="dbc.section.vs.sectx" class="section">
               <div class="section-titlepage">
                  <h3>1.3. Distinguish Between Section and SectX Elements<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.section.vs.sectx.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need to know what the differences and advantages are of
                     using a <code class="tag-element">section</code> over a <code class="tag-element">sectX</code> element.
                  </p>
               </section>
               <section id="dbc.section.vs.sectx.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>The differences between <code class="tag-element">section</code> against
                     <code class="tag-element">sectX</code> are depicted in <a href="#tab.section.vs.sectx.comparison">Table 1.1, “Comparison Between <code class="tag-element">section</code> and <code class="tag-element">sectX</code> Elements”</a>: 
                  </p>
                  <figure id="tab.section.vs.sectx.comparison" class="table-wrapper">
                     <div class="title">Table 1.1. Comparison Between <code class="tag-element">section</code> and <code class="tag-element">sectX</code> Elements
                     </div>
                     <div class="table">
                        <table border="0" summary="Table 1.1. Comparison Between section and sectX Elements"
                               style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                           <colgroup>
                              <col class="tcol1" width="33%" />
                              <col class="tcol2" width="33%" />
                              <col class="tcol3" width="33%" />
                           </colgroup>
                           <thead>
                              <tr>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Issue</th>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="tag-element">section</code></th>
                                 <th style="border-bottom: 0.5pt solid ; "><code class="tag-element">sectX</code></th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Nesting Level?</td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Undefinied<sup class="footnote"><span class="osq">[</span><a name="tab.section.vs.sectx.comparison.2.2.1.2.1"
                                          href="#ftn.tab.section.vs.sectx.comparison.2.2.1.2.1">a</a><span class="csq">]</span></sup></td>
                                 <td style="border-bottom: 0.5pt solid ; ">Up to five levels (<code class="tag-element">sect5</code>)
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Readability?</td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Worse</td>
                                 <td style="border-bottom: 0.5pt solid ; ">Better</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Easy Relocation?</td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Yes</td>
                                 <td style="border-bottom: 0.5pt solid ; ">No, needs to be renamed</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; ">Renaming after relocation?</td>
                                 <td style="border-right: 0.5pt solid ; ">No</td>
                                 <td>Yes</td>
                              </tr>
                           </tbody>
                           <tbody class="footnotes">
                              <tr>
                                 <td colspan="3">
                                    <div class="footnote">
                                       <p><sup><span class="osq">[</span><a href="#tab.section.vs.sectx.comparison.2.2.1.2.1"
                                                name="ftn.tab.section.vs.sectx.comparison.2.2.1.2.1">a</a><span class="csq">]</span></sup>See discussion.
                                       </p>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </figure>
               </section>
               <section id="dbc.section.vs.sectx.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>Apart from technical issues, using <code class="tag-element">section</code> or
                     <code class="tag-element">sect1</code> is in most cases a matter of taste. However,
                     knowing some of the differences in <a href="#tab.section.vs.sectx.comparison">Table 1.1</a> can be helpful to decide which is for
                     your document the better element.
                     
                  </p>
                  <div class="formalpara">
                     <p><b>Nesting Level</b>  If you have documents which goes further than level five,
                        use the <code class="tag-element">section</code> element. This can be indefinitely
                        nested. On the other side, if you want to restrict the level up to
                        five, better use the <code class="tag-element">sectX</code> elements. You can, however,
                        use DocBook's RELAX NG schema to customize it further (see next
                        section).
                     </p>
                  </div>
                  <div class="formalpara">
                     <p><b>Readability</b>  This issue depends on how you edit your DocBook source code.
                        If you edit it manually in your editor (in other words: without
                        the aid of some kind of “<span class="quote">WYSYWYG</span>”), you can see and
                        understand the level straight from the tag name when using
                        <code class="tag-element">sectX</code>. Especially if you have lots of nested
                        section this makes it a lot easier than <code class="tag-element">section</code>.
                        However, modern XML editors can show the XPath where
                        you are, so it may be negligible.
                     </p>
                  </div>
                  <div class="formalpara">
                     <p><b>Relocation</b>  If you have to change the structure a lot, using
                        <code class="tag-element">section</code> elements make it a lot easier. When you use a
                        <code class="tag-element">sect2</code> element and this should become a <code class="tag-element">sect1</code>
                        element you have to rename it. 
                     </p>
                  </div>
               </section>
               <section id="dbc.section.vs.sectx.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p><a href="http://www.docbook.org/tdg51/en/html/ch05.html#ex.limitsdepth">http://www.docbook.org/tdg51/en/html/ch05.html#ex.limitsdepth</a></p>
               </section>
            </section>
            <section id="dbc.markup.lists" class="section">
               <div class="section-titlepage">
                  <h3>1.4. Using Lists<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.markup.lists.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to know what list types are available in DocBook.</p>
               </section>
               <section id="dbc.markup.lists.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>DocBook provides three basic lists which are used most often:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><code class="tag-element">itemizedlist</code>, for unordered lists (like
                              <code class="tag-element">ul</code> in HTML)
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">orderedlist</code> for numbered lists (like
                              <code class="tag-element">ol</code> in HTML)
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">variablelist</code>, for lists containing terms and their
                              definition (like <code class="tag-element">dl</code> in HTML)
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>Additionally, for specific purposes, DocBook provides special
                     lists (not explained in this topic):
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><code class="tag-element">bibliolist</code> is a wrapper for bibliographic
                              content. A <code class="tag-element">bibliolist</code> is usually inserted in
                              section-like elements where a <code class="tag-element">bibliography</code> is not
                              allowed.
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">calloutlist</code>, a usually numbered list which
                              points to a line in a listing
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">glosslist</code> is a wrapper for glossary content.
                              A <code class="tag-element">glosslist</code> is usually inserted in section-like
                              elements where a <code class="tag-element">glossary</code> is not allowed.
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">segmentedlist</code> is a list which can be used which
                              have a one-to-one dependence with its title. A
                              <code class="tag-element">segmentedlist</code> can be formatted in a number of ways
                              (tabular or as a list block).
                              
                           </p>
                        </li>
                        <li>
                           <p><code class="tag-element">simplelist</code> is an unordered list for single
                              words or small phrases.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>The previous lists are used to maintain semantic
                     distinction.
                  </p>
               </section>
               <section id="dbc.markup.lists.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The list types <code class="tag-element">orderedlist</code> and <code class="tag-element">itemizedlist</code>
                     are structural identical (except for its initial element) as you will
                     see in the following subsections.
                  </p>
                  <p>The <code class="tag-element">variablelist</code> is slightly different and contains
                     the <code class="tag-element">term</code> element for its term.
                  </p>
                  <section id="dbc.markup.lists.5.4" class="section">
                     <div class="section-titlepage">
                        <h5>Features of <code class="tag-element">itemizedlist</code></h5>
                     </div>
                     <p>An <code class="tag-element">itemizedlist</code> is a unordered list and can be
                        written as shown in the following example:
                     </p>
                     <figure id="dbc.markup.lists.5.4.3" class="example-wrapper">
                        <div class="title">Example 1.4. Unordered List with Three Entries</div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;itemizedlist&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The first entry&lt;/para&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;para&gt;The second entry&lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The third entry&lt;/para&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/itemizedlist&gt;</pre></div>
                        </div>
                     </figure>
                     <p>The <code class="tag-element">itemizedlist</code> list in DocBook uses by default
                        a disc symbol (• solid circle). If you nest an
                        <code class="tag-element">itemizedlist</code>, it will first start the disc (• solid
                        circle) and uses a circle (○ open circle) and finally a square
                        (■ solid square). If you nest your list deeper, the sequence is
                        repeated. The hierarchy looks like this:
                     </p>
                     <figure id="dbc.markup.lists.5.4.5" class="informaltable-wrapper">
                        <div class="informaltable">
                           <table border="0"
                                  style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                              <colgroup>
                                 <col class="tcol1" align="right" width="50%" />
                                 <col class="tcol2" width="50%" />
                              </colgroup>
                              <thead>
                                 <tr>
                                    <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">Level</th>
                                    <th style="border-bottom: 0.5pt solid ; ">Shows as</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">1.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">• • •</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">2.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">○ ○ ○</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; " align="right">3.</td>
                                    <td>■ ■ ■</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </figure>
                     <p>The default bullet symbol can be overwritten with the <code class="tag-attribute">mark</code> attribute:
                     </p>
                     <div class="programlisting"><pre class="xml">&lt;itemizedlist mark="circle"&gt;</pre></div>
                     <p>It is even possible to deviate from its default symbol in a
                        <code class="tag-element">listitem</code> by using the <code class="tag-element">overwrite</code> attribute:
                     </p>
                     <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;itemizedlist&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The first entry&lt;/para&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;listitem overwrite="square"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;para&gt;The second entry&lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The third entry&lt;/para&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/itemizedlist&gt;</pre></div>
                  </section>
                  <section id="dbc.markup.lists.5.5" class="section">
                     <div class="section-titlepage">
                        <h5>Features of <code class="tag-element">orderedlist</code></h5>
                     </div>
                     <p>An <code class="tag-element">orderedlist</code> can be written as shown in the
                        following example:
                     </p>
                     <figure id="dbc.markup.lists.5.5.3" class="example-wrapper">
                        <div class="title">Example 1.5. Numbered List with Three Entries</div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;orderedlist&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The first entry&lt;/para&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;para&gt;The second entry&lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;para&gt;The third entry&lt;/para&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/orderedlist&gt;</pre></div>
                        </div>
                     </figure>
                     <p>The <code class="tag-element">orderedlist</code> in DocBook numbers as arabic
                        numbers by default. If you nest an <code class="tag-element">orderedlist</code>, it
                        will be automatically numbered as shown in the following
                        sequence:
                     </p>
                     <figure id="dbc.markup.lists.5.5.5" class="informaltable-wrapper">
                        <div class="informaltable">
                           <table border="0"
                                  style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                              <colgroup>
                                 <col class="tcol1" align="right" width="50%" />
                                 <col class="tcol2" width="50%" />
                              </colgroup>
                              <thead>
                                 <tr>
                                    <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">Level</th>
                                    <th style="border-bottom: 0.5pt solid ; ">Shows as</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">1.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">1, 2, 3</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">2.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">a, b, c</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">3.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">i, ii, iii</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="right">4.</td>
                                    <td style="border-bottom: 0.5pt solid ; ">A, B, C</td>
                                 </tr>
                                 <tr>
                                    <td style="border-right: 0.5pt solid ; " align="right">5.</td>
                                    <td>I, II, III</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </figure>
                     <p>The numbering style in an <code class="tag-element">orderedlist</code> can be
                        changed with the <code class="tag-attribute">numberation</code>
                        attribute. Allowed values are <span class="simplelist"><span class="member">arabic</span>, <span class="member">loweralpha</span>, <span class="member">lowerroman</span>, <span class="member">upperalpha</span>, <span class="member">upperroman</span>, <span class="member">arabicindic</span></span>.
                     </p>
                  </section>
                  <section id="dbc.markup.lists.5.6" class="section">
                     <div class="section-titlepage">
                        <h5>Features of <code class="tag-element">variablelist</code></h5>
                     </div>
                     <p>An <code class="tag-element">variablelist</code>, despite its confusing name,
                        holds all sort of terms and their definition. It is not limited
                        to variables only. The following example shows how to mark a
                        <code class="tag-element">variablelist</code>.
                     </p>
                     <figure id="dbc.markup.lists.5.6.3" class="example-wrapper">
                        <div class="title">Example 1.6. Definition List with Two Entries</div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;variablelist&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;varlistentry&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;term&gt;Hamburg&lt;/term&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>       &lt;para&gt;Town in the northern part of Germany&lt;/para&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/varlistentry&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;varlistentry&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;term&gt;Nueremberg&lt;/term&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>       &lt;para&gt;Town in the south-eastern part of Germany&lt;/para&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/varlistentry&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>&lt;/variablelist&gt;</pre></div>
                        </div>
                     </figure>
                     <p>A <code class="tag-element">varlistentry</code> can contain more than one term.
                        How the terms are displayed depends usually on the output
                        formats. By default, each <code class="tag-element">term</code> is printed on a
                        separate line.
                     </p>
                  </section>
               </section>
               <section id="dbc.markup.lists.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <div class="itemizedlist">
                     <div class="title">External Links</div>
                     <ul>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/bibliolist.html">http://www.docbook.org/tdg5/en/html/bibliolist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/calloutlist.html">http://www.docbook.org/tdg5/en/html/calloutlist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/glosslist.html">http://www.docbook.org/tdg5/en/html/glosslist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/itemizedlist.html">http://www.docbook.org/tdg5/en/html/itemizedlist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/orderedlist.html">http://www.docbook.org/tdg5/en/html/orderedlist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/segmentedlist.html">http://www.docbook.org/tdg5/en/html/segmentedlist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.docbook.org/tdg5/en/html/simplelist.html">http://www.docbook.org/tdg5/en/html/simplelist.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://www.sagehill.net/docbookxsl/Lists.html">http://www.sagehill.net/docbookxsl/Lists.html</a></p>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
            <section id="dbc.db.remarks" class="section">
               <div class="section-titlepage">
                  <h3>1.5. Inserting Remarks<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.db.remarks.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to insert comments or remarks in your document to
                     enable or disable them in the output format.
                  </p>
               </section>
               <section id="dbc.db.remarks.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>For this purpose, DocBook provides a <code class="tag-element">remark</code> element. The following example shows
                     how to use it:
                  </p>
                  <figure id="ex.db.inlineremark" class="example-wrapper">
                     <div class="title">Example 1.7. A Remark Inside a Paragraph</div>
                     <div class="example">
                        <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;para&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>This is a small text.&lt;remark&gt;Add more content&lt;/remark&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/para&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.db.remarks.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>To add comments in your document, there are two
                     methods:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>Use XML comments</p>
                        </li>
                        <li>
                           <p>Use DocBook’s <code class="tag-element">remark</code> element
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>XML comments can be placed almost everywhere in your XML
                     document. It is a very common method to give yourself or others
                     some hints. This can be done with XML comments 
                     like in this example:
                  </p>
                  <div class="screen"><pre>&lt;para&gt;
This is a text &lt;!-- Ohh, we should add more --&gt;
&lt;/para&gt;</pre></div>
                  <p>However, XML comments has one drawback: They are suppressed
                     during transformation. As such, they are unavailable in your
                     output format and can not be displayed anymore. Usually, you <em>do
                        not</em> want them to appear in your output. 
                  </p>
                  <p>On the contrary, by using the <code class="tag-element">remark</code> element,
                     comments can be shown or suppressed whenever you want them. For
                     example, if you write your document and put some remarks, you can
                     show them to your contributors for review. After the document is
                     ready to be published, leave the remark as they are but suppress
                     the remark transformation.
                     
                  </p>
                  <p>To display or suppress your remarks, use the parameter
                     <em class="parameter"><code>show.comments</code></em>. This parameter can appear
                     either on the command line of your XSLT processor or in a
                     customization layer. Any non-zero value shows your remarks whereas
                     a value of zero suppress them.
                  </p>
                  <p>When should you use XML comments and when remarks? The
                     following table gives you a quick overview.
                  </p>
                  <figure id="tab.db.xmlcomments-vs-remarks" class="table-wrapper">
                     <div class="title">Table 1.2. Comparison XML Comments versus Remarks</div>
                     <div class="table">
                        <table border="0" summary="Table 1.2. Comparison XML Comments versus Remarks"
                               style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                           <colgroup>
                              <col class="tcol1" width="33%" />
                              <col class="tcol2" width="33%" />
                              <col class="tcol3" width="33%" />
                           </colgroup>
                           <thead>
                              <tr>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Topic</th>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">XML Comments</th>
                                 <th style="border-bottom: 0.5pt solid ; ">Remarks</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">When to use it?</td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                                    
                                    <p>Comments which are only read by you</p>
                                    
                                 </td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    
                                    <p>Comments which can and should be read by others</p>
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Where to place it?</td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                                    
                                    <p>Almost everywhere<sup class="footnote"><span class="osq">[</span><a name="tab.db.xmlcomments-vs-remarks.2.2.2.2.1.1"
                                             href="#ftn.tab.db.xmlcomments-vs-remarks.2.2.2.2.1.1">a</a><span class="csq">]</span></sup></p>
                                    
                                 </td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    
                                    <p>Restricted by the DocBook schema<sup class="footnote"><span class="osq">[</span><a name="tab.db.xmlcomments-vs-remarks.2.2.2.3.1.1"
                                             href="#ftn.tab.db.xmlcomments-vs-remarks.2.2.2.3.1.1">b</a><span class="csq">]</span></sup></p>
                                    
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; ">Can be displayed and suppressed?</td>
                                 <td style="border-right: 0.5pt solid ; ">No, always suppressed</td>
                                 <td>Yes, by using the parameter <em class="parameter"><code>show.comments</code></em></td>
                              </tr>
                           </tbody>
                           <tbody class="footnotes">
                              <tr>
                                 <td colspan="3">
                                    <div class="footnote">
                                       <p><sup><span class="osq">[</span><a href="#tab.db.xmlcomments-vs-remarks.2.2.2.2.1.1"
                                                name="ftn.tab.db.xmlcomments-vs-remarks.2.2.2.2.1.1">a</a><span class="csq">]</span></sup>An example where you <em>cannot</em>
                                          insert your XML comment is inside an attribute.
                                       </p>
                                    </div>
                                    <div class="footnote">
                                       <p><sup><span class="osq">[</span><a href="#tab.db.xmlcomments-vs-remarks.2.2.2.3.1.1"
                                                name="ftn.tab.db.xmlcomments-vs-remarks.2.2.2.3.1.1">b</a><span class="csq">]</span></sup>See <a href="http://www.docbook.org/tdg51/en/html/tag.html">http://www.docbook.org/tdg51/en/html/tag.html</a> 
                                          for more details.
                                       </p>
                                    </div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </figure>
               </section>
            </section>
            <section id="dbc.db.link" class="section">
               <div class="section-titlepage">
                  <h3>1.6. Choosing Between Two Link Methods<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.db.link.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need some ideas how to markup links.</p>
               </section>
               <section id="dbc.db.link.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Use the <code class="tag-element">link</code><sup class="footnote"><span class="osq">[</span><a name="dbc.db.link.4.2.2" href="#ftn.dbc.db.link.4.2.2">5</a><span class="csq">]</span></sup> element. Links can be used in two ways:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <div class="formalpara">
                              <p><b>Without Text</b>  The link element is completely empty:
                              </p>
                           </div>
                           <div class="programlisting"><pre class="xml">&lt;link xlink:href="https://doccookbook.sf.net"/&gt;</pre></div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>With Text</b>  The link element contains some text or even other
                                 elements:
                              </p>
                           </div>
                           <div class="programlisting"><pre class="xml">&lt;link xlink:href="https://doccookbook.sf.net"&gt;The DocCookBook&lt;/link&gt;</pre></div>
                        </li>
                     </ul>
                  </div>
                  <p>Furthermore links can be used on every element as it is shown
                     in the following section.
                  </p>
               </section>
               <section id="dbc.db.link.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>In most cases, it is enough to just use an empty link element.
                     As such, you should avoid this notation:
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;link xlink:href="https://doccookbook.sf.net"&gt;https://doccookbook.sf.net&lt;/link&gt;</pre></div>
                  <p>This is mostly unnecessary as it is overly verbose, difficult
                     to read, and does not add any value. Correct such links to this
                     notations: 
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;link xlink:href="https://doccookbook.sf.net"/&gt;</pre></div>
                  <p>DocBook 5 also adds new concepts. One of this new concept is that
                     <em>every</em> element can become a link. In other
                     words, you do <em class="italic">not</em> have to use a
                     <code class="tag-element">link</code> element anymore. For example, if you want to
                     insert a book title with an additional link, it could be   
                     marked up like this:
                  </p>
                  <div class="programlisting"><pre>&lt;citetitle&gt;&lt;ulink url="https://doccookbook.sf.net"&gt;The DocCookBook&lt;/ulink&gt;&lt;/citetitle&gt;</pre></div>
                  <p>or this, depending on what you prefer:</p>
                  <div class="programlisting"><pre>&lt;ulink url="https://doccookbook.sf.net"&gt;&lt;citetitle&gt;The DocCookBook&lt;/citetitle&gt;&lt;/ulink&gt;</pre></div>
                  <p>With DocBook 5 this can be shortend:</p>
                  <div class="programlisting"><pre>&lt;citetitle xlink:href="https://doccookbook.sf.net"&gt;The DocCookBook&lt;/citetitle&gt;</pre></div>
                  <p>This is much shorter than the DocBook 4 version and much
                     clearer!
                  </p>
                  <p>Apart from the previous new link concept, DocBook  also allows
                     to control the link behavior. For example, to open a new window 
                     when clicking a link, use the <code class="tag-attribute">xlink:show</code>
                     attribute:    
                     
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;link xlink:show="new" xlink:href="https://doccookbook.sf.net"/&gt;</pre></div>
                  <p>The attribute value <code class="tag-attvalue">show</code> opens a
                     “<span class="quote">new window, frame, pane, or other relevant presentation
                        context</span>” (see <a href="http://www.docbook.org/tdg51/en/html/ref-elements.html#common.linking.attributes">Common Linking Attributes</a>).
                     Of course, this is only useful for online formats. 
                  </p>
               </section>
               <section id="dbc.db.link.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p><a href="http://www.docbook.org/tdg5/en/html/link.html">http://www.docbook.org/tdg5/en/html/link.html</a></p>
               </section>
            </section>
            <section id="dbc.db.quotes" class="section">
               <div class="section-titlepage">
                  <h3>1.7. Inserting Inline Quotes<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.db.quotes.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to use inline quotes in a consistent and language
                     independant way.
                  </p>
               </section>
               <section id="dbc.db.quotes.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Use the <code class="tag-element">quote</code> tag:
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;para&gt;This is an &lt;quote&gt;English quote&lt;/quote&gt;.&lt;/para&gt;</pre></div>
               </section>
               <section id="dbc.db.quotes.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>When people need quotes, they usually write
                     <span>"this"</span>. However, from a typographical point of
                     view, this is wrong. There are special start and end quotation
                     characters. The more elegant way is to use “<span class="quote">this</span>”.
                     
                  </p>
                  <p>However, the open and close characters are language dependent.
                     Each language has different quotation rules. German readers
                     prefer <span lang="en" class="quote">„this“</span>, French <span lang="en" class="quote">« this »</span>, and the Italians use <span lang="en" class="quote">«this»</span>. 
                  </p>
                  <p>Using quote markers directly has one disadvantages: if your
                     text contains different languages you need to know how quotes are
                     displayed in the respective language. Also it is easier and more
                     consistent to leave this typographic detail to the DocBook
                     stylesheets.
                  </p>
                  <p>One nice thing with inserting <code class="tag-element">quote</code> is it can be
                     adapted to a different language by using the <code class="tag-attribute">xml:lang</code> attribute:
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;para&gt;This is a &lt;quote xml:lang="de"&gt;German quote&lt;/quote&gt;.&lt;/para&gt;</pre></div>
               </section>
            </section>
            <div class="footnotes">
               <hr width="100" align="left" class="footnotes-divider" />
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.db.xincludes.4.2.7" name="ftn.dbc.db.xincludes.4.2.7">4</a><span class="csq">]</span></sup>To use XInclude with DocBook 5.x, use the
                     <code class="filename">docbookxi.rnc</code> RELAX NG schema. 
                  </p>
               </div>
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.db.link.4.2.2" name="ftn.dbc.db.link.4.2.2">5</a><span class="csq">]</span></sup>In DocBook 4 use the <code class="tag-element">ulink</code> element
                  </p>
               </div>
            </div>
         </article>
         <article id="dbc.common" class="chapter">
            <header class="chapter-titlepage">
               <h2>Chapter 2. Common Customizations</h2>
               <div class="abstract">
                  <p>Some typical problems are independant from their target
                     formats. This chapter gives you some information what falls into
                     this category.
                  </p>
               </div>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.common.intro">2.1. Introduction</a></span></li>
                  <li><span><a href="#dbc.common.fonts">2.2. Finding Professional Fonts</a></span></li>
                  <li><span><a href="#dbc.common.dbcustomize">2.3. Writing Customization Layers</a></span></li>
                  <li><span><a href="#dbc.common.dbtimestamp">2.4. Inserting Date and Time</a></span></li>
                  <li><span><a href="#dbc.common.l10n">2.5. Extending Language Files with Your Own Text</a></span></li>
               </ul>
            </div>
            <section id="dbc.common.intro" class="section">
               <div class="section-titlepage">
                  <h3>2.1. Introduction</h3>
               </div>
               <p>A lot of customizations can be shared between different output
                  formats. As such, it is probably a good idea to think about how to
                  structure and store your customizations before starting. The
                  following directories are a good start, especially if you want to
                  support different output formats:
               </p>
               <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>mycustomizations/
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  +-- common/
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  +-- fo/
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  +-- html/
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  +-- futher formats...</pre></div>
               <p>The <code class="filename">common</code> directory
                  contains all the stylesheets which are not specific to any
                  formats. On the contrary, <code class="filename">fo</code>, <code class="filename">html</code>,
                  etc. contains the respective customizations for their target
                  formats. 
               </p>
               <p>Furthermore, it is recommended to use the same file name than
                  the original from the DocBook XSL stylesheets. This makes it
                  easier to see, what changes can be expected within your files.
               </p>
            </section>
            <section id="dbc.common.fonts" class="section">
               <div class="section-titlepage">
                  <h3>2.2. Finding Professional Fonts<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.common.fonts.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need to find professional fonts, preferebly released under
                     an open source license which can be used for print or Web formats.
                  </p>
               </section>
               <section id="dbc.common.fonts.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>There are some very good fonts which can be used freely. Most
                     fonts are even released under the <a href="http://scripts.sil.org/OFL">Open Font License</a>
                     or other free or open licenses. The following list is a small
                     overview which is by no means complete (use also your favorite
                     search enginge):
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><a href="http://scripts.sil.org">http://scripts.sil.org</a></span></dt>
                        <dd>
                           <p><span title="Summer Institute of&#xA;            Linguistics" class="acronym">SIL</span> is a nonprofit organization for
                              sustainable language development. One part is to “<span class="quote">support 
                                 the use of non-Roman and complex scripts in language development.</span>”
                              <span class="acronym">SIL</span> creates the Charis SIL, Doulos SIL,
                              Gentium, Andika, and other typefaces. All fonts are released
                              under the 
                              
                           </p>
                        </dd>
                        <dt><span class="term"><a href="http://www.google.com/webfonts">http://www.google.com/webfonts</a></span></dt>
                        <dd>
                           <p>Google Web Fonts is a huge collection of open source
                              fonts. They can be freely incorporated into your Web sites
                              using CSS or can be downloaded and embedded in PDF.
                           </p>
                        </dd>
                        <dt><span class="term"><a href="http://www.tug.org/tetex/">http://www.tug.org/tetex/</a></span></dt>
                        <dd>
                           <p>The TeTeX distribution and <span title="Comprehensive &#xA;            TeX Archive Network" class="acronym">CTAN</span> contains also some high quality
                              fonts, however, more aimed at the print business and not for
                              the Web.
                           </p>
                        </dd>
                        <dt><span class="term"><a href="http://www.linuxlibertine.org">http://www.linuxlibertine.org</a></span></dt>
                        <dd>
                           <p>The Linux Libertine fonts are designed to be an
                              alternative to the serif Times fonts.  
                              The Linux Libertine and the Linux Biolinum fonts are a
                              collection of serif and sans serif fonts with the usual
                              Latin, Greek, Cyrillic, and Hebrew glyphs. Additionally, the fonts
                              contain ligatures, true small caps, old style numbers,
                              proportional or monospaced numbers, true superscript and
                              subscript, and much more.
                           </p>
                        </dd>
                        <dt><span class="term"><a href="http://dejavu-fonts.org">http://dejavu-fonts.org</a></span></dt>
                        <dd>
                           <p>
                              <div class="remark">TBD</div>
                           </p>
                        </dd>
                        <dt><span class="term"><a href="http://www.stixfonts.org">http://www.stixfonts.org</a></span></dt>
                        <dd>
                           <p>
                              <div class="remark">TBD</div>
                           </p>
                        </dd>
                     </dl>
                  </div>
               </section>
               <section id="dbc.common.fonts.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>Before you use a font, check the following list:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <div class="formalpara">
                              <p><b>Amount of Glyphs</b>  Does your font support your language? Although modern
                                 fonts use Unicode thesedays, nevertheless your language
                                 might be not supported. Especially if you need
                                 “<span class="quote">uncommon</span>” languages or rarely used glyphs.
                                 
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Missing Styles</b>  Some fonts are published in only one style, usually
                                 <em>regular</em>. Such fonts makes it more difficult
                                 to universally adopt them in different scenarios where more
                                 styles (bold, italic, or a combination) are needed.
                                 
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Font Formats</b>  Modern fonts are usually Unicode fonts in <span title="OpenType Font" class="acronym">OTF</span> or TrueType format. Older fonts are
                                 mostly PostScript Type 1 fonts which have a limited amount
                                 of glphys (theoretically 256). PostScript fonts cannot be used on the
                                 Web.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Font Combinations</b>  For a non-designer, it is generally easier to use a
                                 complete font family conisting of sans serif, serif and
                                 monospaced typefaces. The reason for this is these typefaces
                                 are made to fit together. It is much more difficult to
                                 select fonts which work aesthetically as it needs
                                 experiences.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Quality</b>  This is a broad topic and it depends where you want to
                                 use the font. Is it primarily used for Web content or only
                                 for print? Or both? Some fonts looks only good in a Web
                                 page, other work only for a book. Sometimes the
                                 <em>Hinting</em> (adjustment of a font to a
                                 certain resolution) may or may not work.
                                 
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
            <section id="dbc.common.dbcustomize" class="section">
               <div class="section-titlepage">
                  <h3>2.3. Writing Customization Layers<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.common.dbcustomize.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to write a customization layer for the DocBook XSL
                     stylesheets, but you do not know how to do it.
                  </p>
               </section>
               <section id="dbc.common.dbcustomize.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>A DocBook XSL customization layer comprised the following
                     components:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>A XSLT stylesheet skeletton with the start tag <code class="tag-starttag">&lt;xsl:stylesheet&gt;</code> and the end tag
                              <code class="tag-endtag">&lt;/xsl:stylesheet&gt;</code></p>
                        </li>
                        <li>
                           <p>At least the namespaces for XSLT, DocBook 5, and your
                              output format (for example, FO or XHTML).
                           </p>
                        </li>
                        <li>
                           <p>A <code class="tag-emptytag">&lt;xsl:import/&gt;</code> element to 
                              incoporate the base format.
                           </p>
                        </li>
                        <li>
                           <p>Your customizations.</p>
                        </li>
                     </ul>
                  </div>
                  <p>How this can look is shown in the following listing.</p>
                  <figure id="ex.common.dbcustomize.general-cust-layer" class="example-wrapper">
                     <div class="title">Example 2.1. General Customization Layer</div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="http://docbook.sourceforge.net/release/xsl-ns/current/<em class="replaceable"><code>FORMAT</code></em>/docbook.xsl"/&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Your customizations go here --&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.common.dbcustomize.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>
                     <div class="remark">TBD</div>
                  </p>
               </section>
               <section id="dbc.common.dbcustomize.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p><a href="http://www.sagehill.net/docbookxsl/CustomMethods.html#CustomizationLayer">http://www.sagehill.net/docbookxsl/CustomMethods.html#CustomizationLayer</a></p>
               </section>
            </section>
            <section id="dbc.common.dbtimestamp" class="section">
               <div class="section-titlepage">
                  <h3>2.4. Inserting Date and Time<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.common.dbtimestamp.2" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to insert the current date, time, or both in your
                     output format (for example, to show the date of creation).
                  </p>
               </section>
               <section id="dbc.common.dbtimestamp.3" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Use the <code class="tag-xmlpi">&lt;?dbtimestamp?&gt;</code> processing
                     instruction (PI). For example, integrate it into the
                     <code class="tag-element">pubdate</code> to show the current publication date on the
                     titlepage: 
                  </p>
                  <div class="screen"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;info&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;!-- ... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;pubdate&gt;<strong class="emphasis">&lt;?dbtimestamp?&gt;</strong>&lt;/pubdate&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>&lt;/info&gt;</pre></div>
               </section>
               <section id="dbc.common.dbtimestamp.4" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The above PI includes the date in its
                     <em>localized</em> form, or in other words: the
                     output depends on the current language. If you do not have set any
                     language, the default is English (<code class="code">en_US</code>) which is 
                     <code class="code">month/day/year</code>. If you want to
                     change the default format, use one of the two options: 
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>Change the default format</p>
                        </li>
                        <li>
                           <p>Add pseudo-attributes</p>
                        </li>
                     </ul>
                  </div>
                  <section id="dbc.common.dbtimestamp.default-format" class="section">
                     <div class="section-titlepage">
                        <h5>Changing the Default Format</h5>
                     </div>
                     <p>Each language contains in its language files
                        <div class="remark">add
                           xref
                        </div> the context <code class="code">datetime</code>. The following
                        code shows it for the English language file:
                     </p>
                     <div class="screen"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;l:context name="datetime"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;l:template name="format" text="m/d/Y"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/l:context&gt;</pre></div>
                     <p>This is only useful, if you want to completely change the appearance of
                        a date in your document. 
                     </p>
                  </section>
                  <section id="dbc.common.dbtimestamp.pseudo-attrib" class="section">
                     <div class="section-titlepage">
                        <h5>Adding Pseudo-Attributes</h5>
                     </div>
                     <p>The simpler method is to change the PI directly. Especially
                        if you do not want to customize the date for the complete
                        document or you want it change individually. Basically, add a
                        <em>pseudo-attribute</em><sup class="footnote"><span class="osq">[</span><a name="dbc.common.dbtimestamp.pseudo-attrib.2.2"
                              href="#ftn.dbc.common.dbtimestamp.pseudo-attrib.2.2">6</a><span class="csq">]</span></sup> into the <code class="tag-xmlpi">&lt;?dbtimestamp?&gt;</code> PI.
                        For example, if you want to insert only the year, add the <code class="tag-attribute">format</code> pseudo-attribute: 
                     </p>
                     <div class="screen"><pre class="xml">&lt;?dbtimestamp format="Y"?&gt;</pre></div>
                     <p>More format-letters can be found in the reference page (see
                        link at the <em class="citetitle">See Also</em> section).
                     </p>
                  </section>
               </section>
               <section id="dbc.common.dbtimestamp.5" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><a href="http://www.sagehill.net/docbookxsl/Datetime.html">http://www.sagehill.net/docbookxsl/Datetime.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://docbook.sourceforge.net/release/xsl/current/doc/pi/dbtimestamp.html">http://docbook.sourceforge.net/release/xsl/current/doc/pi/dbtimestamp.html</a>,
                              the reference page for the PI
                           </p>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
            <section id="dbc.common.l10n" class="section">
               <div class="section-titlepage">
                  <h3>2.5. Extending Language Files with Your Own Text<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.common.l10n.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need a general solution to add localized text without
                     hard-coding it into your stylesheet. Depending on the language, it
                     should display the correct, translated text.
                  </p>
               </section>
               <section id="dbc.common.l10n.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Use <em>language files</em> to add your text.
                     Language files are the DocBook way to support several languages,
                     all located under the <code class="filename">common</code> directory. Each file is in XML format and
                     contains all your translated text as a key/value pair. For more
                     complex settings and to group things, there are
                     <em>contexts</em>. The key is never translated, it
                     is used for every language, and is only needed to find and
                     retrieve the translated text. 
                  </p>
                  <p>To use a language file, proceed as follows:</p>
                  <figure id="dbc.common.l10n.4.4" class="procedure-wrapper">
                     <div class="title">Adding Your Own Localized Text</div>
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Create a customization layer as shown in <a href="#dbc.common.dbcustomize">Section 2.3, “Writing Customization Layers”</a>.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Add the parameter <em class="parameter"><code>local.l10n.xml</code></em> in
                                    your customization layer and point it to your language
                                    file:
                                 </p>
                                 <div class="screen"><pre>&lt;xsl:param name="local.l10n.xml" select="document('myl10n.xml')"/&gt;</pre></div>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Open the <code class="filename">myl10n.xml</code> file and insert
                                    the following XML code as an example:
                                 </p>
                                 <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;l:i18n xmlns:l="http://docbook.sourceforge.net/xmlns/l10n/1.0"&gt; 
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;l:l10n language="en"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;l:gentext key="Authors" text="Authors"/&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;l:gentext key="lastbuilt" text="Last built: "/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/l:l10n&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;l:l10n language="de"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;l:gentext key="Authors" text="Authoren"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>    &lt;l:gentext key="lastbuilt" text="Zuletzt gebaut: "/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/l:l10n&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>&lt;/l:i18n&gt;</pre></div>
                                 <p>The above code shows two language, English and German.
                                    Furthermore, it contains text two entries for each language
                                    (“<span class="quote">Authors</span>” and
                                    “<span class="quote">lastbuilt</span>”).
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Call the <code class="function">gentext</code> template to retrieve
                                    the translated text:
                                 </p>
                                 <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:call-template name="gentext"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:with-param name="key" select="'Authors'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:call-template&gt;</pre></div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
               </section>
               <section id="dbc.common.l10n.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The “<span class="quote">gentext</span>” method to insert language specific
                     text is quite powerful, but not almighty. It helps you to keep
                     translateable text in one place and avoids hard-coded locations in
                     your stylesheets. If you need the translated text not for the
                     default language (usually marked in the root element), but for a
                     different language, use the <code class="tag-element">xsl:with-param</code> as
                     shown:
                  </p>
                  <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:call-template name="gentext"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:with-param name="key" select="'Authors'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:with-param name="lang"&gt;de&lt;/xsl:with-param&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>&lt;/xsl:call-template&gt;</pre></div>
               </section>
               <section id="dbc.common.l10n.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p><a href="http://www.sagehill.net/docbookxsl/Localizations.html">http://www.sagehill.net/docbookxsl/Localizations.html</a></p>
               </section>
            </section>
            <div class="footnotes">
               <hr width="100" align="left" class="footnotes-divider" />
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.common.dbtimestamp.pseudo-attrib.2.2"
                           name="ftn.dbc.common.dbtimestamp.pseudo-attrib.2.2">6</a><span class="csq">]</span></sup>A <em>pseudo-attribute</em> looks like an
                     XML attribute due to its similar syntax. However, it is not.
                     A processing instruction can only contain text and no
                     attributes. For more information about PIs, refer to the XML
                     specification at <a href="http://www.w3.org/TR/REC-xml/#sec-pi">http://www.w3.org/TR/REC-xml/#sec-pi</a>.
                  </p>
               </div>
            </div>
         </article>
         <article id="dbc.structure" class="chapter">
            <header class="chapter-titlepage">
               <h2>Chapter 3. Manipulating DocBook Document Structure</h2>
               <div class="abstract">
                  <p>DocBook files can be created manually or by tools.
                     Sometimes tools create a structure which is inconvenient for
                     some reasons or you have legacy documents which contain the
                     “<span class="quote">wrong</span>” structure. This chapter shows how to
                     restructure your DocBook document in the way you want.
                  </p>
               </div>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.structure.intro">3.1. Introduction</a></span></li>
                  <li><span><a href="#dbc.struct.pretty-print">3.2. Pretty-Printing DocBook Documents</a></span></li>
                  <li><span><a href="#dbc.structure.db4-to-db5">3.3. Converting DocBook from Version 4 to Version 5</a></span></li>
                  <li><span><a href="#dbc.structure.db5-to-db4">3.4. Converting DocBook from Version 5 to Version 4</a></span></li>
                  <li><span><a href="#dbc.structure.splitdb">3.5. Splitting DocBook Documents</a></span></li>
                  <li><span><a href="#dbc.structure.extract">3.6. Extracting One Element from DocBook Document</a></span></li>
                  <li><span><a href="#dbc.structure.sectX-to-section">3.7. Transforming <code class="tag-element">sectX</code> Elements into <code class="tag-element">section</code> Elements</a></span></li>
                  <li><span><a href="#dbc.structure.section-to-sectX">3.8. Transforming <code class="tag-element">section</code> Elements into <code class="tag-element">sectX</code> Elements</a></span></li>
                  <li><span><a href="#dbc.structure.bridgehead-to-section">3.9. Transforming <code class="tag-element">bridgehead</code> Elements into <code class="tag-element">section</code> Elements</a></span></li>
                  <li><span><a href="#dbc.structure.remove-blocks-in-para">3.10. Moving Block Elements Outside of Paragraphs</a></span></li>
                  <li><span><a href="#dbc.structure.adding-indexterms">3.11. Adding Index Entries (Semi-)Automatically</a></span></li>
                  <li><span><a href="#dbc.structure.revision-list">3.12. Including Revision Information from Version Control Systems</a></span></li>
               </ul>
            </div>
            <section id="dbc.structure.intro" class="section">
               <div class="section-titlepage">
                  <h3>3.1. Introduction</h3>
               </div>
               <p>The methods described in this chapter are mostly XSLT
                  solutions where you can find more or less in any XSLT book.
                  Actually, some ideas origin from
                  <span class="personname"><span class="firstname">Sal</span> <span class="surname">Mangano</span></span>´s excellent
                  <em class="citetitle">XSLT Cookbook</em>. However, the solutions in
                  this chapter are targeted exclusively on DocBook.
               </p>
               <p>Most of these solutions are based on an <em>identity
                     transformation</em> stylesheet which is shown in <a href="#ex.copy.xsl">Example 3.1, “<code class="filename">copy.xsl</code>”</a>.
               </p>
               <figure id="ex.copy.xsl" class="example-wrapper">
                  <div class="title">Example 3.1. <code class="filename">copy.xsl</code></div>
                  <div class="example">
                     <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="node() | @*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:copy&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@* | node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:copy&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                  </div>
               </figure>
               <p>This simple stylesheet copies everything from the input
                  document to the output document without any modifications.
                  Although it seems quite useless at a first glance, it reveals its
                  full power when combining it with customizations. 
               </p>
            </section>
            <section id="dbc.struct.pretty-print" class="section">
               <div class="section-titlepage">
                  <h3>3.2. Pretty-Printing DocBook Documents<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.struct.pretty-print.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>Your file, be it autogenerated or somehow
                     “<span class="quote">mangled</span>” is poorly indented and you want to 
                     get rid of this. 
                  </p>
               </section>
               <section id="dbc.struct.pretty-print.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>There are different solutions to this problem:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>a “<span class="quote">pretty-print</span>” stylesheet
                           </p>
                        </li>
                        <li>
                           <p>the XML parser <strong class="command">xmllint</strong></p>
                        </li>
                        <li>
                           <p>the <strong class="command">xmlformat</strong> command
                           </p>
                        </li>
                     </ul>
                  </div>
                  <section id="sec.struct.pretty-print.xmllint" class="section">
                     <div class="section-titlepage">
                        <h5>XML Parser <strong class="command">xmllint</strong></h5>
                     </div>
                     <p>The XML parser <strong class="command">xmllint</strong> offers the
                        <code class="option">--format</code> option to turn on indentation for each element.
                     </p>
                     <div class="screen"><pre><strong class="command">xmllint</strong> --format <em class="replaceable"><code>XMLFILE</code></em></pre></div>
                  </section>
                  <section id="sec.struct.pretty-print.xslt" class="section">
                     <div class="section-titlepage">
                        <h5>The Pretty-Print Stylesheet</h5>
                     </div>
                     <p>The simplest stylesheet for indentation is shown in <a href="#ex.pretty.xsl">Example 3.2, “<code class="filename">pretty.xsl</code>”</a>.
                        It relies on the <code class="filename">copy.xsl</code> stylesheet.
                     </p>
                     <figure id="ex.pretty.xsl" class="example-wrapper">
                        <div class="title">Example 3.2. <code class="filename">pretty.xsl</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output indent="yes"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:strip-space elements="*"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:preserve-space elements="d:screen d:literallayout
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    d:programlisting d:address"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                        </div>
                     </figure>
                  </section>
                  <section id="sec.struct.pretty-print.xmlformat" class="section">
                     <div class="section-titlepage">
                        <h5>Command <strong class="command">xmlformat</strong></h5>
                     </div>
                     <p>The <strong class="command">xmlformat</strong> tool is a Perl script which
                        is available from the Web site <a href="http://www.kitebird.com/software/xmlformat/">http://www.kitebird.com/software/xmlformat/</a>. 
                        
                     </p>
                     <p>The tool distinguishes between block elements, inline
                        elements, and verbatim elements (similar to DocBook).
                        The difference between the types is the whitespace
                        normalization.
                     </p>
                     <p>Block elements typically begin with a new line and
                        children are indented. Spacing before and after can be
                        controlled too. 
                     </p>
                     <p>Inline elements occur in block elements. Normalization and 
                        line-wrapping occurs in regard to the enclosing block element.
                     </p>
                     <p>Verbatim elements are not formatted at all. That means, the
                        content of the input element is the same as the content of the
                        output element, including whitespaces.
                        
                     </p>
                  </section>
               </section>
               <section id="dbc.struct.pretty-print.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The <strong class="command">xmllint</strong> command with its
                     <code class="option">--format</code> option is the easiest candidate but lacks
                     customization. This is useful if you do not have any other tools
                     at hand and you prefer a quick and rough reformatting.
                  </p>
                  <p>The <code class="filename">pretty.xsl</code> stylesheet is a pure XSLT
                     solution. As such, it works on every platform which supports an
                     XSLT processor. It is adaptable to your needs, but mixed content
                     (like in <code class="tag-element">para</code>) is problematic.
                  </p>
                  <p>The most adaptable method is <strong class="command">xmlformat</strong>.
                  </p>
               </section>
            </section>
            <section id="dbc.structure.db4-to-db5" class="section">
               <div class="section-titlepage">
                  <h3>3.3. Converting DocBook from Version 4 to Version 5<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.structure.db4-to-db5.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have a DocBook document in version 4.x, but you need 5.x.</p>
               </section>
               <section id="dbc.structure.db4-to-db5.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Generally, the difference between version 4 and version 5 is
                     minimal. Refer to the <a href="http://www.docbook.org/tdg51/en/html/ch01.html#d6e550">The
                        Definitive Guide</a> for detailed information what has been
                     added, removed, or renamed.
                     
                  </p>
                  <p>One major change is that all DocBook 5.x elements are in the
                     namespace <code class="uri">http://docbook.org/ns/docbook</code>. All these
                     changes are taken into account by the
                     <code class="filename">db4-upgrade.xsl</code> stylesheet in the DocBook
                     Subversion repository. The URL is <a href="https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/docbook/relaxng/tools/db4-upgrade.xsl">https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/docbook/relaxng/tools/db4-upgrade.xsl</a>. You just need to apply this stylesheet to your source DocBook
                     document, for example:
                  </p>
                  <div class="screen"><pre><strong class="command">xsltproc</strong> doc.xml db4-upgrade.xsl</pre></div>
               </section>
               <section id="dbc.structure.db4-to-db5.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>One disadvantage is that entities are not preserved. This is
                     not a stylesheet issue as the entities are already resolved when
                     the XSLT processor gets its hand on the source tree. The
                     stylesheet never sees the entities.
                     
                  </p>
                  <p>The <em class="citetitle"><a href="http://docbook.org/docs/howto/#entities">DocBook
                           Transition Guide</a></em> recommends the following steps (cited
                     from there):
                  </p>
                  <figure id="pr.structure.db4-to-db5.preserving-entities" class="procedure-wrapper">
                     <div class="title">Preserving Entities between DocBook Conversion</div>
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Open your existing document using your favorite editing
                                    tool. You must use a tool that is <em>not</em>
                                    XML-aware, or one that allows you to edit markup “<span class="quote">in
                                       the raw</span>”.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Replace all occurrences of the entity references that you
                                    want to preserve with some unique string. For example, if you
                                    want to preserve <code class="tag-genentity">&amp;Product;</code>
                                    references, you could replace them all with
                                    <code class="literal">[[[Product]]]</code> (assuming that the string
                                    <code class="literal">[[[Product]]]</code> doesn't occur anywhere else
                                    in your document).
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Copy the document type declaration of your document
                                    and save it some place. The document type declaration is
                                    everything from “&lt;!DOCTYPE” to the closing “]&gt;”. 
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Perform the conversion with the
                                    <code class="filename">db4-upgrade.xsl</code> stylesheet.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Open the new document using your favorite editing tool.
                                    Replace all occurrences of the unique string you used to save
                                    the entity references with the corresponding entity
                                    references.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Paste the document type declaration that you saved onto
                                    the top of your new document.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Remove the external identifier (the PUBLIC and/or SYSTEM
                                    keywords) from the document type declaration. A document that
                                    begins with:
                                 </p>
                                 <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE book [
<span class="linenumber">  2</span><span class="linenumber-separator"> </span> &lt;!ENTITY someEntity "some replacement text"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>]&gt;</pre></div>
                                 <p>is perfectly well-formed. If you don't remove the
                                    references to the DTD, then your parser will likely try to
                                    validate against DocBook V4.0 and that's not going to work.
                                    Alternatively, you could refer to the DocBook V5.0 DTD.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.db4-to-db5.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p>Further information can be found in <a href="http://docbook.org/docs/howto/#convert4to5">http://docbook.org/docs/howto/#convert4to5</a>.
                  </p>
               </section>
            </section>
            <section id="dbc.structure.db5-to-db4" class="section">
               <div class="section-titlepage">
                  <h3>3.4. Converting DocBook from Version 5 to Version 4<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.structure.db5-to-db4.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have a DocBook document in version 5.x, but you need 4.x.</p>
               </section>
               <section id="dbc.structure.db5-to-db4.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Generally, the difference between version 4 and version 5 are
                     minimal. Refer to the <a href="http://www.docbook.org/tdg51/en/html/ch01.html#d6e550">The
                        Definitive Guide</a> for detailed information what has been
                     added, removed, or renamed.
                  </p>
                  <p>In case you have or get DocBook 5 and need the former
                     version, the following stylesheet which supports the
                     core transformation might help:
                  </p>
                  <figure id="ex.db5to4-core.xsl" class="example-wrapper">
                     <div class="title">Example 3.3. <code class="filename">db5to4-core.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xi="http://www.w3.org/2001/XInclude"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  xmlns:xlink="http://www.w3.org/1999/xlink"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:html="http://www.w3.org/1999/xhtml"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns:exsl="http://exslt.org/common"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  exclude-result-prefixes="d xi xlink exsl html"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output method="xml" indent="yes" 
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    doctype-public="-//OASIS//DTD DocBook XML V4.5//EN"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    doctype-system="http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>  &lt;xsl:strip-space elements="*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:preserve-space 
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>    elements="d:screen d:programlisting d:literallayout xi:*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:variable name="inlines"&gt;abbrev accel acronym alt anchor
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>    annotation application author biblioref citation citebiblioid
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    citerefentry citetitle classname code command computeroutput
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>    constant coref database date editor email emphasis envar errorcode
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    errorname errortext errortype exceptionname filename firstterm
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>    footnote footnoteref foreignphrase function glossterm guibutton
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    guiicon guilabel guimenu guimenuitem guisubmenu hardware indexterm
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>    initializer inlineequation inlinemediaobject interfacename jobtitle
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    keycap keycode keycombo keysym link literal markup menuchoice
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    methodname modifier mousebutton nonterminal olink ooclass
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    ooexception oointerface option optional org orgname package
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>    parameter person personname phrase productname productnumber prompt
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    property quote remark replaceable returnvalue shortcut subscript
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>    superscript symbol systemitem tag termdef token trademark type uri
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    userinput varname wordasword xref&lt;/xsl:variable&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Overwrite standard template and create elements without 
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>       a namespace node
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  --&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:element name="{local-name()}"&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="@xml:id|@xml:lang"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:attribute name="{local-name()}"&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:attribute&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>  &lt;!-- Suppress the following attributes: --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="@annotations|@version"/&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="@xlink:*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="@xlink:href"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="contains($inlines, local-name(..))"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;ulink url="{.}" remap="{local-name(..)}"&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select=".."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/ulink&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>        &lt;xsl:message&gt;@xlink:href could not be processed!
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  parent element: &lt;xsl:value-of select="local-name(..)"/&gt;
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>        &lt;/xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:*[@xlink:href]"&gt;
<span class="linenumber"> 70</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="contains($inlines, local-name())"&gt;
<span class="linenumber"> 72</span><span class="linenumber-separator"> </span>        &lt;ulink url="{@xlink:href}" remap="{local-name(.)}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:element name="{local-name()}"&gt;
<span class="linenumber"> 74</span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              select="@*[local-name() != 'href' and
<span class="linenumber"> 76</span><span class="linenumber-separator"> </span>                         namespace-uri() != 'http://www.w3.org/1999/xlink']
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |node()"/&gt;
<span class="linenumber"> 78</span><span class="linenumber-separator"> </span>          &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/ulink&gt;
<span class="linenumber"> 80</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber"> 82</span><span class="linenumber-separator"> </span>        &lt;xsl:element name="{local-name()}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates 
<span class="linenumber"> 84</span><span class="linenumber-separator"> </span>            select="@*[local-name() != 'href' and
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                       namespace-uri() != 'http://www.w3.org/1999/xlink']
<span class="linenumber"> 86</span><span class="linenumber-separator"> </span>                    |node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:element&gt;
<span class="linenumber"> 88</span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber"> 90</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 92</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:link/@xlink:href"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:attribute name="url"&gt;
<span class="linenumber"> 94</span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:attribute&gt;
<span class="linenumber"> 96</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 98</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:link[@xlink:href]"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;ulink&gt;
<span class="linenumber">100</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/ulink&gt;
<span class="linenumber">102</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">104</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:link[@linkend]"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;link&gt;
<span class="linenumber">106</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/link&gt;
<span class="linenumber">108</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">110</span><span class="linenumber-separator"> </span>  &lt;!-- Renamed DocBook elements --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:personblurb"&gt;
<span class="linenumber">112</span><span class="linenumber-separator"> </span>    &lt;authorblurb&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber">114</span><span class="linenumber-separator"> </span>    &lt;/authorblurb&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">116</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:tag"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;sgmltag&gt;
<span class="linenumber">118</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/sgmltag&gt;
<span class="linenumber">120</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">122</span><span class="linenumber-separator"> </span>  &lt;!-- New DocBook v5.1 and HTML elements, no mapping available --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:acknowledgements|d:annotation|d:arc
<span class="linenumber">124</span><span class="linenumber-separator"> </span>                       |d:cover
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                       |d:definitions
<span class="linenumber">126</span><span class="linenumber-separator"> </span>                       |d:extendedlink
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                       |d:givenname
<span class="linenumber">128</span><span class="linenumber-separator"> </span>                       |d:locator
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                       |d:org|d:tocdiv
<span class="linenumber">130</span><span class="linenumber-separator"> </span>                       |html:*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:message&gt;Don't know how to transfer "&lt;xsl:value-of
<span class="linenumber">132</span><span class="linenumber-separator"> </span>      select="local-name()"/&gt;" element into DocBook 4&lt;/xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">134</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>Use your favorite XSLT processor to transform your documents.</p>
               </section>
               <section id="dbc.structure.db5-to-db4.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The stylesheet from <a href="#ex.db5to4-core.xsl">Example 3.3, “<code class="filename">db5to4-core.xsl</code>”</a> imports
                     the templates from <code class="filename">copy.xsl</code> using an
                     <em>identity transformation</em>. That means, whatever
                     is <em>not</em> specified gets copied. In most cases
                     that is what you want—a DocBook 5 <code class="tag-element">section</code> element
                     will be transformed into an equally named DocBook 4 
                     <code class="tag-element">section</code> element without the namespace.
                     
                  </p>
                  <p>Where it gets difficult are the new elements which are
                     introduced in DocBook 5. Whenever the stylesheet encounters
                     those it will print a warning. These elements are not copied to
                     the output stream. If you have one of those elements you need to
                     customize the stylesheet yourself.
                  </p>
                  <p>Another issue is the almost ubiquitary <code class="tag-element">info</code>
                     element which can appear in structual and block elements. The
                     above stylesheet does it wrong and copies any <code class="tag-element">info</code>
                     element straight into the output stream. However, DocBook 4
                     has different element names for meta information in
                     DocBook 5. If you have <code class="tag-element">info</code> elements in your 
                     document they have to be renamed, depending on the parent element:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <div class="formalpara">
                              <p><b>Meta Information Inside Structural Elements</b>  An <code class="tag-element">info</code> element inside a <code class="tag-element">sect1</code>
                                 appends the suffix <code class="literal">info</code> to the name of
                                 its parent element and is renamed therefore as
                                 <code class="tag-element">sect1info</code>. This rule is applied for structural
                                 elements like <code class="tag-element">book</code>, <code class="tag-element">chapter</code>, and
                                 others.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Meta Information Inside Block Elements</b>  An <code class="tag-element">info</code> element inside an <code class="tag-element">example</code>
                                 is renamed as <code class="tag-element">blockinfo</code>. This rule is applied for
                                 block elements like <code class="tag-element">equation</code>, <code class="tag-element">figure</code>,
                                 and others.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <p>Apart from the renaming, the order of the renamed <code class="tag-element">info</code>
                     element is crucial. Consider the following DocBook 5
                     structure:
                  </p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>section
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  title
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  info</pre></div>
                  <p>This structure has to be renamed and reorganized as
                     follows:
                  </p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>section
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  sectioninfo
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  title</pre></div>
                  <p>As you can see, the <code class="tag-element">title</code> element appears now
                     <em>after</em> the renamed <code class="tag-element">info</code>. All
                     these issues are solved with the following additional
                     stylesheet:
                  </p>
                  <figure id="ex.db5to4-info.xsl" class="example-wrapper">
                     <div class="title">Example 3.4. <code class="filename">db5to4-info.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xlink="http://www.w3.org/1999/xlink"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  xmlns:exsl="http://exslt.org/common"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  exclude-result-prefixes="d xlink exsl"&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Structural elements using info --&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:appendix[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:article[d:info]
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>                      |d:bibliography[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:book[d:info]
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>                      |d:chapter[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:colophon[d:info]
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>                      |d:equation[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:glossary[d:info]
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>                      |d:index[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:legalnotice[d:info]
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>                      |d:part[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:partintro[d:info]
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>                      |d:preface[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:reference[d:info]
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>                      |d:refsect1[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:refsect2[d:info]
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>                      |d:refsect3[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:refsection[d:info]
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>                      |d:refsynopsisdiv[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:sect1[d:info]
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>                      |d:sect2[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:sect3[d:info]
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>                      |d:sect4[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:sect5[d:info]
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>                      |d:section[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:set[d:info]
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>                      |d:setindex[d:info]"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;!-- Change order of info and title  --&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>    &lt;xsl:element name="{local-name()}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*"/&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:title/preceding-sibling::processing-instruction()
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                                   |d:title/preceding-sibling::comment()"/&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:info"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:title"/&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>      &lt;!-- Process the rest --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:info/following-sibling::node()"/&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Block elements using info --&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:bibliolist[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:blockquote[d:info]
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>                      |d:equation[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:example[d:info]
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>                      |d:figure[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:glosslist[d:info]
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>                      |d:informalequation[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:informalexample[d:info]
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>                      |d:informalfigure[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:informaltable[d:info]
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>                      |d:itemizedlist[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:legalnotice[d:info]
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>                      |d:msgset[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:orderedlist[d:info]
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>                      |d:procedure[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:qandadiv[d:info]
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>                      |d:qandaentry[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:qandaset[d:info]
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>                      |d:table[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:task[d:info]
<span class="linenumber"> 70</span><span class="linenumber-separator"> </span>                      |d:taskprerequisites[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:taskrelated[d:info]
<span class="linenumber"> 72</span><span class="linenumber-separator"> </span>                      |d:tasksummary[d:info]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      |d:variablelist[d:info]"&gt;
<span class="linenumber"> 74</span><span class="linenumber-separator"> </span>    &lt;xsl:element name="{local-name()}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*"/&gt;
<span class="linenumber"> 76</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:title/preceding-sibling::processing-instruction()
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                                   |d:title/preceding-sibling::comment()"/&gt;
<span class="linenumber"> 78</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:info"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="infoname"&gt;block&lt;/xsl:with-param&gt;
<span class="linenumber"> 80</span><span class="linenumber-separator"> </span>      &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:title|
<span class="linenumber"> 82</span><span class="linenumber-separator"> </span>                                   d:title/following-sibling::processing-instruction()[1]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                                   |d:title/following-sibling::comment()[1]"/&gt;
<span class="linenumber"> 84</span><span class="linenumber-separator"> </span>      
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;!-- Process the rest --&gt;
<span class="linenumber"> 86</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:info/following-sibling::node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber"> 88</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 90</span><span class="linenumber-separator"> </span>  &lt;!-- Suppress other info elements who has no direct mapping --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:*[d:info]"/&gt;
<span class="linenumber"> 92</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:info"&gt;
<span class="linenumber"> 94</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="infoname" select="local-name(..)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="rtf-node"&gt;
<span class="linenumber"> 96</span><span class="linenumber-separator"> </span>      &lt;xsl:element name="{$infoname}info"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@*|node()"/&gt;
<span class="linenumber"> 98</span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:variable&gt;
<span class="linenumber">100</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="count(exsl:node-set($rtf-node)/*/*) &gt; 0"&gt;
<span class="linenumber">102</span><span class="linenumber-separator"> </span>        &lt;xsl:copy-of select="$rtf-node"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">104</span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;&lt;!-- Don't copy, it's empty --&gt;&lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">106</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>To combine both, use the following stylesheet:</p>
                  <figure id="ex.db5to4-withinfo.xsl" class="example-wrapper">
                     <div class="title">Example 3.5. <code class="filename">db5to4-withinfo.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="db5to4-core.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="db5to4-info.xsl"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output method="xml" indent="yes" 
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    doctype-public="-//OASIS//DTD DocBook XML V4.5//EN"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    doctype-system="http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>The above stylesheets were separated between a core
                     functionality (<code class="filename">db5to4-core.xsl</code>) with
                     additional <code class="tag-element">info</code> element handling
                     (<code class="filename">db5to4-info.xsl</code>). In most cases you will use
                     the stylesheet <code class="filename">db5to4-withinfo.xsl</code>, but if
                     you want to implement a different <code class="tag-element">info</code> handling you
                     can. In <a href="#ex.db5to4-withinfo.xsl">Example 3.5, “<code class="filename">db5to4-withinfo.xsl</code>”</a> just replace the 
                     line with importing <code class="filename">db5to4-info.xsl</code> with your
                     own implementation.      
                     
                  </p>
               </section>
            </section>
            <section id="dbc.structure.splitdb" class="section">
               <div class="section-titlepage">
                  <h3>3.5. Splitting DocBook Documents<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.structure.splitdb.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have a big DocBook document, like a book, and you want to
                     split each <code class="tag-element">chapter</code>, <code class="tag-element">appendix</code> etc. into a
                     separate file.
                  </p>
               </section>
               <section id="dbc.structure.splitdb.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>There are two solutions to this problems:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>Apply a XSLT stylesheet which uses an extension element
                              like <code class="function">exsl:document</code></p>
                        </li>
                        <li>
                           <p>Run the <strong class="command">dbautosplit</strong> command
                           </p>
                        </li>
                     </ul>
                  </div>
                  <section id="sec.structure.splitdb.xsl" class="section">
                     <div class="section-titlepage">
                        <h5>Splitting with XSLT</h5>
                     </div>
                     <p>The stylesheet in <a href="#ex.dbsplit.xsl">Example 3.6, “<code class="filename">dbsplit.xsl</code>”</a> uses 
                        extension elements to create separate documents from the main
                        output. It uses code from
                        <code class="filename">html/chunk-code.xsl</code>.
                     </p>
                     <figure id="ex.dbsplit.xsl" class="example-wrapper">
                        <div class="title">Example 3.6. <code class="filename">dbsplit.xsl</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>[
<span class="linenumber">  4</span><span class="linenumber-separator"> </span> &lt;!ENTITY db "http://docbook.sourceforge.net/release/xsl-ns/current"&gt; 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:exsl="http://exslt.org/common"
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  xmlns:xi="http://www.w3.org/2001/XInclude"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  extension-element-prefixes="exsl"&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="chunker.xsl"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output indent="yes"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="base.dir" select="'out/'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="use.id.as.filename" select="0"/&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="rootid"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="dbsplit.root.filename"&gt;Index&lt;/xsl:param&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="dbsplit.ext"&gt;.xml&lt;/xsl:param&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="dbsplit.chunk.depth" select="2"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="object.id"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="object" select="."/&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$object/@id"&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="$object/@id"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$object/@xml:id"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="$object/@xml:id"/&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="generate-id($object)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="*" mode="recursive-chunk-filename"&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="recursive" select="false()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="filename"&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>      &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;!-- if this is the root element, use the dbsplit.root.filename --&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="not(parent::*) and $dbsplit.root.filename != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.root.filename"/&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>        &lt;!-- Special case --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:when
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>          test="self::d:legalnotice and not($generate.legalnotice.link = 0)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:choose&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>            &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              test="(@id or @xml:id) and not($use.id.as.filename = 0)"&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>              &lt;!-- * if this legalnotice has an ID, then go ahead and use --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;!-- * just the value of that ID as the basename for the file --&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>              &lt;!-- * (that is, without prepending an "ln-" too it) --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="(@id|@xml:id)[1]"/&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:when&gt;
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>            &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;!-- * otherwise, if this legalnotice does not have an ID, --&gt;
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>              &lt;!-- * then we generate an ID... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:variable name="id"&gt;
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>                &lt;xsl:call-template name="object.id"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:variable&gt;
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>              &lt;!-- * ...and then we take that generated ID, prepend an --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;!-- * "ln-" to it, and use that as the basename for the file --&gt;
<span class="linenumber"> 70</span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="concat('ln-',$id,$dbsplit.ext)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:otherwise&gt;
<span class="linenumber"> 72</span><span class="linenumber-separator"> </span>          &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 74</span><span class="linenumber-separator"> </span>        &lt;!-- if there's no dbhtml filename, and if we're to use IDs as --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;!-- filenames, then use the ID to generate the filename. --&gt;
<span class="linenumber"> 76</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="(@id or @xml:id) and $use.id.as.filename != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="(@id|@xml:id)[1]"/&gt;
<span class="linenumber"> 78</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 80</span><span class="linenumber-separator"> </span>        &lt;xsl:otherwise/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:choose&gt;
<span class="linenumber"> 82</span><span class="linenumber-separator"> </span>    &lt;/xsl:variable&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 84</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="not($recursive) and $filename != ''"&gt;
<span class="linenumber"> 86</span><span class="linenumber-separator"> </span>        &lt;!-- if this chunk has an explicit name, use it --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="$filename"/&gt;
<span class="linenumber"> 88</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 90</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="$dbsplit.root.filename"/&gt;
<span class="linenumber"> 92</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber"> 94</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber"> 96</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:book"&gt;
<span class="linenumber"> 98</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;bk&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01"/&gt;
<span class="linenumber">100</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">102</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">104</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:article"&gt;
<span class="linenumber">106</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">108</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="parent::*"&gt;
<span class="linenumber">110</span><span class="linenumber-separator"> </span>            &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:apply-templates&gt;
<span class="linenumber">112</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">114</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;ar&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">116</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">118</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">120</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:preface"&gt;
<span class="linenumber">122</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">124</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="parent::*"&gt;
<span class="linenumber">126</span><span class="linenumber-separator"> </span>            &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:apply-templates&gt;
<span class="linenumber">128</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">130</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;pr&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">132</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">134</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">136</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:chapter"&gt;
<span class="linenumber">138</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">140</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="parent::*"&gt;
<span class="linenumber">142</span><span class="linenumber-separator"> </span>            &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:apply-templates&gt;
<span class="linenumber">144</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">146</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;ch&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">148</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">150</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">152</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:appendix"&gt;
<span class="linenumber">154</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">156</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="parent::*"&gt;
<span class="linenumber">158</span><span class="linenumber-separator"> </span>            &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:apply-templates&gt;
<span class="linenumber">160</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">162</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;ap&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="a" from="d:book"/&gt;
<span class="linenumber">164</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">166</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">168</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:part"&gt;
<span class="linenumber">170</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">172</span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">174</span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">176</span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">178</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">180</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;pt&lt;/xsl:text&gt;
<span class="linenumber">182</span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">184</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">186</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">188</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:reference"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">190</span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">192</span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">194</span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">196</span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">198</span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">200</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;rn&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">202</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">204</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">206</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:refentry"&gt;
<span class="linenumber">208</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="parent::d:reference"&gt;
<span class="linenumber">210</span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">212</span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">214</span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt;
<span class="linenumber">216</span><span class="linenumber-separator"> </span>            &lt;xsl:if test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">218</span><span class="linenumber-separator"> </span>              &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                select="parent::*"&gt;
<span class="linenumber">220</span><span class="linenumber-separator"> </span>                &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:apply-templates&gt;
<span class="linenumber">222</span><span class="linenumber-separator"> </span>            &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:otherwise&gt;
<span class="linenumber">224</span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">226</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;re&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">228</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">230</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">232</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:colophon"&gt;
<span class="linenumber">234</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">236</span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">238</span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">240</span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">242</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">244</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;co&lt;/xsl:text&gt;
<span class="linenumber">246</span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">248</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">250</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">252</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:sect1 or self::d:sect2 or self::d:sect3 or 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                      self::d:sect4 or self::d:sect5 or self::d:section"&gt;
<span class="linenumber">254</span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          select="parent::*"&gt;
<span class="linenumber">256</span><span class="linenumber-separator"> </span>          &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:apply-templates&gt;
<span class="linenumber">258</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;s&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number format="01"/&gt;
<span class="linenumber">260</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">262</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">264</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:bibliography"&gt;
<span class="linenumber">266</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">268</span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">270</span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">272</span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">274</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">276</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;bi&lt;/xsl:text&gt;
<span class="linenumber">278</span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">280</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">282</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">284</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:glossary"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">286</span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">288</span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">290</span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">292</span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">294</span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">296</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;go&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">298</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">300</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">302</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:index"&gt;
<span class="linenumber">304</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="/d:set"&gt;
<span class="linenumber">306</span><span class="linenumber-separator"> </span>            &lt;!-- in a set, make sure we inherit the right book info... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:apply-templates mode="recursive-chunk-filename"
<span class="linenumber">308</span><span class="linenumber-separator"> </span>              select="parent::*"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:with-param name="recursive" select="true()"/&gt;
<span class="linenumber">310</span><span class="linenumber-separator"> </span>            &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">312</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt; &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">314</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;ix&lt;/xsl:text&gt;
<span class="linenumber">316</span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:book"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">318</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">320</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">322</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="self::d:setindex"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;si&lt;/xsl:text&gt;
<span class="linenumber">324</span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:set"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">326</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">328</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">330</span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;chunk-filename-error-&lt;/xsl:text&gt;
<span class="linenumber">332</span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="name(.)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:number level="any" format="01" from="d:set"/&gt;
<span class="linenumber">334</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($recursive)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$dbsplit.ext"/&gt;
<span class="linenumber">336</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">338</span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">340</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="generate-filename"&gt;
<span class="linenumber">342</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="." mode="recursive-chunk-filename"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">344</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="generate-content"&gt;
<span class="linenumber">346</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="filename"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="make-relative-filename"&gt;
<span class="linenumber">348</span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="base.dir" select="$base.dir"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="base.name"&gt;
<span class="linenumber">350</span><span class="linenumber-separator"> </span>           &lt;xsl:call-template name="generate-filename"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:with-param&gt;
<span class="linenumber">352</span><span class="linenumber-separator"> </span>      &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:variable&gt;
<span class="linenumber">354</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="depth" select="count(ancestor::*)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber">356</span><span class="linenumber-separator"> </span>    &lt;!--&lt;xsl:message&gt;generate-content:
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      name: &lt;xsl:value-of select="name()"/&gt;
<span class="linenumber">358</span><span class="linenumber-separator"> </span>      filename: &lt;xsl:value-of select="$filename"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      depth: &lt;xsl:value-of select="$depth"/&gt;
<span class="linenumber">360</span><span class="linenumber-separator"> </span>      test: &lt;xsl:value-of select="$depth &gt;= $dbsplit.chunk.depth"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:message&gt;--&gt;
<span class="linenumber">362</span><span class="linenumber-separator"> </span>    
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">364</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$depth &amp;lt;= $dbsplit.chunk.depth"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xi:include href="{$filename}"/&gt;
<span class="linenumber">366</span><span class="linenumber-separator"> </span>        &lt;xsl:call-template name="write.xml.chunk"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:with-param name="filename" select="$filename"/&gt;
<span class="linenumber">368</span><span class="linenumber-separator"> </span>          &lt;xsl:with-param name="content"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:copy-of select="preceding-sibling::processing-instruction()|
<span class="linenumber">370</span><span class="linenumber-separator"> </span>                                 preceding-sibling::comment()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:copy&gt;
<span class="linenumber">372</span><span class="linenumber-separator"> </span>              &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:copy&gt;
<span class="linenumber">374</span><span class="linenumber-separator"> </span>          &lt;/xsl:with-param&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:call-template&gt;
<span class="linenumber">376</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber">378</span><span class="linenumber-separator"> </span>        &lt;xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates/&gt;
<span class="linenumber">380</span><span class="linenumber-separator"> </span>        &lt;/xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">382</span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">384</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template
<span class="linenumber">386</span><span class="linenumber-separator"> </span>    match="d:acknowledgements|d:appendix|d:article|
<span class="linenumber">   </span><span class="linenumber-separator"> </span>           d:bibliography|
<span class="linenumber">388</span><span class="linenumber-separator"> </span>           d:chapter|d:colophon|d:dedication|d:glossary|
<span class="linenumber">   </span><span class="linenumber-separator"> </span>           d:part|d:preface|d:reference|d:topic|
<span class="linenumber">390</span><span class="linenumber-separator"> </span>           d:sect1|d:section[not(parent::d:section)]"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:call-template name="generate-content"/&gt;
<span class="linenumber">392</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">394</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                        </div>
                     </figure>
                     <p>The <code class="filename">chunker.xsl</code> file is more or
                        less a stripped down version of the
                        <code class="filename">html/chunker.xsl</code> file from the DocBook XSL
                        stylesheets. It is used to create processor independent writing
                        of our XML chunks. The file was integrated into
                        <code class="filename">dbsplit.xsl</code> to make it more independent
                        from the DocBook XSL stylesheets.
                     </p>
                     <figure id="sec.structure.splitdb.xsl.5" class="example-wrapper">
                        <div class="title">Example 3.7. <code class="filename">chunker.xsl</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns:saxon="http://icl.com/saxon"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:lxslt="http://xml.apache.org/xslt"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:redirect="http://xml.apache.org/xalan/redirect"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:exsl="http://exslt.org/common"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  xmlns="http://www.w3.org/1999/xhtml" version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  exclude-result-prefixes="saxon lxslt redirect exsl"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  extension-element-prefixes="saxon redirect lxslt exsl"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.method" select="'xml'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.encoding" select="'UTF-8'"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.indent" select="'no'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.omit-xml-declaration" select="'no'"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.standalone" select="'no'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.doctype-public" select="''"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.doctype-system" select="''"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.media-type" select="''"/&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.cdata-section-elements" select="''"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="chunker.output.quiet" select="0"/&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="saxon.character.representation"
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>    select="'entity;decimal'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="make-relative-filename"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="base.dir" select="'./'"/&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="base.name" select="''"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;!-- put Saxon first to work around a bug in libxslt --&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('saxon:output')"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;!-- Saxon doesn't make the chunks relative --&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="concat($base.dir,$base.name)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('exsl:document')"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;!-- EXSL document does make the chunks relative, I think --&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="count(parent::*) = 0"&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="concat($base.dir,$base.name)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="$base.name"/&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>          &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('redirect:write')"&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>        &lt;!-- Xalan doesn't make the chunks relative --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="concat($base.dir,$base.name)"/&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>        &lt;xsl:message terminate="yes"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:text&gt;Don't know how to chunk with &lt;/xsl:text&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="system-property('xsl:vendor')"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:message&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="write.chunk"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="filename" select="''"/&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="quiet" select="$chunker.output.quiet"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="suppress-context-node-name" select="0"/&gt;
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="message-prolog"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="message-epilog"/&gt;
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="method" select="$chunker.output.method"/&gt;
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="encoding" select="$chunker.output.encoding"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="indent" select="$chunker.output.indent"/&gt;
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="omit-xml-declaration"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="$chunker.output.omit-xml-declaration"/&gt;
<span class="linenumber"> 70</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="standalone" select="$chunker.output.standalone"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="doctype-public"
<span class="linenumber"> 72</span><span class="linenumber-separator"> </span>      select="$chunker.output.doctype-public"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="doctype-system"
<span class="linenumber"> 74</span><span class="linenumber-separator"> </span>      select="$chunker.output.doctype-system"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="media-type" select="$chunker.output.media-type"/&gt;
<span class="linenumber"> 76</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="cdata-section-elements"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="$chunker.output.cdata-section-elements"/&gt;
<span class="linenumber"> 78</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="content"/&gt;
<span class="linenumber"> 80</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$quiet = 0"&gt;
<span class="linenumber"> 82</span><span class="linenumber-separator"> </span>      &lt;xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($message-prolog = '')"&gt;
<span class="linenumber"> 84</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$message-prolog"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber"> 86</span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;Writing &lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="$filename"/&gt;
<span class="linenumber"> 88</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="name(.) != '' and $suppress-context-node-name = 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:text&gt; for &lt;/xsl:text&gt;
<span class="linenumber"> 90</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="name(.)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:if test="@id or @xml:id"&gt;
<span class="linenumber"> 92</span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;(&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="(@id|@xml:id)[1]"/&gt;
<span class="linenumber"> 94</span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;)&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:if&gt;
<span class="linenumber"> 96</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:if test="not($message-epilog = '')"&gt;
<span class="linenumber"> 98</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$message-epilog"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">100</span><span class="linenumber-separator"> </span>      &lt;/xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">102</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">104</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('exsl:document')"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">106</span><span class="linenumber-separator"> </span>          &lt;!-- Handle the permutations ... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:when test="$media-type != ''"&gt;
<span class="linenumber">108</span><span class="linenumber-separator"> </span>            &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">110</span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">112</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">114</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">116</span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">118</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">120</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">122</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system = ''"&gt;
<span class="linenumber">124</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">126</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">128</span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">130</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">132</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">134</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public = '' and $doctype-system != ''"&gt;
<span class="linenumber">136</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">138</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">140</span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">142</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">144</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">146</span><span class="linenumber-separator"> </span>              &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;!-- $doctype-public = '' and $doctype-system = ''"&gt; --&gt;
<span class="linenumber">148</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">150</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">152</span><span class="linenumber-separator"> </span>                  media-type="{$media-type}" standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">154</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:otherwise&gt;
<span class="linenumber">156</span><span class="linenumber-separator"> </span>            &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">158</span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:choose&gt;
<span class="linenumber">160</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system != ''"&gt;
<span class="linenumber">162</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">164</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">166</span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">168</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">170</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">172</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system = ''"&gt;
<span class="linenumber">174</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">176</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">178</span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">180</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">182</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">184</span><span class="linenumber-separator"> </span>                test="$doctype-public = '' and $doctype-system != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">186</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">188</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">190</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">192</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">194</span><span class="linenumber-separator"> </span>              &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;!-- $doctype-public = '' and $doctype-system = ''"&gt; --&gt;
<span class="linenumber">196</span><span class="linenumber-separator"> </span>                &lt;exsl:document href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">198</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">200</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">202</span><span class="linenumber-separator"> </span>                &lt;/exsl:document&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:otherwise&gt;
<span class="linenumber">204</span><span class="linenumber-separator"> </span>            &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:otherwise&gt;
<span class="linenumber">206</span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">208</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('saxon:output')"&gt;
<span class="linenumber">210</span><span class="linenumber-separator"> </span>        &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;!-- Handle the permutations ... --&gt;
<span class="linenumber">212</span><span class="linenumber-separator"> </span>          &lt;xsl:when test="$media-type != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:choose&gt;
<span class="linenumber">214</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system != ''"&gt;
<span class="linenumber">216</span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">218</span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">220</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">222</span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">224</span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">226</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">228</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">230</span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system = ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">232</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">234</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">236</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">238</span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">240</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">242</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">244</span><span class="linenumber-separator"> </span>                test="$doctype-public = '' and $doctype-system != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">246</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">248</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">250</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  media-type="{$media-type}"
<span class="linenumber">252</span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">254</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">256</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:otherwise&gt;
<span class="linenumber">258</span><span class="linenumber-separator"> </span>                &lt;!-- $doctype-public = '' and $doctype-system = ''"&gt; --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">260</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">262</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">264</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  media-type="{$media-type}" standalone="{$standalone}"&gt;
<span class="linenumber">266</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">268</span><span class="linenumber-separator"> </span>              &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:choose&gt;
<span class="linenumber">270</span><span class="linenumber-separator"> </span>          &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:otherwise&gt;
<span class="linenumber">272</span><span class="linenumber-separator"> </span>            &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">274</span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system != ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">276</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">278</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">280</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">282</span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">284</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">286</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">288</span><span class="linenumber-separator"> </span>                test="$doctype-public != '' and $doctype-system = ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">290</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">292</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">294</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  doctype-public="{$doctype-public}"
<span class="linenumber">296</span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">298</span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">300</span><span class="linenumber-separator"> </span>              &lt;xsl:when
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                test="$doctype-public = '' and $doctype-system != ''"&gt;
<span class="linenumber">302</span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">304</span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">306</span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">308</span><span class="linenumber-separator"> </span>                  doctype-system="{$doctype-system}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">310</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">312</span><span class="linenumber-separator"> </span>              &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:otherwise&gt;
<span class="linenumber">314</span><span class="linenumber-separator"> </span>                &lt;!-- $doctype-public = '' and $doctype-system = ''"&gt; --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;saxon:output
<span class="linenumber">316</span><span class="linenumber-separator"> </span>                  saxon:character-representation="{$saxon.character.representation}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  href="{$filename}" method="{$method}"
<span class="linenumber">318</span><span class="linenumber-separator"> </span>                  encoding="{$encoding}" indent="{$indent}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  omit-xml-declaration="{$omit-xml-declaration}"
<span class="linenumber">320</span><span class="linenumber-separator"> </span>                  cdata-section-elements="{$cdata-section-elements}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  standalone="{$standalone}"&gt;
<span class="linenumber">322</span><span class="linenumber-separator"> </span>                  &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;/saxon:output&gt;
<span class="linenumber">324</span><span class="linenumber-separator"> </span>              &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:choose&gt;
<span class="linenumber">326</span><span class="linenumber-separator"> </span>          &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:choose&gt;
<span class="linenumber">328</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">330</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="element-available('redirect:write')"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;!-- Xalan uses redirect --&gt;
<span class="linenumber">332</span><span class="linenumber-separator"> </span>        &lt;redirect:write file="{$filename}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:copy-of select="$content"/&gt;
<span class="linenumber">334</span><span class="linenumber-separator"> </span>        &lt;/redirect:write&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">336</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber">338</span><span class="linenumber-separator"> </span>        &lt;!-- it doesn't matter since we won't be making chunks... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:message terminate="yes"&gt;
<span class="linenumber">340</span><span class="linenumber-separator"> </span>          &lt;xsl:text&gt;Can't make chunks with &lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="system-property('xsl:vendor')"/&gt;
<span class="linenumber">342</span><span class="linenumber-separator"> </span>          &lt;xsl:text&gt;'s processor.&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:message&gt;
<span class="linenumber">344</span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber">346</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">348</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="write.xml.chunk"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="filename" select="''"/&gt;
<span class="linenumber">350</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="quiet" select="$chunker.output.quiet"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="suppress-context-node-name" select="0"/&gt;
<span class="linenumber">352</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="message-prolog"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="message-epilog"/&gt;
<span class="linenumber">354</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="method" select="'xml'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="encoding" select="$chunker.output.encoding"/&gt;
<span class="linenumber">356</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="media-type" select="$chunker.output.media-type"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="content"/&gt;
<span class="linenumber">358</span><span class="linenumber-separator"> </span>    &lt;xsl:call-template name="write.chunk"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="filename" select="$filename"/&gt;
<span class="linenumber">360</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="quiet" select="$quiet"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="suppress-context-node-name"
<span class="linenumber">362</span><span class="linenumber-separator"> </span>        select="$suppress-context-node-name"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="message-prolog" select="$message-prolog"/&gt;
<span class="linenumber">364</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="message-epilog" select="$message-epilog"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="method" select="$method"/&gt;
<span class="linenumber">366</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="encoding" select="$encoding"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="indent" select="'yes'"/&gt;
<span class="linenumber">368</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="omit-xml-declaration" select="'no'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="standalone" select="'no'"/&gt;
<span class="linenumber">370</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="doctype-public"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="doctype-system"/&gt;
<span class="linenumber">372</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="media-type" select="$media-type"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="cdata-section-elements"/&gt;
<span class="linenumber">374</span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="content" select="$content"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:call-template&gt;
<span class="linenumber">376</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                        </div>
                     </figure>
                     <p>It can be customized with several parameters:</p>
                     <div class="variablelist">
                        <dl>
                           <dt><span class="term"><em class="parameter"><code>base.dir</code></em></span></dt>
                           <dd>
                              <p>Determines the output directory</p>
                           </dd>
                           <dt><span class="term"><em class="parameter"><code>dbsplit.chunk.depth</code></em></span></dt>
                           <dd>
                              <p>Controls the depth where to split </p>
                           </dd>
                           <dt><span class="term"><em class="parameter"><code>dbsplit.ext</code></em></span></dt>
                           <dd>
                              <p>Defines the file extension for each filename written.</p>
                           </dd>
                           <dt><span class="term"><em class="parameter"><code>dbsplit.root.filename</code></em></span></dt>
                           <dd>
                              <p>Identifies the name of the root filename when splitted 
                                 
                              </p>
                           </dd>
                           <dt><span class="term"><em class="parameter"><code>use.id.as.filename</code></em></span></dt>
                           <dd>
                              <p>Uses ID values as filenames</p>
                           </dd>
                           <dt><span class="term"><em class="parameter"><code>rootid</code></em></span></dt>
                           <dd>
                              <p>Specify the root element to split</p>
                           </dd>
                        </dl>
                     </div>
                  </section>
                  <section id="sec.structure.splitdb.dbsplit" class="section">
                     <div class="section-titlepage">
                        <h5>Splitting with the <strong class="command">dbautosplit</strong></h5>
                     </div>
                     <p>TBD</p>
                  </section>
               </section>
               <section id="dbc.structure.splitdb.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>
                     
                     
                  </p>
               </section>
            </section>
            <section id="dbc.structure.extract" class="section">
               <div class="section-titlepage">
                  <h3>3.6. Extracting One Element from DocBook Document<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.structure.extract.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have a big DocBook document and you need to extract one
                     structural element like a <code class="tag-element">chapter</code>, <code class="tag-element">appendix</code>
                     etc. to edit or process it separately from the main document.
                  </p>
               </section>
               <section id="dbc.structure.extract.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>To make the solution work, the structural element needs an ID
                     attribute. If this is available, use the following stylesheet:
                  </p>
                  <figure id="ex.rootid.xsl" class="example-wrapper">
                     <div class="title">Example 3.8. Extracting Stylesheet <code class="filename">rootid.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:key name="id" match="*" use="@id|@xml:id"/&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;!-- Contains the ID attribute of the extracted element: --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="rootid"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;!-- Controls some log messages: 0=off, 1=on --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="rootid.debug" select="0"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="/"&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$rootid !=''"&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="count(key('id',$rootid)) = 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:message terminate="yes"&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;ID '&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="$rootid"/&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;' not found in document.&lt;/xsl:text&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:message&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:call-template name="rootid.debug.message"/&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>        &lt;xsl:call-template name="rootid.process"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:call-template name="normal.process"/&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="rootid.debug.message"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$rootid.debug != 0"&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>      &lt;xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:text&gt;Using ID &lt;/xsl:text&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>        &lt;xsl:value-of select="concat('&amp;quot;', $rootid, '&amp;quot;')"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:message&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="rootid.process"&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="key('id',$rootid)" mode="process.root"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="normal.process"&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="node() | @*" mode="process.root"&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>    &lt;xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@* | node()" mode="process.root"/&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>    &lt;/xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>Pass the <em class="parameter"><code>rootid</code></em> parameter to your XSLT
                     processor with the corresponding ID, for example:
                  </p>
                  <div class="screen"><pre><strong class="command">xsltproc</strong> --stringparam rootid intro rootid.xsl <em class="replaceable"><code>XML_FILE</code></em></pre></div>
                  <p>The result contains only the element with the corresponding ID
                     value and everything inside it.
                  </p>
               </section>
               <section id="dbc.structure.extract.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>This solution cuts off the element with the corresponding ID
                     and copies the element itself and its children to the output
                     stream. The copying is done in the <code class="literal">process.root</code>
                     mode. The stylesheet does not apply any further processing. This can be a
                     disadvantage, for example, a <code class="tag-element">xref</code> pointing outside of
                     the respective element. If the resulting file contains such a
                     cross reference, it will not be valid anymore.
                  </p>
                  <p>It is possible to convert such cross references into a
                     “<span class="quote">resolved form</span>” by using the following code:
                  </p>
                  <figure id="ex.rootid-resolve-xrefs.xsl" class="example-wrapper">
                     <div class="title">Example 3.9. <code class="filename">rootid-resolve-xrefs.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xlink="http://www.w3.org/1999/xlink"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="rootid.xsl"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:xref" mode="process.root"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="xhref" select="@xlink:href"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;!-- is the @xlink:href a local idref link? --&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="xlink.idref"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:choose&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="starts-with($xhref,'#')"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="substring($xhref, 2)"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:when test="contains($xhref, '://')"&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>         &lt;xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;ERROR: Don't know what do do with @xlink:href: &lt;/xsl:text&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="$xhref"/&gt;&lt;/xsl:message&gt; 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>        &lt;xsl:otherwise/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:choose&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>    &lt;/xsl:variable&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="xlink.targets" select="key('id',$xlink.idref)"/&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="linkend.targets" select="key('id',@linkend)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="target" select="($xlink.targets | $linkend.targets)[1]"/&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="refelem" select="local-name($target)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="this.div" 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="ancestor-or-self::d:*[@xml:id = $rootid][1]"/&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="target.div"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="$target/ancestor-or-self::d:*[@xml:id = $rootid][1]"/&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="generate-id($this.div) = generate-id($target.div)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:copy-of select="."/&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>      &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>        &lt;phrase xmlns="http://docbook.org/ns/docbook" remap="xref"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:choose&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>            &lt;xsl:when test="@linkend"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="role"&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>                &lt;xsl:value-of select="@linkend"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>            &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:when test="$xlink.idref != ''"&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="role"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                &lt;xsl:value-of select="$xlink.idref"/&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/xsl:when&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>            &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="role"&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>                &lt;xsl:value-of select="$xhref"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>            &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;/xsl:choose&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="@*[local-name() != 'linkend' and
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>                       local-name() != 'href']"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            mode="process.root"/&gt;
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            select="($target/ancestor-or-self::d:*[d:title])[last()]/d:title/node()"
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>            mode="process.root"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/phrase&gt;
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>      &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>The stylesheet in <a href="#ex.rootid-resolve-xrefs.xsl">Example 3.9, “<code class="filename">rootid-resolve-xrefs.xsl</code>”</a> imports the
                     <code class="filename">rootid.xsl</code> and inherits all templates. To
                     implement a different behaviour we need to add a new template
                     matching for the <code class="tag-element">xref</code> element in mode
                     <code class="literal">process.root</code>.
                  </p>
                  <p>The template contains mostly code from the DocBook XSL
                     stylesheets with some minor changes. The general behaviour is
                     described in the following sequence:
                  </p>
                  <div class="orderedlist">
                     <ol style="list-style: decimal;">
                        <li>
                           <p>Make sure, everything is in place and a <code class="tag-attribute">xlink:href</code> attribute does not contain
                              a <code class="literal">://</code> string. If this is the case emit an
                              error message.
                           </p>
                        </li>
                        <li>
                           <p>Populate the variables <code class="varname">xlink.targets</code>
                              and <code class="varname">linkend.targets</code> with the target node.
                              For <code class="varname">xlink.targets</code> use the XLink attribute <code class="tag-attribute">xlink:href</code>, for the variable
                              <code class="varname">linkend.targets</code> use the <code class="tag-attribute">linkend</code>
                              attribute. As only one of these attributes can be available,
                              but not both, the variables are filled with zero nodes or
                              more.
                           </p>
                        </li>
                        <li>
                           <p>Create the set union of the variables
                              <code class="varname">xlink.targets</code> and
                              <code class="varname">linkend.targets</code> and select only one node.
                              
                           </p>
                        </li>
                        <li>
                           <p>Now it gets interesting: our context node is in
                              <code class="tag-element">xref</code>. We need to know the node where  the value
                              of the <code class="tag-attribute">xml:id</code> attribute equals
                              our <em class="parameter"><code>rootid</code></em> parameter. We climb up tree
                              with the <code class="function">ancestor-or-self</code> axis specifier
                              and select every DocBook element. With the predicate
                              <span class="markup">[@xml:id = $rootid]</span> the node set is
                              filtered and only those element(s) are preserved where this
                              expression is true. Only one node from the node set is
                              selected.
                           </p>
                           <p>This is done also for the target node and the result is
                              saved in the variable <code class="varname">target.div</code></p>
                        </li>
                        <li>
                           <p>The two node from the previous operation are compared
                              through the <code class="function">generate-id</code> function. That
                              leaves two options:
                           </p>
                           <div class="itemizedlist">
                              <ul>
                                 <li>
                                    <div class="formalpara">
                                       <p><b>Both nodes are equal</b>  The <code class="tag-element">xref</code> points somewhere inside the tree
                                          under the <em class="parameter"><code>rootid</code></em> element. That
                                          means, we can copy the <code class="tag-element">xref</code> element.
                                       </p>
                                    </div>
                                 </li>
                                 <li>
                                    <div class="formalpara">
                                       <p><b>Both nodes are not equal</b>  The <code class="tag-element">xref</code> points outside of the
                                          <em class="parameter"><code>rootid</code></em> element. That means, you
                                          need to “<span class="quote">resolve</span>” the <code class="tag-element">xref</code>
                                          element to prevent validation errors.
                                       </p>
                                    </div>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>If the <code class="tag-element">xref</code> needs to be revamped, we use the
                              <code class="tag-element">phrase</code> element, copy all attributes (except <code class="tag-attribute">linkend</code> and <code class="tag-attribute">xlink:href</code>), and copy anything inside the title of
                              the target node. As the target node could not be a title
                              itself, we use again the <code class="function">ancestor-or-self</code>
                              axis to climb up the tree and select the first emerging
                              title.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <div class="remark">TODO: Add graphic to illustrate the method</div>
               </section>
               <section id="dbc.structure.extract.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p><a href="#dbc.structure.splitdb">Section 3.5, “Splitting DocBook Documents”</a> uses a different
                     approach without needing an ID attribute.
                  </p>
               </section>
            </section>
            <section id="dbc.structure.sectX-to-section" class="section">
               <div class="section-titlepage">
                  <h3>3.7. Transforming <code class="tag-element">sectX</code> Elements into <code class="tag-element">section</code> Elements<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.structure.sectX-to-section.3" class="section">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need to transform every <code class="tag-element">sectX</code> element into a
                     <code class="tag-element">section</code> element.
                  </p>
               </section>
               <section id="dbc.structure.sectX-to-section.4" class="section">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>This problem is solved through the following XSLT stylesheet:</p>
                  <figure id="ex.structure.sectX-to-section" class="example-wrapper">
                     <div class="title">Example 3.10. Transforms every <code class="tag-element">sectX</code> Element into a
                        <code class="tag-element">section</code> Element
                     </div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:sect1|d:sect2|d:sect3|d:sect4|d:sect5"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:element name="section" namespace="http://docbook.org/ns/docbook"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="node()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.sectX-to-section.5" class="section">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The stylesheet from <a href="#ex.structure.sectX-to-section">Example 3.10, “Transforms every <code class="tag-element">sectX</code> Element into a
                        <code class="tag-element">section</code> Element”</a> is very easy: it
                     imports the standard rules to copy every node from
                     <code class="filename">copy.xsl</code> and create special rules for all
                     <code class="tag-element">sectX</code> elements. As every <code class="tag-element">sectX</code> element
                     creates the same structure, we can collect it in one template
                     rule. 
                  </p>
               </section>
            </section>
            <section id="dbc.structure.section-to-sectX" class="section">
               <div class="section-titlepage">
                  <h3>3.8. Transforming <code class="tag-element">section</code> Elements into <code class="tag-element">sectX</code> Elements<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.structure.section-to-sectX.3" class="section">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need to transform every <code class="tag-element">sectX</code> element into a
                     <code class="tag-element">section</code> element.
                  </p>
               </section>
               <section id="dbc.structure.section-to-sectX.4" class="section">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>This problem is solved through the following XSLT stylesheet:</p>
                  <figure id="ex.structure.section-to-sectX" class="example-wrapper">
                     <div class="title">Example 3.11. Transforms every <code class="tag-element">sectX</code> Element into a
                        <code class="tag-element">section</code> Element
                     </div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  version="1.0"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:section"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="level" select="count(ancestor::*)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:element name="sect{$level}" namespace="http://docbook.org/ns/docbook"&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>      &lt;xsl:copy-of select="@*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.section-to-sectX.5" class="section">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The above stylesheet calculates the section level with the
                     <code class="function">ancestor</code> axis, because the amount of
                     elements is directly correlated with the level of the
                     corresponding section. With an <em><a href="http://www.w3.org/TR/xslt#attribute-value-templates">attribute value template</a></em> it is
                     inserted in the <code class="tag-attribute">name</code>
                     attribute.
                  </p>
                  <p>There is one caveat: The stylesheet does not check if the
                     limit is reached. Currently (with version 5.1), DocBook supports
                     levels up to 5. If you nest your <code class="tag-element">section</code> elements too
                     deep, you can end up with, let's say, <code class="tag-element">sect8</code> which
                     is not allowed in DocBook. To avoid making 
                     mistakes, it is better to check the level:
                  </p>
                  <figure id="ex.structure.sectX-to-section.check" class="example-wrapper">
                     <div class="title">Example 3.12. Error Checking of Section Levels</div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:template match="d:section"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:variable name="level" select="count(ancestor::*)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:choose&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;xsl:when test="$level &amp;lt;= 5"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:element name="sect{$level}"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>          namespace="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:copy-of select="@*"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:element&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:otherwise&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>      &lt;xsl:message&gt;ERROR: section &lt;xsl:value-of
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          select="normalize-space(d:title)"/&gt; to deep&lt;/xsl:message&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>      &lt;!-- What to do if the section is too deeply nested? --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:otherwise&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>  &lt;/xsl:choose&gt;    
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;</pre></div>
                     </div>
                  </figure>
                  <p>Amend the stylesheet when the section is too
                     deeply nested (see above comment). You could avoid the section
                     level (which is a bad idea) but it's better to rework the source
                     document.
                  </p>
                  <p>If you want, you can stop the transformation if the section
                     level is too high. Change the <code class="tag-element">xsl:message</code> as
                     follows:
                  </p>
                  <div class="programlisting"><pre class="xslt">&lt;xsl:message <strong class="emphasis">terminate="yes"</strong>&gt;...</pre></div>
               </section>
            </section>
            <section id="dbc.structure.bridgehead-to-section" class="section">
               <div class="section-titlepage">
                  <h3>3.9. Transforming <code class="tag-element">bridgehead</code> Elements into <code class="tag-element">section</code> Elements<span class="section-userlevel" title="difficulty: hard">⚑⚑⚑</span></h3>
               </div>
               <section id="dbc.structure.bridgehead-to-section.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have a DocBook document which contains several
                     <code class="tag-element">bridgehead</code> elements. The <code class="tag-element">bridgehead</code> has to
                     be transformed into the correct <code class="tag-element">section</code> structure.
                  </p>
               </section>
               <section id="dbc.structure.bridgehead-to-section.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>A <code class="tag-element">bridgehead</code> element is a “<span class="quote">free-floating
                        heading</span>”. In most cases it is a bad idea as it is
                     difficult to handle in XSLT. To create the correct section
                     hierarchy, a stylesheet need to collect all nodes between a
                     <code class="tag-element">bridgehead</code> element and the next one. The following
                     stylesheet uses a set difference method:
                  </p>
                  <figure id="dbc.structure.bridgehead-to-section.4.3" class="example-wrapper">
                     <div class="title">Example 3.13. Transforms every <code class="tag-element">bridgehead</code> Element into
                        a <code class="tag-element">section</code> Element
                     </div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output indent="yes"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:strip-space elements="*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:preserve-space elements="d:screen d:programlisting d:literallayout"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:section[d:bridgehead]"&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;!-- All nodes inside our section: --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="node1" select="node()"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>    &lt;!-- All nodes --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="node2" 
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>      select="d:bridgehead[1]|
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              d:bridgehead[1]/following-sibling::node()"/&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>    
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;!-- Copy our section with all attributes, apply the set difference
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>      and investigate the first bridgehead 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    --&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>    &lt;xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:copy-of select="@*"/&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="$node1[count(.|$node2) != count($node2)]"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="d:bridgehead[1]"/&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;/xsl:copy&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:bridgehead"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;!-- All nodes who follow bridgeheads: --&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="node1" 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="following-sibling::node()"/&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>    &lt;!-- All nodes who follow the next bridgehead including the next
<span class="linenumber">   </span><span class="linenumber-separator"> </span>         bridgehead.
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>         The next bridgehead element is included as we don't want it
<span class="linenumber">   </span><span class="linenumber-separator"> </span>         in the set difference:
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>    --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="node2"
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>      select="following-sibling::d:bridgehead[1]|
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              following-sibling::d:bridgehead[1]/following-sibling::node()"/&gt;   
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;!-- Create the section element with all attributes and apply
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>      standard rules for the diff set --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:element name="section"&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>      &lt;xsl:copy-of select="@*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:text&gt;&amp;#10;  &lt;/xsl:text&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>      &lt;xsl:element name="title"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates select="node()"/&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>      &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="$node1[count(.|$node2) != count($node2)]"/&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>    &lt;!-- Process the next bridgehead --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="following-sibling::d:bridgehead[1]"/&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.bridgehead-to-section.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The solution is unfortunately not very trivial in XSLT 1.0.
                     The template rule <code class="code">d:section[d:bridgehead]</code> matches
                     only <code class="tag-element">section</code>s which contain one or more
                     <code class="tag-element">bridgehead</code> elements.
                     The
                     template rule performs the following steps:
                  </p>
                  <div class="orderedlist">
                     <ol style="list-style: decimal;">
                        <li>
                           <p>Collect all nodes inside a <code class="tag-element">section</code> and save it
                              in variable <code class="varname">node1</code>.
                           </p>
                        </li>
                        <li>
                           <p>Collect all nodes who follows the next
                              <code class="tag-element">bridgehead</code> including the next
                              <code class="tag-element">bridgehead</code> itself and save it in variable
                              <code class="varname">node2</code>.
                           </p>
                        </li>
                        <li>
                           <p>Creates a <code class="tag-element">section</code> element and copy all
                              attributes from the <code class="tag-element">bridgehead</code> element.
                           </p>
                        </li>
                        <li>
                           <p>Creates a <code class="tag-element">title</code> element and apply the content
                              from the <code class="tag-element">bridgehead</code> element. This copies the
                              content from <code class="tag-element">bridgehead</code>.
                           </p>
                        </li>
                        <li>
                           <p>Calculates the set difference between
                              <code class="varname">node1</code> and <code class="varname">node2</code>. This
                              weird expression is needed in XSLT 1.0 to create a node set
                              which contains only those nodes up to the first
                              <code class="tag-element">bridgehead</code>.
                           </p>
                        </li>
                        <li>
                           <p>Handle the first <code class="tag-element">bridgehead</code> element which is
                              covered by our <code class="tag-element">bridgehead</code> template rule.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <p>The <code class="tag-element">bridgehead</code> template rule is responsible for
                     transforming the current <code class="tag-element">bridgehead</code> element into a
                     <code class="tag-element">section</code>. It is also responsible for the next
                     <code class="tag-element">bridgehead</code>s. The rule performs the following
                     steps:
                  </p>
                  <div class="orderedlist">
                     <ol style="list-style: decimal;">
                        <li>
                           <p>Collect all nodes following of the current
                              <code class="tag-element">bridgehead</code> element and save it in variable
                              <code class="varname">node1</code>.
                           </p>
                        </li>
                        <li>
                           <p>Collect all nodes following of the next
                              <code class="tag-element">bridgehead</code> element including the next
                              <code class="tag-element">bridgehead</code> element itself. Save the node set in
                              variable <code class="varname">node2</code>.
                           </p>
                        </li>
                        <li>
                           <p>Creates a <code class="tag-element">section</code> element and copy all
                              attributes from the <code class="tag-element">bridgehead</code> element.
                           </p>
                        </li>
                        <li>
                           <p>Creates a <code class="tag-element">title</code> element and apply the content
                              from the <code class="tag-element">bridgehead</code> element. This copies the
                              content from <code class="tag-element">bridgehead</code>.
                           </p>
                        </li>
                        <li>
                           <p>Calculate the set difference between
                              <code class="varname">node1</code> and <code class="varname">node2</code> and
                              apply the correct template rule (usually they are just
                              copied).
                           </p>
                        </li>
                        <li>
                           <p>Close the <code class="tag-element">section</code> element and handle the next
                              <code class="tag-element">bridgehead</code> element.
                           </p>
                        </li>
                     </ol>
                  </div>
               </section>
            </section>
            <section id="dbc.structure.remove-blocks-in-para" class="section">
               <div class="section-titlepage">
                  <h3>3.10. Moving Block Elements Outside of Paragraphs<span class="section-userlevel" title="difficulty: hard">⚑⚑⚑</span></h3>
                  <div class="authorgroup">
                     <div class="othercredit">
                        <h3><span class="personname"><span class="firstname">Jeni</span> <span class="surname">Tennison</span></span></h3>
                     </div>
                     <div class="othercredit">
                        <h3><span class="personname"><span class="firstname">Dave</span> <span class="surname">Pawson</span></span></h3>
                     </div>
                  </div>
               </div>
               <section id="dbc.structure.remove-blocks-in-para.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>DocBook allows to insert block elements like
                     <code class="tag-element">example</code>, <code class="tag-element">figure</code>, etc. to be inserted in
                     <code class="tag-element">para</code>s. This is sometimes hard to process with XSLT and
                     you want to move those block elements outside of your paragraph.
                     After this modification, the paragraph contains only text and
                     inline elements (like <code class="tag-element">simpara</code>).
                  </p>
               </section>
               <section id="dbc.structure.remove-blocks-in-para.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>The solution explained</p>
                  <figure id="ex." class="example-wrapper">
                     <div class="title">Example 3.14. <code class="filename">move-blocks-outof-para.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>[
<span class="linenumber">   </span><span class="linenumber-separator"> </span> &lt;!ENTITY dbblocks "d:address|d:bibliolist|d:blockquote|d:bridgehead|d:calloutlist|d:caution|d:classsynopsis|d:cmdsynopsis|d:constraintdef|d:constructorsynopsis|d:destructorsynopsis|d:epigraph|d:equation|d:example|d:fieldsynopsis|d:figure|d:funcsynopsis|d:glosslist|d:important|d:informalexample|d:informalfigure|d:informaltable|d:itemizedlist|d:literallayout|d:mediaobject|d:methodsynopsis|d:msgset|d:note|d:orderedlist|d:procedure|d:procedure|d:productionset|d:programlisting|d:programlistingco|d:qandaset|d:revhistory|d:screen|d:screenco|d:screenshot|d:segmentedlist|d:sidebar|d:simplelist|d:synopsis|d:table|d:task|d:tip|d:variablelist|d:warning"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span> &lt;!ENTITY dbselfblocks "self::d:address|self::d:bibliolist|self::d:blockquote|self::d:bridgehead|self::d:calloutlist|self::d:caution|self::d:classsynopsis|self::d:cmdsynopsis|self::d:constraintdef|self::d:constructorsynopsis|self::d:destructorsynopsis|self::d:epigraph|self::d:equation|self::d:example|self::d:fieldsynopsis|self::d:figure|self::d:funcsynopsis|self::d:glosslist|self::d:important|self::d:informalexample|self::d:informalfigure|self::d:informaltable|self::d:itemizedlist|self::d:literallayout|self::d:mediaobject|self::d:methodsynopsis|self::d:msgset|self::d:note|self::d:orderedlist|self::d:procedure|self::d:procedure|self::d:productionset|self::d:programlisting|self::d:programlistingco|self::d:qandaset|self::d:revhistory|self::d:screen|self::d:screenco|self::d:screenshot|self::d:segmentedlist|self::d:sidebar|self::d:simplelist|self::d:synopsis|self::d:table|self::d:task|self::d:tip|self::d:variablelist|self::d:warning"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span> &lt;!ENTITY dbblocksinpara "d:para/d:address|d:para/d:bibliolist|d:para/d:blockquote|d:para/d:bridgehead|d:para/d:calloutlist|d:para/d:caution|d:para/d:classsynopsis|d:para/d:cmdsynopsis|d:para/d:constraintdef|d:para/d:constructorsynopsis|d:para/d:destructorsynopsis|d:para/d:epigraph|d:para/d:equation|d:para/d:example|d:para/d:fieldsynopsis|d:para/d:figure|d:para/d:funcsynopsis|d:para/d:glosslist|d:para/d:important|d:para/d:informalexample|d:para/d:informalfigure|d:para/d:informaltable|d:para/d:itemizedlist|d:para/d:literallayout|d:para/d:mediaobject|d:para/d:methodsynopsis|d:para/d:msgset|d:para/d:note|d:para/d:orderedlist|d:para/d:procedure|d:para/d:procedure|d:para/d:productionset|d:para/d:programlisting|d:para/d:programlistingco|d:para/d:qandaset|d:para/d:revhistory|d:para/d:screen|d:para/d:screenco|d:para/d:screenshot|d:para/d:segmentedlist|d:para/d:sidebar|d:para/d:simplelist|d:para/d:synopsis|d:para/d:table|d:para/d:task|d:para/d:tip|d:para/d:variablelist|d:para/d:warning"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="copy.xsl"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:strip-space elements="d:para"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  &lt;xsl:preserve-space elements="d:screen d:programlisting d:literallayout"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output indent="yes"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:para"&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="node()[1]"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="&amp;dbblocksinpara;"&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>    &lt;xsl:copy-of select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="following-sibling::node()[1]"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:para/*|d:para/text()"&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;xsl:element name="{local-name(..)}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="." mode="copy"/&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>    &lt;/xsl:element&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      select="following-sibling::*[&amp;dbselfblocks;][1]"/&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:para/*|d:para/text()" mode="copy"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:copy-of select="."/&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="not(following-sibling::node()[1][&amp;dbselfblocks;])"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="following-sibling::node()[1]"
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>        mode="copy"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.remove-blocks-in-para.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>Some discussion about problem and solution.</p>
               </section>
            </section>
            <section id="dbc.structure.adding-indexterms" class="section">
               <div class="section-titlepage">
                  <h3>3.11. Adding Index Entries (Semi-)Automatically<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.structure.adding-indexterms.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to add index entries (also known as
                     <code class="tag-element">indexterm</code>s) automatically into your document. 
                  </p>
               </section>
               <section id="dbc.structure.adding-indexterms.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>To see how the automatic addition works, the following
                     procedure demonstrate this for the element
                     <code class="tag-element">envar</code>.
                  </p>
                  <figure id="dbc.structure.adding-indexterms.4.3" class="procedure-wrapper">
                     <div class="title">Adding <code class="tag-element">indexterm</code> Elements to <code class="tag-element">envar</code></div>
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Use the element <code class="tag-element">envar</code> in your document as
                                    usual. By default all <code class="tag-element">envar</code> elements get an
                                    <code class="tag-element">indexterm</code>. In cases you do not want this, add the
                                    attribute <code class="tag-attribute">condition</code> with its
                                    value <code class="tag-attvalue">noindex</code> to suppress
                                    indexterm generation. This is done in the second
                                    <code class="tag-element">para</code> element:
                                 </p>
                                 <figure id="ex.profile-envar.xml" class="example-wrapper">
                                    <div class="title">Example 3.15. <code class="filename">profile-envar.xml</code></div>
                                    <div class="example">
                                       <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;article  version="5.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;title&gt;Profiling Test&lt;/title&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar&gt;XML_CATALOG_FILES&lt;/envar&gt;&lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar condition="noindex"&gt;FOO&lt;/envar&gt;&lt;/para&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar os="windows"&gt;Path&lt;/envar&gt;&lt;envar 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    os="linux"&gt;PATH&lt;/envar&gt;&lt;/para&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>&lt;/article&gt;</pre></div>
                                    </div>
                                 </figure>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Create a stylesheet <code class="filename">profile-tags.xsl</code>
                                    with the following content:
                                 </p>
                                 <figure id="ex.profile-tag.xsl" class="example-wrapper">
                                    <div class="title">Example 3.16. <code class="filename">profile-tag.xsl</code></div>
                                    <div class="example">
                                       <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:param name="preferred"&gt;pref&lt;/xsl:param&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>&lt;xsl:template name="check.index"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="node" select="."/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="default" select="1"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$node/@condition = 'noindex'"&gt;0&lt;/xsl:when&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>      &lt;xsl:when test="$node/@condition = 'index'"&gt;1&lt;/xsl:when&gt;    
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:otherwise&gt;&lt;xsl:value-of select="$default"/&gt;&lt;/xsl:otherwise&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>    &lt;/xsl:choose&gt;  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:template match="d:footnote|d:title|d:indexterm" mode="profile"&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>  &lt;!-- Indexterms doesn't/shouldn't occur in the descendants of
<span class="linenumber">   </span><span class="linenumber-separator"> </span>       these elements so just copy it --&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>  &lt;xsl:copy-of select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:template match="d:envar" mode="profile"&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="do.index"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="check.index"/&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>    &lt;/xsl:variable&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>    &lt;!-- Copy original element --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:copy-of select="."/&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$do.index != 0"&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>      &lt;indexterm&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;primary&gt;&lt;xsl:value-of select="."/&gt;&lt;/primary&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;indexterm&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="contains(@conformance, $preferred)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>           &lt;xsl:attribute name="significance"&gt;preferred&lt;/xsl:attribute&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;primary&gt;environment variables&lt;/primary&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>        &lt;secondary&gt;&lt;xsl:value-of select="."/&gt;&lt;/secondary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                                    </div>
                                 </figure>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Create the stylesheet
                                    <code class="filename">add-indexterms.xsl</code>. This stylesheet is
                                    based on <code class="filename">profile.xsl</code> of the DocBook XSL
                                    stylesheets. It contains the special mode
                                    <code class="literal">profile</code> to process elements to observe
                                    profiling conditions.
                                 </p>
                                 <figure id="dbc.structure.adding-indexterms.4.3.4.2" class="example-wrapper">
                                    <div class="title">Example 3.17. <code class="filename">add-indexterms.xsl</code></div>
                                    <div class="example">
                                       <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet
<span class="linenumber">   </span><span class="linenumber-separator"> </span>[
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;!ENTITY db "http://docbook.sourceforge.net/release/xsl-ns/current"&gt; 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" &gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:import href="&amp;db;/profiling/profile.xsl"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>&lt;xsl:output indent="yes" method="xml"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:include href="profile-tags.xsl"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                                    </div>
                                 </figure>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Transform your document:</p>
                                 <div class="screen"><pre><strong class="command">xsltproc</strong> add-indexterms.xsl profile-envar.xml</pre></div>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
                  <p>After applying the stylesheet
                     <code class="filename">add-indexterms.xsl</code> you will get the
                     following output:
                  </p>
                  <figure id="dbc.structure.adding-indexterms.4.5" class="example-wrapper">
                     <div class="title">Example 3.18. Output of the Transformation</div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;article xmlns="http://docbook.org/ns/docbook" version="5.0"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;title&gt;Profiling Test&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar&gt;XML_CATALOG_FILES&lt;/envar&gt;&lt;indexterm&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;primary&gt;XML_CATALOG_FILES&lt;/primary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/indexterm&gt;&lt;indexterm&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;primary&gt;environment variables&lt;/primary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;secondary&gt;XML_CATALOG_FILES&lt;/secondary&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>    &lt;/indexterm&gt;&lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar condition="noindex"&gt;FOO&lt;/envar&gt;&lt;/para&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;para&gt;Environment variable &lt;envar os="windows"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &gt;Path&lt;/envar&gt;&lt;indexterm&gt;&lt;primary&gt;Path&lt;/primary&gt;&lt;/indexterm&gt;&lt;indexterm&gt;&lt;primary&gt;environment
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>        variables&lt;/primary&gt;&lt;secondary&gt;Path&lt;/secondary&gt;&lt;/indexterm&gt;&lt;envar
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      os="linux"
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>      &gt;PATH&lt;/envar&gt;&lt;indexterm&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;primary&gt;PATH&lt;/primary&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;&lt;indexterm&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;primary&gt;environment variables&lt;/primary&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>        &lt;secondary&gt;PATH&lt;/secondary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;&lt;/para&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>&lt;/article&gt;</pre></div>
                     </div>
                  </figure>
               </section>
               <section id="dbc.structure.adding-indexterms.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>Let´s go back at the beginning first. Assume you want to show
                     an environment variable in the index. Usually you would mark up
                     the text with the <code class="tag-element">envar</code> element and add an
                     <code class="tag-element">indexterm</code> right after the first one. As is is useful
                     to find the index term also under the primary term
                     “<span class="quote">environment variables</span>”, you add an additional
                     <code class="tag-element">indexterm</code>. This could look like this:
                  </p>
                  <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;para&gt;Use the &lt;envar&gt;PATH&lt;/envar&gt;&lt;indexterm&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>        &lt;primary&gt;PATH&lt;/primary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;&lt;indexterm&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>        &lt;primary&gt;environment variables&lt;/primary&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;secondary&gt;PATH&lt;/secondary&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>      &lt;/indexterm&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      to do ...
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>&lt;/para&gt;</pre></div>
                  <p>Although this is the usual method, it has some
                     drawbacks:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <div class="formalpara">
                              <p><b>It is hard to read</b>  If you are get used to read the bare XML code, it is
                                 hard to read as the text is broken into pieces. The text is
                                 cluttered with <code class="tag-element">indexterm</code> elements all
                                 along.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>It may be inconsistent</b>  If you forgot the “<span class="quote">s</span>” in the primary index
                                 term it will lead to double entries (one singular and one
                                 plural form). This lead to inconsistencies. It can be
                                 painful if you have to go through the complete document just
                                 to fix the singular form into the plural form (or vice
                                 versa).
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Whitespace could matter</b>  The <code class="tag-element">indexterm</code> element(s) start
                                 <em>directly</em> after your term. If you or
                                 your editor introduces one or more whitespaces after your
                                 dedicated index term, in the worst case it could lead to a
                                 wrong page number in the index. This mainly affects the PDF
                                 rather than any online formats but could confuse your
                                 readers.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <p>All of the above problems can be solved with the stylesheet
                     from <a href="#ex.profile-tag.xsl">Example 3.16, “<code class="filename">profile-tag.xsl</code>”</a>. It exploits the DocBook
                     XSL stylesheet´s profiling mechanism. Normally, profiling is a
                     method to <em>remove</em> certain structures from a
                     document rather than <em>add</em> something. In our
                     case we use the special <code class="literal">profile</code> mode to
                     customize the automatic index term addition.
                  </p>
                  <p>With the above stylesheet, it is possible to influence how
                     your index terms appear. This is done with the
                     <code class="tag-attribute">condition</code><sup class="footnote"><span class="osq">[</span><a name="dbc.structure.adding-indexterms.5.7.2"
                           href="#ftn.dbc.structure.adding-indexterms.5.7.2">7</a><span class="csq">]</span></sup> attribute, demonstrated on our <code class="tag-element">envar</code>
                     example:
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><code class="tag-starttag">&lt;envar&gt;</code>…<code class="tag-endtag">&lt;/envar&gt;</code></span></dt>
                        <dd>
                           <p>Adds the <code class="tag-element">indexterm</code>s directly after the
                              <code class="tag-element">envar</code> element.
                           </p>
                        </dd>
                        <dt><span class="term"><code class="tag-starttag">&lt;envar condition="index"&gt;</code>…<code class="tag-endtag">&lt;/envar&gt;</code></span></dt>
                        <dd>
                           <p>Same as the previous entry.</p>
                        </dd>
                        <dt><span class="term"><code class="tag-starttag">&lt;envar condition="noindex"&gt;</code>…<code class="tag-endtag">&lt;/envar&gt;</code></span></dt>
                        <dd>
                           <p>Suppresses any automatic generation of index entries.</p>
                        </dd>
                        <dt><span class="term"><code class="tag-starttag">&lt;envar condition="pref"&gt;</code>…<code class="tag-endtag">&lt;/envar&gt;</code></span></dt>
                        <dd>
                           <p>Adds an <em>preferred</em> index entry. The
                              keyword “<span class="quote">pref</span>” can be customized through the 
                              <em class="parameter"><code>preferred</code></em> parameter. If the keyword
                              is added in the <code class="tag-attribute">condition</code>
                              attribute, the following code is created:
                           </p>
                           <div class="programlisting"><pre class="xml">&lt;indexterm significance="preferred"&gt;...&lt;/indexterm&gt;</pre></div>
                        </dd>
                     </dl>
                  </div>
                  <p>This method can not solve all index problems. You should know
                     some of its limits:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <div class="formalpara">
                              <p><b>Document Type</b>  Technical documents are more applicable than novels as
                                 the former contains usually a set of elements which are
                                 consistently used. 
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Consistent Elements</b>  The document needs not only consistently use the same
                                 elements for the same structure, it has to use a specific
                                 element in the first place. For example, if you want to show
                                 your configuration files in your index, you need to mark
                                 it up with <code class="tag-element">filename</code>, otherwise this method has no
                                 chance.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Needed Elements</b>  Similar to the previous point, you have to know which
                                 elements you need to show up in the index. You have to
                                 select from all possible inline elements only a handful
                                 which you consider important enough.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Only for Inline Elements</b>  This method works only for inline elements well.
                                 DocBook´s inline elements occur usually inside a paragraph
                                 but can also show up in a title.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Hard-coded Primary Entry</b>  It can be critized to add hard-coded text into the
                                 stylesheet <code class="filename">profile-tag.xsl</code> (here:
                                 “<span class="quote">environment variables</span>”). If you maintain 
                                 different languages, you should replace it with a more
                                 general solution and move the language specific text into
                                 language files as described in <a href="#dbc.common.l10n">Section 2.5, “Extending Language Files with Your Own Text”</a>.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <p>Although this method does not replace hand-written index
                     entries, it can ease the pain. Especially for those entries which
                     can be be inserted automatically it improves consistency. The
                     method described above can also implemented for other inline
                     elements, like persons, functions, etc.
                  </p>
               </section>
            </section>
            <section id="dbc.structure.revision-list" class="section">
               <div class="section-titlepage">
                  <h3>3.12. Including Revision Information from Version Control Systems<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.structure.revision-list.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to include revision information into your DocBook
                     document from your version control systems, like Bazaar, Subversion,
                     Mercurial, Git, and others.
                  </p>
               </section>
               <section id="dbc.structure.revision-list.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Usually, the solution for each version control system is to
                     output its log into its specific XML output and transform it with
                     XSLT into a <code class="tag-element">revhistory</code> element. 
                  </p>
                  <section id="sec.structure.revision-list.bazaar" class="section">
                     <div class="section-titlepage">
                        <h5>Bazaar</h5>
                     </div>
                     <p><span class="application"><a href="http://bazaar.canonical.com">Bazaar</a></span>
                        does not come with a predefined XML output. If you need this
                        functionality, you have to install the
                        <span class="package">xmloutput</span> plugin first. This brings the
                        <code class="option">--xml</code> option to the <strong class="command">log</strong>
                        subcommand. Proceed as follows:
                     </p>
                     <figure id="sec.structure.revision-list.bazaar.3" class="procedure-wrapper">
                        <div class="title">Installing the Bazaar Plugin xmloutput</div>
                        <div class="procedure">
                           <ol type="1">
                              <li class="step">
                                 <div>
                                    <p>Download the tar archive from <a href="http://wiki.bazaar.canonical.com/XMLOutput">http://wiki.bazaar.canonical.com/XMLOutput</a>.
                                    </p>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Unpack the archive.</p>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Change to the extension directory (usually something
                                       like
                                       <code class="filename">bzr-xmloutput-<em class="replaceable"><code>VERSION</code></em></code>)
                                       and run:
                                    </p>
                                    <div class="screen"><pre><strong class="command">python</strong> setup build_ext</pre></div>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Copy the result directory <code class="filename">build/lib/bzrlib/plugins/xmloutput/</code> to your
                                       plugin directory. For Linux it is something like <code class="filename">$HOME/.bazaar/plugins/</code>, for
                                       Windows copy it to <code class="filename">$APPDATA/bazaar/<em class="replaceable"><code>VERSION</code></em>/plugins</code></p>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Check if the plugin is correctly detected:</p>
                                    <div class="screen"><pre><strong class="command">bzr</strong> plugins</pre></div>
                                    <p>You should see the following line:</p>
                                    <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>xmloutput <em class="replaceable"><code>VERSION</code></em>
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>    This plugin adds an option (--xml) to log and provides an xml version of 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    some built-in commands.</pre></div>
                                 </div>
                              </li>
                           </ol>
                        </div>
                     </figure>
                     <p>After you have successully installed the plugin, create the 
                        log output in XML with the following command:
                     </p>
                     <div class="screen"><pre><strong class="command">bzr</strong> log --xml <em class="replaceable"><code>REPO</code></em> &gt; bzr-log.xml</pre></div>
                     <p>To convert the previous log file into DocBook's
                        <code class="tag-element">revhistory</code>, use the following stylesheet:
                     </p>
                     <figure id="sec.structure.revision-list.bazaar.7" class="example-wrapper">
                        <div class="title">Example 3.19. Stylesheet to Convert Bazaar's Log File</div>
                        <div class="example">
                           <div class="programlisting"><pre>TBD</pre></div>
                        </div>
                     </figure>
                  </section>
                  <section id="sec.structure.revision-list.git" class="section">
                     <div class="section-titlepage">
                        <h5>Git</h5>
                     </div>
                     <p><span class="application"><a href="http://git-scm.com">Git</a></span> does not have any options to turn the log
                        into XML. However, with the <code class="option">--pretty</code> option you
                        can collect the information and wrap it into any XML elements
                        you wish. The following command uses this option and
                        <strong class="command">sed</strong> to insert the <code class="tag-starttag">&lt;logs&gt;</code> start tag in the first line and <code class="tag-endtag">&lt;/logs&gt;</code> end tag in the last line:
                     </p>
                     <div class="screen"><pre><strong class="command">git</strong> log --date=iso --pretty=format:"&lt;logentry revision='%h'&gt;%n &lt;author email='%ae'&gt;%an&lt;/author&gt;%n &lt;date&gt;%ad&lt;/date&gt;%n &lt;msg xml:space='preserve'&gt;%s&lt;/msg&gt;%n&lt;/logentry&gt;" \
  | sed -e '1i&lt;logs&gt;' -e '$a&lt;/logs&gt;' &gt; git-log.xml</pre></div>
                     <p>As the element names can be freely chosen, we use the same
                        names as in <a href="#ex.mercurial-logfile">Example 3.20, “Mercurial Log File in XML”</a>. This allows
                        us to use the stylesheet from <a href="#ex.hg2revhistory.xsl">Example 3.21, “Stylesheet <code class="filename">hg2revhistory.xsl</code> to Convert
                           Mercurial XML Log Files into  DocBook's <code class="tag-element">revhistory</code>”</a>. 
                     </p>
                  </section>
                  <section id="sec.structure.revision-list.mercurial" class="section">
                     <div class="section-titlepage">
                        <h5>Mercurial</h5>
                     </div>
                     <p><span class="application"><a href="http://mercurial.selenic.com">Mercurial</a></span>
                        has the <code class="option">--style</code> option to output its log into
                        XML:
                     </p>
                     <div class="screen"><pre><strong class="command">hg</strong> log --style xml &gt; hg-log.xml</pre></div>
                     <p>The XML file of the Mercurial log looks like this:</p>
                     <figure id="ex.mercurial-logfile" class="example-wrapper">
                        <div class="title">Example 3.20. Mercurial Log File in XML</div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;log&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;logentry revision="69"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    node="dfadd024594c4083362fe6919264362803dcd285"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;tag&gt;tip&lt;/tag&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;author email="tux@example.de"&gt;Tux Penguin&lt;/author&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;date&gt;2011-05-22T01:56:21+02:00&lt;/date&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;msg xml:space="preserve"&gt;Corrected xml:id attribute&lt;/msg&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>    &lt;paths&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;path action="M"&gt;xml/structure/topic.extract-element.xml&lt;/path&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;/paths&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/logentry&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;logentry revision="68"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    node="833287df8943d0bab5ec65ec8aafe5bc42002289"&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;author email="wilber@example.de"&gt;Wilber Gimp&lt;/author&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;date&gt;2011-05-22T01:56:03+02:00&lt;/date&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>    &lt;msg xml:space="preserve"&gt;Changed chapter title&lt;/msg&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;paths&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>      &lt;path action="M"&gt;xml/structure/topic.revision-list.xml&lt;/path&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/paths&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>  &lt;/logentry&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Many more entries ... --&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>&lt;/log</pre></div>
                        </div>
                     </figure>
                     <p>The following stylesheet converts the log file from <a href="#ex.mercurial-logfile">Example 3.20, “Mercurial Log File in XML”</a> into DocBook's
                        <code class="tag-element">revhistory</code>:
                     </p>
                     <figure id="ex.hg2revhistory.xsl" class="example-wrapper">
                        <div class="title">Example 3.21. Stylesheet <code class="filename">hg2revhistory.xsl</code> to Convert
                           Mercurial XML Log Files into  DocBook's <code class="tag-element">revhistory</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet
<span class="linenumber">   </span><span class="linenumber-separator"> </span>[
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;!ENTITY dbns "http://docbook.org/ns/docbook"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:output method="xml" indent="yes"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="include.paths" select="1"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="include.copies" select="1"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="log"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;revhistory xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/revhistory&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="logentry"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;revhistory xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates select="@revision|*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/revhistory&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="logentry/@revision"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;revnumber xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/revnumber&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="tag"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;revremark xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/revremark&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="date"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;date xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>      &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/date&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="author"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="firstname" select="substring-before(., ' ')"/&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="surname" select="substring-after(., ' ')"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;author xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>      &lt;personname&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;firstname&gt;&lt;xsl:value-of select="$firstname"/&gt;&lt;/firstname&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>        &lt;!--&lt;othername&gt;&lt;/othername&gt;--&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;surname&gt;&lt;xsl:value-of select="$surname"/&gt;&lt;/surname&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>      &lt;/personname&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;email&gt;&lt;xsl:value-of select="@email"/&gt;&lt;/email&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>    &lt;/author&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="msg"&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>    &lt;revdescription xmlns="&amp;dbns;"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;para&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/para&gt;
<span class="linenumber"> 62</span><span class="linenumber-separator"> </span>    &lt;/revdescription&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 64</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="paths"&gt;
<span class="linenumber"> 66</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$include.paths != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;itemizedlist xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 68</span><span class="linenumber-separator"> </span>        &lt;title&gt;Paths&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates/&gt;
<span class="linenumber"> 70</span><span class="linenumber-separator"> </span>      &lt;/itemizedlist&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber"> 72</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 74</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="path"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;listitem xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 76</span><span class="linenumber-separator"> </span>      &lt;para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates select="@action|text()"/&gt;
<span class="linenumber"> 78</span><span class="linenumber-separator"> </span>      &lt;/para&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/listitem&gt;    
<span class="linenumber"> 80</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 82</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="path/@action"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt;[&lt;/xsl:text&gt;
<span class="linenumber"> 84</span><span class="linenumber-separator"> </span>    &lt;xsl:value-of select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt;] &lt;/xsl:text&gt;
<span class="linenumber"> 86</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="path/text()"&gt;
<span class="linenumber"> 88</span><span class="linenumber-separator"> </span>    &lt;filename xmlns="&amp;dbns;"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="."/&gt;
<span class="linenumber"> 90</span><span class="linenumber-separator"> </span>    &lt;/filename&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 92</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="copyies"&gt;
<span class="linenumber"> 94</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$include.paths != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;listitem xmlns="&amp;dbns;"&gt;
<span class="linenumber"> 96</span><span class="linenumber-separator"> </span>        &lt;title&gt;Copies&lt;/title&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;para&gt;
<span class="linenumber"> 98</span><span class="linenumber-separator"> </span>          &lt;xsl:apply-templates select="@*|text()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/para&gt;
<span class="linenumber">100</span><span class="linenumber-separator"> </span>      &lt;/listitem&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">102</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="copy"&gt;
<span class="linenumber">104</span><span class="linenumber-separator"> </span>    &lt;listitem xmlns="&amp;dbns;"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;para&gt;
<span class="linenumber">106</span><span class="linenumber-separator"> </span>        &lt;xsl:apply-templates select="@*|text()"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/para&gt;
<span class="linenumber">108</span><span class="linenumber-separator"> </span>    &lt;/listitem&gt;    
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">110</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="copy/@source"&gt;
<span class="linenumber">112</span><span class="linenumber-separator"> </span>    &lt;filename xmlns="&amp;dbns;"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="."/&gt;
<span class="linenumber">114</span><span class="linenumber-separator"> </span>    &lt;/filename&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">116</span><span class="linenumber-separator"> </span>  &lt;xsl:template match="copy/text()"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:text&gt; -&gt; &lt;/xsl:text&gt;
<span class="linenumber">118</span><span class="linenumber-separator"> </span>    &lt;filename xmlns="&amp;dbns;"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="."/&gt;
<span class="linenumber">120</span><span class="linenumber-separator"> </span>    &lt;/filename&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">122</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                        </div>
                     </figure>
                  </section>
                  <section id="sec.structure.revision-list.svn" class="section">
                     <div class="section-titlepage">
                        <h5>Subversion</h5>
                     </div>
                     <p><span class="application"><a href="http://subversion.tigris.org">Subversion</a></span>
                        is similar to Mercurial: It has an
                        <code class="option">--xml</code> option to turn the log output into XML:
                     </p>
                     <div class="screen"><pre><strong class="command">svn</strong> log --xml &gt; svn-log.xml</pre></div>
                     <p>With the <code class="option">-v</code> option (verbose) you get
                        additional path information. As the output is very similar to
                        Mercurial, you can apply the stylesheet shown in <a href="#ex.hg2revhistory.xsl">Example 3.21, “Stylesheet <code class="filename">hg2revhistory.xsl</code> to Convert
                           Mercurial XML Log Files into  DocBook's <code class="tag-element">revhistory</code>”</a>
                        also for Subversion's log file.
                        
                     </p>
                     <p>As an alternative, the DocBook Subversion repository (see
                        <a href="https://docbook.svn.sourceforge.net/svnroot/docbook/trunk">https://docbook.svn.sourceforge.net/svnroot/docbook/trunk</a>) contains the XSLT stylesheet
                        <code class="filename">releasetools/svnlog2docbook.xsl</code> with
                        additional features.
                     </p>
                  </section>
               </section>
               <section id="dbc.structure.revision-list.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>
                     <div class="remark">TBD</div>
                  </p>
               </section>
            </section>
            <div class="footnotes">
               <hr width="100" align="left" class="footnotes-divider" />
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.structure.adding-indexterms.5.7.2"
                           name="ftn.dbc.structure.adding-indexterms.5.7.2">7</a><span class="csq">]</span></sup>Theoretically you could use any of the several common
                     attributes available on every DocBook element. The <code class="tag-attribute">condition</code> was the one attribute 
                     that has fitted the best in the authors mind.
                  </p>
               </div>
            </div>
         </article>
         <article id="dbc.fo" class="chapter">
            <header class="chapter-titlepage">
               <h2>Chapter 4. Print Customizations</h2>
               <div class="abstract">
                  <p>The DocBook XSL stylesheets has got more than 200 parameters
                     which can customize some aspects of the layout very easily. This
                     chapter shows you to go beyond simple parameter change.
                  </p>
               </div>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.fo.intro">4.1. Introduction</a></span></li>
                  <li><span><a href="#dbc.fo.cover">4.2. Designing a Title Page</a></span></li>
                  <li><span><a href="#dbc.fo.line-height">4.3. Influencing the Leading</a></span></li>
                  <li><span><a href="#dbc.fo.hyphen-urls">4.4. Hyphenating URLs</a></span></li>
                  <li><span><a href="#dbc.fo.initials">4.5. Creating Initials and Drop Caps</a></span></li>
                  <li><span><a href="#dbc.fo.number-titles">4.6. Numbering Part, Chapter, Appendix, and other Titles</a></span></li>
               </ul>
            </div>
            <section id="dbc.fo.intro" class="section">
               <div class="section-titlepage">
                  <h3>4.1. Introduction</h3>
               </div>
               <p>
                  <div class="remark">TBD</div>
               </p>
            </section>
            <section id="dbc.fo.cover" class="section">
               <div class="section-titlepage">
                  <h3>4.2. Designing a Title Page<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.fo.cover.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to design a title page of your book or
                     article.
                  </p>
               </section>
               <section id="dbc.fo.cover.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>To design your title page there are two ways to do it,
                     regardless if it is a book or an article:
                  </p>
                  <div class="orderedlist">
                     <ol style="list-style: decimal;">
                        <li>
                           <div class="formalpara">
                              <p><b>Indirectly</b>  Write a title page template which contains the wanted
                                 elements in their respective order.
                              </p>
                           </div>
                        </li>
                        <li>
                           <div class="formalpara">
                              <p><b>Directly</b>  Customize the specific named templates.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
                  <p>Both methods are shown below. Although the following
                     descriptions focus on a book title page, the same procedure can be
                     applied for an article title page as well.
                  </p>
                  <p>For this example, we use the following requisites:</p>
                  <div id="li.fo.cover.rectopage.defs" class="itemizedlist">
                     <div class="title">Recto (Right) Page</div>
                     <p>This is the “<span class="quote">main page</span>” and the content appears
                        in the following order:
                     </p>
                     <ul>
                        <li>
                           <p>the book title, from <code class="code">/book/title</code> or
                              <code class="code">/book/info/title</code></p>
                        </li>
                        <li>
                           <p>the book subtitle, from <code class="code">/book/subtitle</code> or
                              <code class="code">/book/info/subtitle</code></p>
                        </li>
                        <li>
                           <p>the book's author, from
                              <code class="code">/book/info/author</code></p>
                        </li>
                        <li>
                           <p>the edition, from <code class="code">/book/info/edition</code></p>
                        </li>
                     </ul>
                  </div>
                  <div id="li.fo.cover.versopage.defs" class="itemizedlist">
                     <div class="title">Verso (Left) Page</div>
                     <p>This usually holds the imprint and the content appears
                        in the following order:
                     </p>
                     <ul>
                        <li>
                           <p>the book's title and subtitle in a smaller font
                              size
                           </p>
                        </li>
                        <li>
                           <p>the author, from <code class="code">/book/info/author</code></p>
                        </li>
                        <li>
                           <p>the edition, from <code class="code">/book/info/edition</code></p>
                        </li>
                        <li>
                           <p>some legal text (copyright), from
                              <code class="code">/book/info/legalnotice</code></p>
                        </li>
                        <li>
                           <p>the <span title="International Standard Book Number" class="acronym">ISBN</span>, from
                              <code class="code">/book/info/biblioid</code> with <code class="tag-attribute">class</code> and the value <code class="tag-attvalue">isbn</code></p>
                        </li>
                     </ul>
                  </div>
                  <section id="dbc.fo.cover.titlepage.indirectly" class="section">
                     <div class="section-titlepage">
                        <h5>Using Title Page Templates</h5>
                     </div>
                     <p>To create a title page using a title page template proceed
                        as follows:
                     </p>
                     <figure id="dbc.fo.cover.titlepage.indirectly.3" class="procedure-wrapper">
                        <div class="procedure">
                           <ol type="1">
                              <li class="step">
                                 <div>
                                    <p>Prepare the title page template:</p>
                                    <div class="substeps">
                                       <ol type="a">
                                          <li class="step">
                                             <div>
                                                <p>Copy the file
                                                   <code class="filename">fo/titlepage.templates.xml</code> from the
                                                   DocBook XSL stylesheet distribution to a directory where
                                                   all your FO customization is stored. Use the filename
                                                   <code class="filename">booktitlepage.xml</code>.
                                                </p>
                                             </div>
                                          </li>
                                          <li class="step">
                                             <div>
                                                <p>Open the file and remove anything except the
                                                   root and <code class="tag-element">t:titlepage</code> elements with the
                                                   attribute <code class="tag-attribute">t:element="book"</code>.
                                                   Your titlepage template should look like this:
                                                </p>
                                                <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE t:templates [
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize0 "10pt"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize1 "12pt"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize2 "14.4pt"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize3 "17.28pt"&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize4 "20.736pt"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize5 "24.8832pt"&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize0space "7.5pt"&gt; &lt;!-- 0.75 * hsize0 --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize1space "9pt"&gt; &lt;!-- 0.75 * hsize1 --&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize2space "10.8pt"&gt; &lt;!-- 0.75 * hsize2 --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize3space "12.96pt"&gt; &lt;!-- 0.75 * hsize3 --&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize4space "15.552pt"&gt; &lt;!-- 0.75 * hsize4 --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;!ENTITY hsize5space "18.6624pt"&gt; &lt;!-- 0.75 * hsize5 --&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;t:templates xmlns:t="http://nwalsh.com/docbook/xsl/template/1.0"
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>             xmlns:param="http://nwalsh.com/docbook/xsl/template/1.0/param"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             xmlns:fo="http://www.w3.org/1999/XSL/Format"
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>             xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;t:titlepage t:element="book" t:wrapper="fo:block"&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>     &lt;!-- Content disabled for better legibility --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;/t:titlepage&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>&lt;/t:templates&gt;</pre></div>
                                             </div>
                                          </li>
                                       </ol>
                                    </div>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Customize the content of your titlepage and save your
                                       changes into the <code class="filename">booktitlepage.xml</code>
                                       file.
                                    </p>
                                    <div class="substeps">
                                       <ol type="a">
                                          <li class="step">
                                             <div>
                                                <p>Change the recto page and locate the
                                                   <code class="tag-element">t:titlepage-content</code> element with its
                                                   attribute <code class="tag-element">t:side="recto"</code>. As definied in
                                                   <a href="#li.fo.cover.rectopage.defs">Recto (Right) Page</a>, we
                                                   remove everything what is not needed. Additionally we
                                                   have to output edition, which we get from an empty <code class="tag-emptytag">&lt;edition/&gt;</code> tag. The content of the
                                                   <code class="tag-element">t:titlepage-content</code> should look like
                                                   this:
                                                </p>
                                                <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;t:titlepage-content t:side="recto"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;title     t:named-template="division.title"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             param:node="ancestor-or-self::book[1]"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>             text-align="center"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-size="&amp;hsize5;"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>             space-before="&amp;hsize5space;"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-weight="bold"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>             font-family="{$title.fontset}"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;subtitle  text-align="center"
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>             font-size="&amp;hsize4;"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             space-before="&amp;hsize4space;"
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>             font-family="{$title.fontset}"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;author    font-size="&amp;hsize3;"
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>             space-before="&amp;hsize2space;"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             keep-with-next.within-column="always"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>  &lt;edition  font-size="&amp;hsize3;"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/t:titlepage-content&gt;</pre></div>
                                             </div>
                                          </li>
                                          <li class="step">
                                             <div>
                                                <p>Change the verso page and locate the
                                                   <code class="tag-element">t:titlepage-content</code> element with its
                                                   attribute <code class="tag-element">t:side="verso"</code>. As definied in
                                                   <a href="#li.fo.cover.versopage.defs">Verso (Left) Page</a>, again,
                                                   we remove everything what is not needed. The content of
                                                   the <code class="tag-element">t:titlepage-content</code> should look like
                                                   this: 
                                                </p>
                                                <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;t:titlepage-content t:side="verso"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;title     t:named-template="book.verso.title"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-size="&amp;hsize2;"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>             font-weight="bold"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-family="{$title.fontset}"/&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;subtitle  t:named-template="book.verso.title"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-size="&amp;hsize2;"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>             font-weight="bold"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>             font-family="{$title.fontset}"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;author/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;edition/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;legalnotice/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;biblioid  t:predicate="[@class = 'isbn']"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>&lt;/t:titlepage-content&gt;</pre></div>
                                             </div>
                                          </li>
                                          <li class="step">
                                             <div>
                                                <p>Leave the other elements
                                                   (<code class="tag-element">t:titlepage-separator</code> and
                                                   <code class="tag-element">t:titlepage-before</code>) as they are.
                                                </p>
                                             </div>
                                          </li>
                                       </ol>
                                    </div>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Use the <code class="filename">template/titlepage.xsl</code>
                                       stylesheet from the DocBook XSL distribution to transform
                                       your <code class="filename">booktitlepage.xml</code> title page
                                       definition to create the
                                       <code class="filename">booktitlepage.xsl</code> output:
                                    </p>
                                    <div class="screen"><pre><strong class="command">xsltproc</strong> --output booktitlepage.xsl $DB/template/titlepage.xsl booktitlepage.xml</pre></div>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Insert the constructed
                                       <code class="filename">booktitlepage.xsl</code> into your
                                       customization layer <code class="filename">mybooktitlepage.xsl</code>:
                                    </p>
                                    <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:fo="http://www.w3.org/1999/XSL/Format"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="http://docbook.sourceforge.net/release/xsl-ns/current/fo/docbook.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:include href="booktitlepage.xsl"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;!-- More customizations hidden --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                                 </div>
                              </li>
                              <li class="step">
                                 <div>
                                    <p>Build your book as usual with your customization layer.</p>
                                 </div>
                              </li>
                           </ol>
                        </div>
                     </figure>
                  </section>
                  <section id="dbc.fo.cover.titlepage.directly" class="section">
                     <div class="section-titlepage">
                        <h5>Customizing Title Pages Directly</h5>
                     </div>
                     <p>The DocBook XSL stylesheets use named templates to generate
                        a title page. For a book title page, the named templates are
                        called in the following order, starting with
                        <code class="function">book.titlepage</code>:
                     </p>
                     <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>book.titlepage
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  book.titlepage.before.recto
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  book.titlepage.recto
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  book.titlepage.before.verso
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  book.titlepage.verso
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  book.titlepage.separator</pre></div>
                     <p>This partitioning makes it easy to pick and choose</p>
                  </section>
               </section>
               <section id="dbc.fo.cover.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>There are several reason to customize the titlepage of your
                     work:
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>You want a different order of the default elements</p>
                        </li>
                        <li>
                           <p>You want to show or hide different elements</p>
                        </li>
                        <li>
                           <p>You want to insert corporate logos, links, or</p>
                        </li>
                        <li>
                           <p>You want to distinguish between a document in draft or in
                              final state.
                           </p>
                        </li>
                     </ul>
                  </div>
               </section>
               <section id="dbc.fo.cover.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p></p>
               </section>
            </section>
            <section id="dbc.fo.line-height" class="section">
               <div class="section-titlepage">
                  <h3>4.3. Influencing the Leading<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
                  <div class="othercredit">
                     <h3><span class="personname"><span class="firstname">Tony</span> <span class="surname">Graham</span></span></h3>
                  </div>
               </div>
               <section id="dbc.fo.line-height.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want to change the leading between consecutive lines of text.</p>
               </section>
               <section id="dbc.fo.line-height.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Leading is the distance from one baseline to the next, or in
                     other words, the “<span class="quote">interlinear space.</span>” It is not the
                     same as the line height. Unfortunately, the FO specification named
                     the property for influencing the leading
                     <span class="property">line-height</span> which makes it confusing. 
                  </p>
                  <p>The DocBook stylesheets introduce the parameter
                     <em class="parameter"><code>line-height</code></em> with the same name and
                     functionality. It acts as a placeholder for the above
                     <span class="property">line-height</span> property. The following
                     examples do all the same (except for the value <code class="tag-attvalue">normal</code>). It is assumed, you have a base
                     font size of 10pt; negative values in
                     <span class="property">line-height</span> are not allowed:
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><code class="tag-attvalue">normal</code></span></dt>
                        <dd>
                           <p>This is the default value. The real value is set by the
                              formatter and depends on the font size, usually it is a
                              value between 1.0 and 1.2. 
                              <div class="remark">Say more about the real
                                 value
                              </div>
                           </p>
                        </dd>
                        <dt><span class="term">Length</span></dt>
                        <dd>
                           <p>Sets the line height of the respective value:</p>
                           <div class="screen"><pre>&lt;xsl:param name="line-height"&gt;12pt&lt;/xsl:param&gt;</pre></div>
                           <p>The leading is 2pt (12pt − 10pt).</p>
                        </dd>
                        <dt><span class="term">Number</span></dt>
                        <dd>
                           <p>Sets the line height is the result of  the value
                              multiplied by the font size:
                           </p>
                           <div class="screen"><pre>&lt;xsl:param name="line-height"&gt;1.2&lt;/xsl:param&gt;</pre></div>
                        </dd>
                        <dt><span class="term">Percentage</span></dt>
                        <dd>
                           <p>Sets the line height is the result of the percentage
                              value multiplied by the font size:
                           </p>
                           <div class="screen"><pre>&lt;xsl:param name="line-height"&gt;120%&lt;/xsl:param&gt;</pre></div>
                        </dd>
                     </dl>
                  </div>
               </section>
               <section id="dbc.fo.line-height.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>Unfortunately, the situation with line height in FO is a bit more
                     complicated as it first seems. Usually, this is what most people
                     expects:
                  </p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>First line
<span class="linenumber">  2</span><span class="linenumber-separator"> </span> [Gap]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>Second Line
<span class="linenumber">  4</span><span class="linenumber-separator"> </span> [Gap]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>Third Line
<span class="linenumber">  6</span><span class="linenumber-separator"> </span> [Gap]</pre></div>
                  <p>However, the <span class="property">line-height</span> property is a
                     “<span class="quote">half-leading</span>” value which are added before and
                     after a line. This leads to the more realistic picture:
                  </p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span> [1/2 Gap]
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>First line
<span class="linenumber">   </span><span class="linenumber-separator"> </span> [1/2 Gap]
<span class="linenumber">  4</span><span class="linenumber-separator"> </span> [1/2 Gap]
<span class="linenumber">   </span><span class="linenumber-separator"> </span>Second Line
<span class="linenumber">  6</span><span class="linenumber-separator"> </span> [1/2 Gap]
<span class="linenumber">   </span><span class="linenumber-separator"> </span> [1/2 Gap]
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>Third Line
<span class="linenumber">   </span><span class="linenumber-separator"> </span> [1/2 Gap]</pre></div>
                  <p>If the line height is constant in each line, the effect is the
                     same (except at the top or bottom of a reference area). According
                     to the FO specification of <code class="tag-attribute">line-height</code> the FO property is a <em><a href="http://www.w3.org/TR/xsl11/#spacecond">compound
                           datatype</a></em> which has minimum, optimum, maximum, conditionally,
                     and precedence. The minimum, optimum, and maximum constraints are
                     length
                  </p>
                  <p>That said, leading has a direct influence on how easy a text
                     is read. If the value is too small, consecutive lines gets
                     overlapped. If the value is too big, the cohersion of text gets
                     lost. Most text requires positive leading. Usually 9pt/11pt,
                     10pt/12pt, 11pt/13pt, and 12pt/15pt are the most common (the two
                     values depicting the font size and line height).
                  </p>
                  <p>According to <span class="personname"><span class="firstname">Robert</span> <span class="surname">Bringhurst</span></span> in his book
                     <em class="citetitle">The Elements of Typographic Style</em> he
                     recommends more lead in the following situations (cited from his
                     book from page 37):
                  </p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>Dark faces need more lead than light ones</p>
                        </li>
                        <li>
                           <p>Large-bodied faces need more lead than smaller-bodied ones</p>
                        </li>
                        <li>
                           <p>Unserifed faces often need more lead (or a shorter line)
                              than their serifed counterparts
                           </p>
                        </li>
                        <li>
                           <p>Text with thickened by superscripts, subscripts,
                              mathematical expressions, or the frequent use of full
                              capitals
                           </p>
                        </li>
                     </ul>
                  </div>
               </section>
               <section id="dbc.fo.line-height.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><a href="http://en.wikipedia.org/wiki/Leading">http://en.wikipedia.org/wiki/Leading</a>, the Wikipedia
                              article about leading
                           </p>
                        </li>
                        <li>
                           <p><a href="http://www.w3.org/TR/xsl11/#line-height">http://www.w3.org/TR/xsl11/#line-height</a>, the
                              definition of line-height in the XSL-FO specification
                           </p>
                        </li>
                        <li>
                           <p><a href="http://old.nabble.com/Line-height-vs.-line-spacing-td30185507.html">http://old.nabble.com/Line-height-vs.-line-spacing-td30185507.html</a>, the answer from <span class="personname"><span class="firstname">Tony</span> <span class="surname">Graham</span></span> about the question “<span class="quote">Line height vs. line
                                 spacing</span>” which influenced this topic
                           </p>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
            <section id="dbc.fo.hyphen-urls" class="section">
               <div class="section-titlepage">
                  <h3>4.4. Hyphenating URLs<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.fo.hyphen-urls.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You have URLs or paths which you want to hyphenate correctly.
                     The URLs have to break on slashes or other characters only, but
                     not between words.
                  </p>
               </section>
               <section id="dbc.fo.hyphen-urls.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>The hyphenation of URLs in the DocBook stylesheets are
                     controlled by two parameters: <em class="parameter"><code><a href="http://docbook.sourceforge.net/release/xsl/current/doc/fo/ulink.hyphenate.html">ulink.hyphenate</a></code></em> and <em class="parameter"><code><a href="http://docbook.sourceforge.net/release/xsl/current/doc/fo/ulink.hyphenate.chars.html">ulink.hyphenate.chars</a></code></em>. The first
                     parameter, if not empty, turns on hyphenation. Specify a
                     hyphenation character, usually either a Unicode soft hyphen
                     (U+00AD) or a Unicode zero-width space (U+200B). 
                  </p>
                  <p>The second parameter,
                     <em class="parameter"><code>ulink.hyphenate.chars</code></em>, let you define
                     your allowable hyphenation points. The default value is a slash
                     (/), but URLs can contain more characters where it is desirable to
                     hyphenate. For this reason, the DocBook parameter reference recommends the
                     following value: 
                  </p>
                  <div class="screen"><pre>&lt;xsl:param name="ulink.hyphenate.chars"&gt;:/@&amp;?.#&lt;/xsl:param</pre></div>
               </section>
               <section id="dbc.fo.hyphen-urls.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The easiest way is to set the parameters
                     <em class="parameter"><code>ulink.hyphenate.chars</code></em> and
                     <em class="parameter"><code>ulink.hyphenate</code></em> to the values showed in
                     the last section and be happy. However, for professional needs,
                     this is not enough. The parameters and embedded algorithm
                     do not take into account protocols, for example <code class="systemitem protocol">http</code>. Protocols begin with
                     the schema followed by <code class="literal">://</code> as in
                     <code class="literal">http://</code>. In some situations (although
                     rare), a hyphenation can occur between the double slashes or before
                     the colon. Furthermore, according to the <em class="citetitle">Chicago
                        Manual of Style</em>, it is desirable to distinguish
                     characters <em>before</em> and
                     <em>after</em> the hyphenation takes place.
                  </p>
                  <p>All these requirements are implemented in stylesheet showed in
                     <a href="#ex.hyphenate-url.xsl">Example 4.1, “<code class="filename">hyphenate-url.xsl</code>”</a>. It cuts off the protocol
                     with its <code class="literal">://</code> and iterates through each
                     characters and checks, if it needs to be inserted a hyphenation
                     point before or after it.
                  </p>
                  <figure id="ex.hyphenate-url.xsl" class="example-wrapper">
                     <div class="title">Example 4.1. <code class="filename">hyphenate-url.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    xmlns:fo="http://www.w3.org/1999/XSL/Format"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:template name="hyphenate-url"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="url" select="''"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Remove the "schema://" prefix, so it disturbs not the
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>       algorithm in "hyphenate-url-string" --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:choose&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>   &lt;xsl:when test="$ulink.hyphenate = ''"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="$url"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>   &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;xsl:when test="contains($url, '://')"&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="substring-before($url, '://')"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:text&gt;://&lt;/xsl:text&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>      &lt;xsl:copy-of select="$ulink.hyphenate"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="hyphenate-url-string"&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="url" select="substring-after($url, '://')"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:call-template&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>   &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;xsl:otherwise&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="hyphenate-url-string"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="url" select="normalize-space($url)"/&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>      &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;/xsl:otherwise&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>  &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>&lt;xsl:template name="hyphenate-url-string"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="url" select="''"/&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>  &lt;xsl:variable name="char" select="substring($url, 1,1)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>  &lt;xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;xsl:when test="$url=''"/&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>   &lt;!-- Insert breakpoint _before_ the character --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;xsl:when test="contains($ulink.hyphenate.before.chars, $char)"&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>     &lt;xsl:value-of select="concat($ulink.hyphenate, $char)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     &lt;xsl:call-template name="hyphenate-url-string"&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>       &lt;xsl:with-param name="url" select="substring($url, 2)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     &lt;/xsl:call-template&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>   &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;!-- Insert breakpoint _after_ the character --&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>   &lt;xsl:when test="contains($ulink.hyphenate.after.chars, $char)"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     &lt;xsl:value-of select="concat($char, $ulink.hyphenate)"/&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>     &lt;xsl:call-template name="hyphenate-url-string"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>       &lt;xsl:with-param name="url" select="substring($url, 2)"/&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>     &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;/xsl:when&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>   &lt;xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     &lt;xsl:value-of select="$char"/&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>     &lt;xsl:call-template name="hyphenate-url-string"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>       &lt;xsl:with-param name="url" select="substring($url, 2)"/&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>     &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   &lt;/xsl:otherwise&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>  &lt;/xsl:choose&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <div class="remark">HINT: Runtime behaviour O(n); should not be a problem as
                     URLs are short. Negligible?
                  </div>
                  <p>Include the above stylesheet into your customization layer
                     with additionally the following parameters:
                  </p>
                  <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;!-- Insert breakpoint /before/ the following characters: --&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:param name="ulink.hyphenate.before.chars"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &gt;.,%?&amp;amp;#\-+{_&lt;/xsl:param&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>&lt;!-- Insert breakpoint /after/ the following characters: --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:param name="ulink.hyphenate.after.chars"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &gt;/:@=};&lt;/xsl:param&gt;</pre></div>
               </section>
            </section>
            <section id="dbc.fo.initials" class="section">
               <div class="section-titlepage">
                  <h3>4.5. Creating Initials and Drop Caps<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.fo.initials.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need a “<span class="quote">drop cap</span>”, or <a href="http://en.wikipedia.org/wiki/Initial">Initial</a>,
                     which is a “<span class="quote">a letter at the beginning of a work, a chapter,
                        or a paragraph that is larger than the rest of the
                        text.</span>”
                  </p>
               </section>
               <section id="dbc.fo.initials.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>Typographically, you have different options to place initials:</p>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p>on the same baseline as the first line of text,</p>
                        </li>
                        <li>
                           <p>as floats, embedded between two or more lines,</p>
                        </li>
                        <li>
                           <p>besides the left margin of the text block without
                              indentation.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>Additionally you can design your initials as graphics, but we
                     will come to this later.
                  </p>
                  <section id="sec.fo.initials.baseline" class="section">
                     <div class="section-titlepage">
                        <h5>Place Initials on the Same Baseline</h5>
                     </div>
                     <p>This is the easiest method to implement. The stylesheet
                        normalizes the text node of the first paragraph, extract the first character
                        and wrap it between an <code class="tag-element">fo:inline</code> element with font
                        size, family, and weight:
                     </p>
                     <figure id="ex.initials-baseline.xsl" class="example-wrapper">
                        <div class="title">Example 4.2. <code class="filename">initials-baseline.xsl</code></div>
                        <div class="example">
                           <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:fo="http://www.w3.org/1999/XSL/Format"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="drop.caps.size"&gt;20pt&lt;/xsl:param&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="drop.caps.font-family" select="$body.font.family"/&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="drop.caps.font-weight"&gt;bold&lt;/xsl:param&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="create.initial"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="initial" select="substring(normalize-space(.),1,1)"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;fo:inline&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;fo:inline font-size="{$drop.caps.size}"
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>        font-weight="{$drop.caps.font-weight}"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        font-family="{$drop.caps.font-family}"&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>        &lt;xsl:copy-of select="$initial"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/fo:inline&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>      &lt;xsl:value-of select="substring(normalize-space(.), 2)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/fo:inline&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                        </div>
                     </figure>
                     <p>To use it, include it into your customization layer. It is
                        usually called in text nodes like the first paragraph from a
                        section which parent is an article:
                     </p>
                     <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>[
<span class="linenumber">  4</span><span class="linenumber-separator"> </span> &lt;!ENTITY db "http://docbook.sourceforge.net/release/xsl-ns/current"&gt; 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="&amp;db;/fo/docbook.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:include href="initials-baseline.xsl"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template match="d:article/d:section/d:para[1]/text()"&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;xsl:call-template name="create.initial"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     <p>It is easy to extend it to chapters, you just have to copy
                        the template and correct the content in the <code class="tag-attribute">match</code> attribute to:
                     </p>
                     <div class="programlisting"><pre>&lt;xsl:template match="d:chapter/d:section/d:para[1]/text()"&gt;</pre></div>
                  </section>
                  <section id="sec.fo.initials.floats" class="section">
                     <div class="section-titlepage">
                        <h5>Implement Initials as Floats</h5>
                     </div>
                     <p>
                        <div class="remark">TBD</div>
                     </p>
                  </section>
                  <section id="sec.fo.initials.margin" class="section">
                     <div class="section-titlepage">
                        <h5>Place Initials in Left Margin</h5>
                     </div>
                     <p>
                        <div class="remark">TBD</div>
                     </p>
                  </section>
               </section>
               <section id="dbc.fo.initials.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The solution described in <a href="#sec.fo.initials.baseline">the section called “Place Initials on the Same Baseline”</a> is in most cases sufficient.
                     However, if the first character is <em>not</em> a
                     letter, any character is incorrectly made an initial.
                  </p>
               </section>
               <section id="dbc.fo.initials.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p>Find information about the property <code class="tag-attribute">line-height</code> in <a href="#dbc.fo.line-height">Section 4.3, “Influencing the Leading”</a>.
                  </p>
               </section>
            </section>
            <section id="dbc.fo.number-titles" class="section">
               <div class="section-titlepage">
                  <h3>4.6. Numbering Part, Chapter, Appendix, and other Titles<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.fo.number-titles.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You want a number in front of your structural elements like
                     <code class="tag-element">appendix</code>, <code class="tag-element">chapter</code>, <code class="tag-element">section</code>,
                     etc.
                  </p>
               </section>
               <section id="sec.fo.number-titles.solution" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>The DocBook XSL stylesheets provide already a decent numbering
                     scheme for high level divisions like parts, appendices, chapters,
                     and references. The most common use is numbering section. If you
                     want to automatically number section titles, set the
                     <em class="parameter"><code>section.autolabel</code></em> parameter either
                     manually or through a customization layer, for example: 
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;xsl:param name="section.autolabel" select="1"/&gt;</pre></div>
               </section>
               <section id="dbc.fo.number-titles.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The DocBook XSL stylesheets contain autolabel parameters for
                     the common elements <code class="tag-element">appendix</code>, <code class="tag-element">chapter</code>,
                     <code class="tag-element">part</code>, <code class="tag-element">preface</code>, <code class="tag-element">qandadiv</code>,
                     <code class="tag-element">reference</code>, and <code class="tag-element">section</code>. These can be set
                     individually to change the numbering of for the same elements. The
                     default values are shown in <a href="#tab.fo.number-titles.autolabel">Table 4.1, “Autolabel Parameters and their Default Values”</a>. 
                  </p>
                  <figure id="tab.fo.number-titles.autolabel" class="table-wrapper">
                     <div class="title">Table 4.1. Autolabel Parameters and their Default Values</div>
                     <div class="table">
                        <table border="0" summary="Table 4.1. Autolabel Parameters and their Default Values"
                               style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                           <colgroup>
                              <col class="tcol1" width="33%" />
                              <col class="tcol2" width="33%" />
                              <col class="tcol3" width="33%" />
                           </colgroup>
                           <thead>
                              <tr>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Parameter</th>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Default</th>
                                 <th style="border-bottom: 0.5pt solid ; ">Example</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>appendix.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">A</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">Appendix A. Python 3</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>chapter.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">1</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">Chapter 1. A Tutorial Introduction</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>part.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">I</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">Part I. The Python Language</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>preface.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">0</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">Prefaces are usually not numbered</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>qandadiv.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">1</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">3.1 Installation Questions</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><em class="parameter"><code>reference.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">I</code></td>
                                 <td style="border-bottom: 0.5pt solid ; ">I. Python Reference</td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; "><em class="parameter"><code>section.autolabel</code></em></td>
                                 <td style="border-right: 0.5pt solid ; "><code class="literal">0</code></td>
                                 <td>Not numbered by default</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </figure>
                  <p>The autolabel parameters can contain the following
                     values:
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term">Value <code class="literal">0</code></span></dt>
                        <dd>
                           <p>A value of zero disables the automatic numbering. For
                              example, if you want to disable automatic numbering for
                              appendix elements, use this:
                           </p>
                           <div class="programlisting"><pre class="xml">&lt;xsl:param name="appendix.autolabel" select="0"/&gt;</pre></div>
                        </dd>
                        <dt><span class="term">Value <code class="literal">1</code></span></dt>
                        <dd>
                           <p>A value of one enables the automatic numbering and uses
                              arabic numerals. For example, section numbering is disabled
                              by default. Use the code in the <a href="#sec.fo.number-titles.solution">Solution</a> section.
                           </p>
                        </dd>
                        <dt><span class="term">String</span></dt>
                        <dd>
                           <p>A string enables a different automatic numbering schema,
                              for example roman numerals. See the following table to get
                              an overview. 
                           </p>
                           <figure id="tab.fo." class="table-wrapper">
                              <div class="title">Table 4.2. Possible Formats for Autolabel Parameters</div>
                              <div class="table">
                                 <table border="0" summary="Table 4.2. Possible Formats for Autolabel Parameters"
                                        style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                                    <colgroup>
                                       <col class="tcol1" width="25%" />
                                       <col class="tcol2" width="25%" />
                                       <col class="tcol3" width="25%" />
                                       <col class="tcol4" width="25%" />
                                    </colgroup>
                                    <thead>
                                       <tr>
                                          <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Value</th>
                                          <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Alternative Value</th>
                                          <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Style</th>
                                          <th style="border-bottom: 0.5pt solid ; ">Example</th>
                                       </tr>
                                    </thead>
                                    <tbody>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">1</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">arabic</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Arabic numerals</td>
                                          <td style="border-bottom: 0.5pt solid ; ">1, 2, 3, 4, …</td>
                                       </tr>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">I</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">upperroman</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Uppercase roman numerals</td>
                                          <td style="border-bottom: 0.5pt solid ; ">I, II, III, IV, …</td>
                                       </tr>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">i</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">lowerroman</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Lowercase roman numerals</td>
                                          <td style="border-bottom: 0.5pt solid ; ">i, ii, iii, iv, …</td>
                                       </tr>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">A</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">upperalpha</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Uppercase letters</td>
                                          <td style="border-bottom: 0.5pt solid ; ">A, B, C, D, …</td>
                                       </tr>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">a</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="literal">loweralpha</code></td>
                                          <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Lowercase letters</td>
                                          <td style="border-bottom: 0.5pt solid ; ">a, b, c, d, …</td>
                                       </tr>
                                       <tr>
                                          <td style="border-right: 0.5pt solid ; "><code class="tag-numcharref">&amp;#x661;</code></td>
                                          <td style="border-right: 0.5pt solid ; "><code class="literal">arabicindic</code></td>
                                          <td style="border-right: 0.5pt solid ; ">Arabic-Indic numerals</td>
                                          <td>١, ٢, ٣, ٤, …</td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                           </figure>
                        </dd>
                     </dl>
                  </div>
                  <p>Mostly you will probably want sections to be numbered
                     including its parent numbering. If you do not touch
                     <em class="parameter"><code>chapter.autolabel</code></em>, use the parameter
                     <em class="parameter"><code>section.label.includes.component.label</code></em>
                     and set it to <code class="literal">1</code>:
                  </p>
                  <div class="programlisting"><pre class="xml">&lt;xsl:param name="section.autolabel" select="1"/&gt;
&lt;xsl:param name="section.label.includes.component.label" select="1"/&gt;</pre></div>
                  <p>With the following parameters you can further customize your 
                     numbering:
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><em class="parameter"><code>component.label.includes.part.label</code></em></span></dt>
                        <dd>
                           <p>Controls if appendix or chapter number labels are
                              prefixed with their contained part label. 
                           </p>
                        </dd>
                        <dt><span class="term"><em class="parameter"><code>label.from.part</code></em></span></dt>
                        <dd>
                           <p>Defines if the components inside a part is renumbered or
                              not. A value of non-zero restarts the chapter number and
                              counts again from one. Use this numbering if you want
                              unambiguous numerals.
                           </p>
                           <p>The value zero (the default) restarts the component
                              number throughout each book.
                           </p>
                        </dd>
                        <dt><span class="term"><em class="parameter"><code>section.autolabel.max.depth</code></em></span></dt>
                        <dd>
                           <p>Controls which sections get a number. By default, all
                              sections are get numbered (default value is
                              <code class="literal">8</code>.) If you want to number only sections
                              at level 1, set the parameter to the value
                              <code class="literal">1</code>.
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <p>Let us assume the following structure in a book:</p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>Part: The Python Language
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  Chapter: A Tutorial Introduction
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     Section: Running Python
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>     Section: Variables
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  Chapter: Lexical Conventions and Syntax
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     Section: Line Structure and Indentation
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>     Section: Identifiers and Reserved Words
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>Part: The Python Library
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  Chapter: Build-In Functions
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>     Section: Build-In Functions and Types
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     Section: Build-In Exceptions
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  Chapter: Python Runtime Services
<span class="linenumber">   </span><span class="linenumber-separator"> </span>     Section: atext
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>     Section: copy</pre></div>
                  <figure id="dbc.fo.number-titles.5.12" class="table-wrapper">
                     <div class="title">Table 4.3. Parameter Combinations</div>
                     <div class="table">
                        <table border="0" summary="Table 4.3. Parameter Combinations"
                               style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; ">
                           <colgroup>
                              <col class="tcol1" width="50%" />
                              <col class="tcol2" width="50%" />
                           </colgroup>
                           <thead>
                              <tr>
                                 <th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Parameters</th>
                                 <th style="border-bottom: 0.5pt solid ; ">Result</th>
                              </tr>
                           </thead>
                           <tbody valign="top">
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">No parameters set, using the default settings</td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    <div class="screen"><pre>I. The Python Language
  1. A Tutorial Introduction
      Running Python
      Variables
  2. Lexical Conventions and Syntax
      Line Structure and Indentation
      Identifiers and Reserved Words
II. The Python Library
  3. Build-In Functions
      Build-In Functions and Types
      Build-In Exceptions
  4. Python Runtime Services
      atext
      copy</pre></div>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                                    <table border="0" summary="Simple list" class="simplelist">
                                       <tr>
                                          <td><span class="member"><code class="literal">section.autolabel=1</code></span></td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    <div class="screen"><pre>I. The Python Language
  1. A Tutorial Introduction
      1. Running Python
      2. Variables
  2. Lexical Conventions and Syntax
      1. Line Structure and Indentation
      2. Identifiers and Reserved Words
II. The Python Library
  3. Build-In Functions
      1. Build-In Functions and Types
      2. Build-In Exceptions
  4. Python Runtime Services
      1. atexit
      2. copy</pre></div>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                                    <table border="0" summary="Simple list" class="simplelist">
                                       <tr>
                                          <td><span class="member"><code class="literal">section.autolabel=1</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">section.label.includes.component.label=1</code></span></td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    <div class="screen"><pre>I. The Python Language
  1. A Tutorial Introduction
      1.1. Running Python
      1.2. Variables
  2. Lexical Conventions and Syntax
      2.1. Line Structure and Indentation
      2.2. Identifiers and Reserved Words
II. The Python Library
  3. Build-In Functions
      3.1. Build-In Functions and Types
      3.2. Build-In Exceptions
  4. Python Runtime Services
      4.1. atexit
      4.2. copy</pre></div>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">
                                    <table border="0" summary="Simple list" class="simplelist">
                                       <tr>
                                          <td><span class="member"><code class="literal">section.autolabel=1</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">section.label.includes.component.label=1</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">component.label.includes.part.label</code></span></td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td style="border-bottom: 0.5pt solid ; ">
                                    <div class="screen"><pre>I. The Python Language
  I.1. A Tutorial Introduction
      I.1.1. Running Python
      I.1.2. Variables
  I.2. Lexical Conventions and Syntax
      I.2.1. Line Structure and Indentation
      I.2.2. Identifiers and Reserved Words
II. The Python Library
  II.3. Build-In Functions
      II.3.1. Build-In Functions and Types
      II.3.2. Build-In Exceptions
  II.4. Python Runtime Services
      II.4.1. atexit
      II.4.2. copy</pre></div>
                                 </td>
                              </tr>
                              <tr>
                                 <td style="border-right: 0.5pt solid ; ">
                                    <table border="0" summary="Simple list" class="simplelist">
                                       <tr>
                                          <td><span class="member"><code class="literal">section.autolabel=1</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">section.label.includes.component.label=1</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">component.label.includes.part.label</code></span></td>
                                       </tr>
                                       <tr>
                                          <td><span class="member"><code class="literal">label.from.part=1</code></span></td>
                                       </tr>
                                    </table>
                                 </td>
                                 <td>
                                    <div class="screen"><pre>I. The Python Language
  I.1. A Tutorial Introduction
      I.1.1. Running Python
      I.1.2. Variables
  I.2. Lexical Conventions and Syntax
      I.2.1. Line Structure and Indentation
      I.2.2. Identifiers and Reserved Words
II. The Python Library
  II.1. Build-In Functions
      II.1.1. Build-In Functions and Types
      II.1.2. Build-In Exceptions
  II.2. Python Runtime Services
      II.2.1. atexit
      II.2.2. copy</pre></div>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                  </figure>
                  <p>However, when dealing with other numbering systems, the above
                     parameters are not enough. To support, for example, Japanese numbering,
                     you need to customize the named template
                     <code class="function">autolabel.format</code> from
                     <code class="filename">common/labels.xsl</code>.
                  </p>
                  <figure id="dbc.fo.number-titles.5.14" class="example-wrapper">
                     <div class="title">Example 4.3. Extending <code class="function">autolabel.format</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:template name="autolabel.format"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="context" select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="format"/&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:choose&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;xsl:when test="string($format) != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:choose&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="string($format)='001'"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="$format"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:when test="$format='loweralpha' or $format='a'"&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="'a'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="$format='lowerroman' or $format='i'"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="'i'"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:when test="$format='upperalpha' or $format='A'"&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="'A'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>        &lt;xsl:when test="$format='upperroman' or $format='I'"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="'I'"/&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:when test="$format='arabicindic' or $format='١'"&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>          &lt;xsl:value-of select="'١'"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:when&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>        <strong class="emphasis">&lt;xsl:when test="$format='japanese' or $format='&amp;#x4e00;'"&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span><strong class="emphasis">          &lt;xsl:value-of select="'&amp;#x4e00;'"/&gt;</strong>
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span><strong class="emphasis">        &lt;/xsl:when&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:otherwise&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>          &lt;xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;Unexpected &lt;/xsl:text&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="local-name(.)"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;.autolabel value: &lt;/xsl:text&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>            &lt;xsl:value-of select="$format"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;; using default.&lt;/xsl:text&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>          &lt;/xsl:message&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:call-template name="default.autolabel.format"/&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>        &lt;/xsl:otherwise&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/xsl:choose&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>    &lt;/xsl:when&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:choose&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;</pre></div>
                     </div>
                  </figure>
                  <p>Unfortunately, the <strong class="command">xsltproc</strong> processor does
                     not support this currently (as in version 1.1.24). Only Saxon does
                     it correct.
                  </p>
               </section>
               <section id="dbc.fo.number-titles.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <div class="itemizedlist">
                     <ul>
                        <li>
                           <p><a href="http://www.sagehill.net/docbookxsl/SectionNumbering.html">http://www.sagehill.net/docbookxsl/SectionNumbering.html</a></p>
                        </li>
                        <li>
                           <p><a href="http://en.wikipedia.org/wiki/Category:Numerals">http://en.wikipedia.org/wiki/Category:Numerals</a></p>
                        </li>
                     </ul>
                  </div>
               </section>
            </section>
         </article>
         <article id="dbc.html" class="chapter">
            <header class="chapter-titlepage">
               <h2>Chapter 5. (X)HTML Customizations</h2>
               <div class="abstract">
                  <p>HTML is a very important output format for the DocBook XSL
                     stylesheets as it is not only displayed on Web sites, but also
                     used “<span class="quote">inside</span>” ebooks (<span title="Electronic&#xA;          PUBlication" class="acronym">EPUB</span>). It comes in several derivates.
                  </p>
               </div>
            </header>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <ul class="toc">
                  <li><span><a href="#dbc.html.intro">5.1. Introduction</a></span></li>
                  <li><span><a href="#dbc.html.permalinks">5.2. Creating Permalinks</a></span></li>
                  <li><span><a href="#dbc.html.texinfo-navig">5.3. Creating Simple Navigation in Chapters</a></span></li>
               </ul>
            </div>
            <section id="dbc.html.intro" class="section">
               <div class="section-titlepage">
                  <h3>5.1. Introduction</h3>
               </div>
               <p>Currently, there are several HTML derivates available as
                  target formats. As such, “<span class="quote">the</span>” HTML 
               </p>
               <div class="variablelist">
                  <dl>
                     <dt><span class="term"><code class="filename">html</code></span></dt>
                     <dd>
                        <p>Contains stylesheets for the “<span class="quote">classical</span>”
                           HTML version 4.x.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">htmlhelp</code></span></dt>
                     <dd>
                        <p>Contains stylesheets for HTMLHelp, the standard help
                           system from Windows 3.0 through Windows XP. The main
                           stylesheet <code class="filename">htmlhelp.xsl</code> uses code from
                           the HTML 4.x stylesheets. 
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">webhelp</code></span></dt>
                     <dd>
                        <p>Contains the result of the <span title="Google&#xA;                Summer of Code" class="acronym">GSOC</span> 2010.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">website</code></span></dt>
                     <dd>
                        <p>Contains stylesheets to create a “<span class="quote">Web
                              site</span>”.
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">xhtml</code></span></dt>
                     <dd>
                        <p>Contains stylesheets for XHTML version 1.0
                           (“<span class="quote">transitional XHTML</span>”). These stylesheets are
                           generated through a XSLT transformation from the HTML core
                           stylesheets. 
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">xhtml-1_1</code></span></dt>
                     <dd>
                        <p>Contains stylesheets for XHTML version 1.1. Like the one
                           for XHTML, they are generated through a XSLT transformation.
                           In comparison, the XHTML 1.1 omits certain attributes which
                           were allowed in XHTML or HTML. The missing part must be
                           implemented by CSS.
                           The XHTML 1.1 stylesheets are also used for EPUB creation.
                           
                        </p>
                     </dd>
                     <dt><span class="term"><code class="filename">xhtml5</code></span></dt>
                     <dd>
                        <p>Contains stylesheets for HTML 5. These are
                           currently (as of September 2011) pretty new and in
                           development.
                        </p>
                     </dd>
                  </dl>
               </div>
            </section>
            <section id="dbc.html.permalinks" class="section">
               <div class="section-titlepage">
                  <h3>5.2. Creating Permalinks<span class="section-userlevel" title="difficulty: easy">⚑⚐⚐</span></h3>
               </div>
               <section id="dbc.html.permalinks.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>Your need for every appendix, chapter, section, etc. a small
                     hint (often depicted as “<span class="quote">¶</span>”) which points to the
                     division itself. This “<span class="quote">permalink</span>” simplies the
                     retrieval and indentification of such a division.
                  </p>
               </section>
               <section id="dbc.html.permalinks.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>You need an ID attribute on your division (chapter, section,
                     examples, etc.) to make it work. The
                     <code class="filename">permalinks.xsl</code> stylesheet is a named
                     template which expects an <em class="parameter"><code>id</code></em>
                     parameter.
                  </p>
                  <figure id="ex.html.permalinks" class="example-wrapper">
                     <div class="title">Example 5.1. Permalink Stylesheet (<code class="filename">permalinks.xsl</code>)
                     </div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0" 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns="http://www.w3.org/1999/xhtml"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="generate.permalink" select="1"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="permalink.text"&gt;¶&lt;/xsl:param&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="permalink"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;xsl:param name="id"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$generate.permalink != '0'"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;span class="permalink"&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>        &lt;a alt="Permalink" title="Permalink" href="#{$id}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;xsl:copy-of select="$permalink.text"/&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>        &lt;/a&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;/span&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>This is of course not enough. Use the following steps to
                     include it into your customization layers:
                  </p>
                  <figure id="dbc.html.permalinks.4.5" class="procedure-wrapper">
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Create a customization layer as shown in <a href="#dbc.common.dbcustomize">Section 2.3, “Writing Customization Layers”</a>.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Include the stylesheet from <a href="#ex.html.permalinks">Example 5.1, “Permalink Stylesheet (<code class="filename">permalinks.xsl</code>)”</a> into your customization
                                    layer:
                                 </p>
                                 <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  xmlns="http://www.w3.org/1999/xhtml"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;!-- ... --&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  <strong class="emphasis">&lt;xsl:include href="permalinks.xsl"/&gt;</strong>
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Insert one or all of the following codes to include
                                    <code class="function">permalink</code> in their respective
                                    elements:
                                 </p>
                                 <div class="itemizedlist">
                                    <ul>
                                       <li>
                                          <p>For appendices, chapters, prefaces, etc. use the
                                             <code class="function">component.title</code> template:
                                             
                                          </p>
                                          <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:template name="component.title"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="node" select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!-- Some code omitted --&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;xsl:element name="h{$level+1}"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:attribute name="class"&gt;title&lt;/xsl:attribute&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$generate.id.attributes = 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="anchor"&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="node" select="$node"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;xsl:with-param name="conditional" select="0"/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>      &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="$node" mode="object.title.markup"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="allow-anchors" select="1"/&gt;
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    <strong class="emphasis">&lt;xsl:call-template name="permalink"&gt;</strong>
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span><strong class="emphasis">      &lt;xsl:with-param name="id" select="$id"/&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span><strong class="emphasis">      &lt;xsl:with-param name="title" select="title"/&gt;</strong>
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span><strong class="emphasis">    &lt;/xsl:call-template&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:element&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;</pre></div>
                                       </li>
                                       <li>
                                          <p>For figures, examples, procedures, tables, etc. use
                                             the <code class="function">formal.object.heading</code>
                                             template:
                                          </p>
                                          <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:template name="formal.object.heading"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="object" select="."/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="title"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>    &lt;xsl:apply-templates select="$object" mode="object.title.markup"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:with-param name="allow-anchors" select="1"/&gt;
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>    &lt;/xsl:apply-templates&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:param&gt;
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;p class="title"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;b&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>      &lt;xsl:copy-of select="$title"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/b&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="@id"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      <strong class="emphasis">&lt;xsl:call-template name="permalink"&gt;</strong>
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span><strong class="emphasis">        &lt;xsl:with-param name="title" select="$title"/&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span><strong class="emphasis">        &lt;xsl:with-param name="id" select="@id"/&gt;</strong>
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span><strong class="emphasis">      &lt;/xsl:call-template&gt;</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>  &lt;/p&gt;   
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;</pre></div>
                                       </li>
                                       <li>
                                          <p>
                                             <div class="remark">FIXME: What about parts?</div>
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Use your customization layer to transform your DocBook
                                    document into (X)HTML.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
               </section>
               <section id="dbc.html.permalinks.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>
                     <div class="remark">TBD</div>
                  </p>
               </section>
               <section id="dbc.html.permalinks.6" class="section seealso">
                  <div class="section-titlepage">
                     <h4>See Also</h4>
                  </div>
                  <p>
                     <div class="remark">TBD</div>
                  </p>
               </section>
            </section>
            <section id="dbc.html.texinfo-navig" class="section">
               <div class="section-titlepage">
                  <h3>5.3. Creating Simple Navigation in Chapters<span class="section-userlevel" title="difficulty: medium">⚑⚑⚐</span></h3>
               </div>
               <section id="dbc.html.texinfo-navig.3" class="section problem">
                  <div class="section-titlepage">
                     <h4>Problem</h4>
                  </div>
                  <p>You need a simple navigation for your single HTML file. The
                     navigation should contain for each chapter a link to
                     the next and previous chapters including an up link pointing to
                     the enclosing part or book. This is depicted in the following
                     graphic:
                  </p>
                  <div id="dbc.html.texinfo-navig.3.3" class="mediaobject centerimg"><img src="/home/toms/dbcookbook-sf/en/xml/png/simplenavig.png" align="middle" /></div>
               </section>
               <section id="dbc.html.texinfo-navig.4" class="section solution">
                  <div class="section-titlepage">
                     <h4>Solution</h4>
                  </div>
                  <p>The following file defines the named template
                     <code class="function">generate.simple.navigation</code>:
                  </p>
                  <figure id="ex.simple-navigation.xsl" class="example-wrapper">
                     <div class="title">Example 5.2. <code class="filename">simple-navigation.xsl</code></div>
                     <div class="example">
                        <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns="http://www.w3.org/1999/xhtml"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  exclude-result-prefixes="d"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  &lt;xsl:template name="generate.simple.navigation"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:param name="node" select="."/&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="prev" select="$node/preceding-sibling::d:chapter"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="next" select="$node/following-sibling::d:chapter"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>    &lt;xsl:variable name="up"   select="$node/parent::d:*"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>   
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>    &lt;div class="chapter-navigation"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;ul&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="count($next) &gt;0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;li class="next"&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>            &lt;xsl:call-template name="gentext.nav.next"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;: &lt;/xsl:text&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>            &lt;a&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="href"&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>                &lt;xsl:call-template name="href.target"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:with-param name="object" select="$next"/&gt;
<span class="linenumber"> 24</span><span class="linenumber-separator"> </span>                &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber"> 26</span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="$next/d:title"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/a&gt;
<span class="linenumber"> 28</span><span class="linenumber-separator"> </span>          &lt;/li&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber"> 30</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="count($prev) &gt;0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;li class="prev"&gt;
<span class="linenumber"> 32</span><span class="linenumber-separator"> </span>            &lt;xsl:call-template name="gentext.nav.prev"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;: &lt;/xsl:text&gt;
<span class="linenumber"> 34</span><span class="linenumber-separator"> </span>            &lt;a&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="href"&gt;
<span class="linenumber"> 36</span><span class="linenumber-separator"> </span>                &lt;xsl:call-template name="href.target"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:with-param name="object" select="$prev"/&gt;
<span class="linenumber"> 38</span><span class="linenumber-separator"> </span>                &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber"> 40</span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="$prev/d:title"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/a&gt;
<span class="linenumber"> 42</span><span class="linenumber-separator"> </span>          &lt;/li&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber"> 44</span><span class="linenumber-separator"> </span>        &lt;xsl:if test="count($up) &gt;0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>          &lt;li class="up"&gt;
<span class="linenumber"> 46</span><span class="linenumber-separator"> </span>            &lt;xsl:call-template name="gentext.nav.up"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;xsl:text&gt;: &lt;/xsl:text&gt;
<span class="linenumber"> 48</span><span class="linenumber-separator"> </span>            &lt;a&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;xsl:attribute name="href"&gt;
<span class="linenumber"> 50</span><span class="linenumber-separator"> </span>                &lt;xsl:call-template name="href.target"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>                  &lt;xsl:with-param name="object" select="$up"/&gt;
<span class="linenumber"> 52</span><span class="linenumber-separator"> </span>                &lt;/xsl:call-template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>              &lt;/xsl:attribute&gt;
<span class="linenumber"> 54</span><span class="linenumber-separator"> </span>              &lt;xsl:value-of select="$up/d:title"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>            &lt;/a&gt;
<span class="linenumber"> 56</span><span class="linenumber-separator"> </span>          &lt;/li&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>        &lt;/xsl:if&gt;
<span class="linenumber"> 58</span><span class="linenumber-separator"> </span>      &lt;/ul&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;/div&gt;
<span class="linenumber"> 60</span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                     </div>
                  </figure>
                  <p>This is not enough, of course. Use the following steps to
                     include it into your customization layers:
                  </p>
                  <figure id="dbc.html.texinfo-navig.4.5" class="procedure-wrapper">
                     <div class="procedure">
                        <ol type="1">
                           <li class="step">
                              <div>
                                 <p>Create a customization layer as shown in <a href="#dbc.common.dbcustomize">Section 2.3, “Writing Customization Layers”</a>.
                                 </p>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Include the stylesheet from <a href="#ex.simple-navigation.xsl">Example 5.2, “<code class="filename">simple-navigation.xsl</code>”</a> into your customization
                                    layer:
                                 </p>
                                 <figure id="ex.db-simple-navigation.xsl" class="example-wrapper">
                                    <div class="title">Example 5.3. <code class="filename">db-simple-navigation.xsl</code></div>
                                    <div class="example">
                                       <div class="programlisting"><pre class="xml"><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>&lt;!DOCTYPE xsl:stylesheet [
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;!ENTITY db "http://docbook.sourceforge.net/release/xsl-ns/current"&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>]&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;xsl:stylesheet version="1.0"
<span class="linenumber">  6</span><span class="linenumber-separator"> </span>  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  xmlns:d="http://docbook.org/ns/docbook"
<span class="linenumber">  8</span><span class="linenumber-separator"> </span>  xmlns="http://www.w3.org/1999/xhtml" 
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  exclude-result-prefixes="d"&gt;
<span class="linenumber"> 10</span><span class="linenumber-separator"> </span>  
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:import href="&amp;db;/xhtml/docbook.xsl"/&gt;
<span class="linenumber"> 12</span><span class="linenumber-separator"> </span>  &lt;xsl:import href="simple-navigation.xsl"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  
<span class="linenumber"> 14</span><span class="linenumber-separator"> </span>  &lt;xsl:param name="generate.simple.navigation" select="1"/&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:param name="html.stylesheet"&gt;book.css&lt;/xsl:param&gt;
<span class="linenumber"> 16</span><span class="linenumber-separator"> </span>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;xsl:template name="chapter.titlepage.before.recto"&gt;
<span class="linenumber"> 18</span><span class="linenumber-separator"> </span>    &lt;xsl:if test="$generate.simple.navigation != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>      &lt;xsl:call-template name="generate.simple.navigation"/&gt;
<span class="linenumber"> 20</span><span class="linenumber-separator"> </span>    &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  &lt;/xsl:template&gt;
<span class="linenumber"> 22</span><span class="linenumber-separator"> </span>&lt;/xsl:stylesheet&gt;</pre></div>
                                    </div>
                                 </figure>
                              </div>
                           </li>
                           <li class="step">
                              <div>
                                 <p>Use the file <code class="filename">db-simple-navigation.xsl</code>
                                    to transform your documents.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </figure>
                  <p>If you want to switch on or off the above behaviour, use the
                     parameter <em class="parameter"><code>generate.simple.navigation</code></em><sup class="footnote"><span class="osq">[</span><a name="dbc.html.texinfo-navig.4.6.2" href="#ftn.dbc.html.texinfo-navig.4.6.2">8</a><span class="csq">]</span></sup> and set it to <code class="literal">0</code>.
                  </p>
               </section>
               <section id="dbc.html.texinfo-navig.5" class="section discussion">
                  <div class="section-titlepage">
                     <h4>Discussion</h4>
                  </div>
                  <p>The named template
                     <code class="function">generate.simple.navigation</code> works as
                     follows:
                  </p>
                  <div class="orderedlist">
                     <ol style="list-style: decimal;">
                        <li>
                           <p>Three variables are definied for the previous, next, and
                              up links. All depends on the <code class="varname">node</code> parameter
                              which is by default the context node. This is useful as you
                              can change the behaviour very easily by just changing the
                              context node when calling the template with
                              <code class="function">xsl:call-template</code>.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="varname">prev</code> and <code class="varname">next</code>
                              variables are filled with the previous or next chapter
                              elements along their sibling axis. In comparison, the
                              <code class="varname">up</code> variable needs to find its enclosing
                              element; it uses the <code class="function">parent</code> axis
                              for this purpose.
                           </p>
                           <p>If there are no previous or next chapters, the node set will
                              be empty. For the <code class="varname">up</code> variable, this depends
                              on where a chapter belongs; usually it is enclosed in a
                              <code class="tag-element">book</code> or <code class="tag-element">part</code> element. As we need only
                              the parent element As such this variable can not be empty
                              (only if the chapter would be the root element.)
                           </p>
                        </li>
                        <li>
                           <p>The simple navigation is implemented as a unordered list
                              inside a <code class="tag-element">div</code> element. The enclosing <code class="tag-element">div</code>
                              element is used to make styling with CSS easier.
                           </p>
                        </li>
                        <li>
                           <p>With <code class="tag-element">xsl:if</code> we check the amount of nodes in our
                              <code class="varname">prev</code> and <code class="varname">next</code>
                              variables. Only if the variable contains more than zero nodes
                              it will a listitem created.
                           </p>
                        </li>
                        <li>
                           <p>If we create a listitem, we want to insert a text to help
                              our readers and to distinguish the different directions. The
                              text has to be independent from the used language; so
                              hard-coding the text would not be sufficient. For this reason,
                              the DocBook stylesheets contains named templates to generate
                              localized text. The next, previous, and up link texts are
                              created through the named templates
                              <code class="function">generate.nav.next</code>,
                              <code class="function">generate.nav.prev</code>, and
                              <code class="function">generate.nav.up</code>.
                           </p>
                        </li>
                        <li>
                           <p>As the generated localized text contains only the text
                              without interpunctations, we append “<span class="quote">: </span>”.
                           </p>
                        </li>
                        <li>
                           <p>We create the link with the <code class="tag-element">a</code> link. The needed
                              <code class="tag-attribute">href</code> attribute is created by
                              calling <code class="function">href.target</code> (origin
                              <code class="filename">html.xsl</code>). This template is responsible
                              for the correct linking value.
                           </p>
                        </li>
                        <li>
                           <p>The content of the <code class="tag-element">a</code> element is inserted from
                              the <code class="tag-element">title</code> element of the corresponding node. As we
                              are only interested in the string value, we can use
                              <code class="function">xsl:value-of</code>.
                           </p>
                        </li>
                     </ol>
                  </div>
                  <p>The <code class="function">generate.simple.navigation</code> template
                     matches only chapters along the sibling axis. As such it can not
                     find a glossary or appendix after a chapter. If you want to create
                     links for <em>any</em> component elements, not only
                     chapters, you need to change the variables <code class="varname">prev</code>
                     and <code class="varname">next</code>. A first attempt would lead to
                     this:
                  </p>
                  <div class="programlisting"><pre>&lt;xsl:variable name="prev" select="$node/preceding-sibling::d:*[1]"/&gt;
&lt;xsl:variable name="next" select="$node/following-sibling::d:*[1]"/&gt;</pre></div>
                  <p>This works for the <code class="varname">next</code> variables. However,
                     our expression for the <code class="varname">prev</code> variable contains a
                     bug. Consider the following structure:
                  </p>
                  <div class="screen"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>book
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  title
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  info
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  <strong class="emphasis">chapter</strong>
<span class="linenumber">   </span><span class="linenumber-separator"> </span>  ...</pre></div>
                  <p>The <code class="function">preceding-sibling</code> axis returns the
                     <code class="tag-element">info</code> and <code class="tag-element">title</code> elements. This is not what
                     you want as these are no component elements for our
                     <code class="varname">prev</code> link. In that case we need an expression
                     to filter out the unwanted elements. This is done with an
                     predicate:
                  </p>
                  <div class="programlisting"><pre>&lt;xsl:variable name="prev" select="$node/preceding-sibling::d:*[not(self::d:title|self::d:info)][1]"/&gt;</pre></div>
                  <p>That expression first creates a node set with
                     <em>all</em> preceding elements. In a second step
                     they are check against the term
                     <code class="code">not(self::d:title|self::d:info)</code>; only those
                     elements are remain in the node set which are not <code class="tag-element">title</code> or
                     <code class="tag-element">info</code> elements. In our above example, this leads to a
                     node set with zero nodes and is exactly what we wanted to
                     achieve.
                  </p>
                  <p>With the previous change, we allow <em>any</em>
                     structural element to be included in a next or previous link.
                     However, we show our navigation links only in chapter titlepages
                     at the moment (the named template
                     <code class="function">chapter.titlepage.before.recto</code>.) We need to
                     extend the stylesheet
                     <code class="filename">db-simple-navigation.xsl</code> to allow elements
                     like <code class="tag-element">appendix</code>, <code class="tag-element">glossary</code>, etc. Refer to the
                     content modell of DocBook´s <code class="tag-element">book</code> element for details. For an <code class="tag-element">appendix</code> this
                     looks like this:
                  </p>
                  <div class="programlisting"><pre><span class="linenumber">  1</span><span class="linenumber-separator"> </span>&lt;xsl:template name="appendix.titlepage.before.recto"&gt;
<span class="linenumber">  2</span><span class="linenumber-separator"> </span>  &lt;xsl:if test="$generate.simple.navigation != 0"&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>    &lt;xsl:call-template name="generate.simple.navigation"/&gt;
<span class="linenumber">  4</span><span class="linenumber-separator"> </span>  &lt;/xsl:if&gt;
<span class="linenumber">   </span><span class="linenumber-separator"> </span>&lt;/xsl:template&gt;</pre></div>
                  <p>For the other elements this is exactly the same except the
                     name. Just use the element name and append
                     <code class="literal">.titlepage.before.recto</code>.
                  </p>
               </section>
            </section>
            <div class="footnotes">
               <hr width="100" align="left" class="footnotes-divider" />
               <div class="footnote">
                  <p><sup><span class="osq">[</span><a href="#dbc.html.texinfo-navig.4.6.2" name="ftn.dbc.html.texinfo-navig.4.6.2">8</a><span class="csq">]</span></sup>It is not an error to have a parameter with the same name
                     as a named template.
                  </p>
               </div>
            </div>
         </article>
         <article id="cc-by-nc-sa-30-de" lang="en" class="appendix">
            <header class="appendix-titlepage">
               <h2>Appendix A. Namensnennung – Keine kommerzielle Nutzung – Weitergabe unter
                  gleichen Bedingungen 3.0 Deutschland
               </h2>
            </header>
            <p>Entnommen von <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/">http://creativecommons.org/licenses/by-nc-sa/3.0/de/</a>.
            </p>
            <blockquote>
               <p>CREATIVE COMMONS IST KEINE RECHTSANWALTSKANZLEI UND LEISTET
                  KEINE RECHTSBERATUNG. DIE BEREITSTELLUNG DIESER LIZENZ FÜHRT ZU
                  KEINEM MANDATSVERHÄLTNIS. CREATIVE COMMONS STELLT DIESE
                  INFORMATIONEN OHNE GEWÄHR ZUR VERFÜGUNG. CREATIVE COMMONS
                  ÜBERNIMMT KEINE GEWÄHRLEISTUNG FÜR DIE GELIEFERTEN INFORMATIONEN
                  UND SCHLIEßT DIE HAFTUNG FÜR SCHÄDEN AUS, DIE SICH AUS DEREN
                  GEBRAUCH ERGEBEN. 
               </p>
            </blockquote>
            <blockquote>
               <h3>Licenz</h3>
               <p>DER GEGENSTAND DIESER LIZENZ (WIE UNTER
                  “<span class="quote">SCHUTZGEGENSTAND</span>” DEFINIERT) WIRD UNTER DEN
                  BEDINGUNGEN DIESER CREATIVE COMMONS PUBLIC LICENSE
                  (“<span class="quote">CCPL</span>”, “<span class="quote">LIZENZ</span>” ODER
                  “<span class="quote">LIZENZVERTRAG</span>”) ZUR VERFÜGUNG GESTELLT. DER
                  SCHUTZGEGENSTAND IST DURCH DAS URHEBERRECHT UND/ODER ANDERE
                  GESETZE GESCHÜTZT. JEDE FORM DER NUTZUNG DES SCHUTZGEGENSTANDES,
                  DIE NICHT AUFGRUND DIESER LIZENZ ODER DURCH GESETZE GESTATTET IST,
                  IST UNZULÄSSIG.
               </p>
               <p>DURCH DIE AUSÜBUNG EINES DURCH DIESE LIZENZ GEWÄHRTEN RECHTS
                  AN DEM SCHUTZGEGENSTAND ERKLÄREN SIE SICH MIT DEN
                  LIZENZBEDINGUNGEN RECHTSVERBINDLICH EINVERSTANDEN. SOWEIT DIESE
                  LIZENZ ALS LIZENZVERTRAG ANZUSEHEN IST, GEWÄHRT IHNEN DER
                  LIZENZGEBER DIE IN DER LIZENZ GENANNTEN RECHTE UNENTGELTLICH UND
                  IM AUSTAUSCH DAFÜR, DASS SIE DAS GEBUNDENSEIN AN DIE
                  LIZENZBEDINGUNGEN AKZEPTIEREN.
               </p>
            </blockquote>
            <div class="orderedlist">
               <ol style="list-style: decimal;">
                  <li id="cc-de.def">
                     <p>Definitionen</p>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc-de.def.adaption">
                              <p>Der Begriff “<span class="quote"><strong class="emphasis">Abwandlung</strong></span>” im Sinne dieser Lizenz
                                 bezeichnet das Ergebnis jeglicher Art von Veränderung des
                                 Schutzgegenstandes, solange die eigenpersönlichen Züge des
                                 Schutzgegenstandes darin nicht verblassen und daran eigene
                                 Schutzrechte entstehen. Das kann insbesondere eine
                                 Bearbeitung, Umgestaltung, Änderung, Anpassung, Übersetzung
                                 oder Heranziehung des Schutzgegenstandes zur Vertonung von
                                 Laufbildern sein. Nicht als Abwandlung des
                                 Schutzgegenstandes gelten seine Aufnahme in eine Sammlung
                                 oder ein Sammelwerk und die freie Benutzung des
                                 Schutzgegenstandes. 
                              </p>
                           </li>
                           <li id="cc-de.def.collection">
                              <p>Der Begriff “<span class="quote"><strong class="emphasis">Sammelwerk</strong></span>” im Sinne dieser Lizenz
                                 meint eine Zusammenstellung von literarischen,
                                 künstlerischen oder wissenschaftlichen Inhalten, sofern
                                 diese Zusammenstellung aufgrund von Auswahl und Anordnung
                                 der darin enthaltenen selbständigen Elemente eine geistige
                                 Schöpfung darstellt, unabhängig davon, ob die Elemente
                                 systematisch oder methodisch angelegt und dadurch einzeln
                                 zugänglich sind oder nicht.
                              </p>
                           </li>
                           <li id="cc-de.def.distribute">
                              <p>“<span class="quote"><strong class="emphasis">Verbreiten</strong></span>” im Sinne dieser Lizenz
                                 bedeutet, den Schutzgegenstand oder Abwandlungen im Original
                                 oder in Form von Vervielfältigungsstücken, mithin in
                                 körperlich fixierter Form der Öffentlichkeit anzubieten oder
                                 in Verkehr zu bringen.
                              </p>
                           </li>
                           <li id="cc-de.def.license-elements">
                              <p>Unter “<span class="quote"><strong class="emphasis">Lizenzelementen</strong></span>” werden im Sinne
                                 dieser Lizenz die folgenden übergeordneten
                                 Lizenzcharakteristika verstanden, die vom Lizenzgeber
                                 ausgewählt wurden und in der Bezeichnung der Lizenz zum
                                 Ausdruck kommen: “<span class="quote">Namensnennung</span>”, “<span class="quote">Keine
                                    kommerzielle Nutzung</span>”, “<span class="quote">Weitergabe unter
                                    gleichen Bedingungen</span>”.
                              </p>
                           </li>
                           <li id="cc-de.def.licensor">
                              <p>Der “<span class="quote"><strong class="emphasis">Lizenzgeber</strong></span>” im Sinne dieser Lizenz ist
                                 diejenige natürliche oder juristische Person oder Gruppe,
                                 die den Schutzgegenstand unter den Bedingungen dieser Lizenz
                                 anbietet und insoweit als Rechteinhaberin auftritt.
                              </p>
                           </li>
                           <li id="cc-de.def.original-author">
                              <p>“<span class="quote"><strong class="emphasis">Rechteinhaber</strong></span>” im Sinne dieser Lizenz
                                 ist der Urheber des Schutzgegenstandes oder jede andere
                                 natürliche oder juristische Person oder Gruppe von Personen,
                                 die am Schutzgegenstand ein Immaterialgüterrecht erlangt
                                 hat, welches die in Abschnitt <a href="#cc-de.license-grant">3</a> genannten Handlungen
                                 erfasst und bei dem eine Einräumung von Nutzungsrechten oder
                                 eine Weiterübertragung an Dritte möglich ist.
                              </p>
                           </li>
                           <li id="cc-de.def.work">
                              <p>Der Begriff “<span class="quote"><strong class="emphasis">Schutzgegenstand</strong></span>” bezeichnet in
                                 dieser Lizenz den literarischen, künstlerischen oder
                                 wissenschaftlichen Inhalt, der unter den Bedingungen dieser
                                 Lizenz angeboten wird. Das kann insbesondere eine
                                 persönliche geistige Schöpfung jeglicher Art, ein Werk der
                                 kleinen Münze, ein nachgelassenes Werk oder auch ein
                                 Lichtbild oder anderes Objekt eines verwandten Schutzrechts
                                 sein, unabhängig von der Art seiner Fixierung und unabhängig
                                 davon, auf welche Weise jeweils eine Wahrnehmung erfolgen
                                 kann, gleichviel ob in analoger oder digitaler Form. Soweit
                                 Datenbanken oder Zusammenstellungen von Daten einen
                                 immaterialgüterrechtlichen Schutz eigener Art genießen,
                                 unterfallen auch sie dem Begriff "Schutzgegenstand" im Sinne
                                 dieser Lizenz.
                              </p>
                           </li>
                           <li id="cc-de.def.you">
                              <p>Mit “<span class="quote"><strong class="emphasis">Sie</strong></span>”
                                 bzw. “<span class="quote"><strong class="emphasis">Ihnen</strong></span>”
                                 ist die natürliche oder juristische Person gemeint, die in
                                 dieser Lizenz im Abschnitt <a href="#cc-de.license-grant">3</a> genannte Nutzungen des
                                 Schutzgegenstandes vornimmt und zuvor in Hinblick auf den
                                 Schutzgegenstand nicht gegen Bedingungen dieser Lizenz
                                 verstoßen oder aber die ausdrückliche Erlaubnis des
                                 Lizenzgebers erhalten hat, die durch diese Lizenz gewährten
                                 Nutzungsrechte trotz eines vorherigen Verstoßes
                                 auszuüben.
                              </p>
                           </li>
                           <li id="cc-de.def.publicly-perform">
                              <p>Unter “<span class="quote"><strong class="emphasis">Öffentlich
                                       Zeigen</strong></span>” im Sinne dieser Lizenz sind
                                 Veröffentlichungen und Präsentationen des Schutzgegenstandes
                                 zu verstehen, die für eine Mehrzahl von Mitgliedern der
                                 Öffentlichkeit bestimmt sind und in unkörperlicher Form
                                 mittels öffentlicher Wiedergabe in Form von Vortrag,
                                 Aufführung, Vorführung, Darbietung, Sendung, Weitersendung,
                                 zeit- und ortsunabhängiger Zugänglichmachung oder in
                                 körperlicher Form mittels Ausstellung erfolgen, unabhängig
                                 von bestimmten Veranstaltungen und unabhängig von den zum
                                 Einsatz kommenden Techniken und Verfahren, einschließlich
                                 drahtgebundener oder drahtloser Mittel und Einstellen in das
                                 Internet.
                              </p>
                           </li>
                           <li id="cc-de.def.reproduce">
                              <p>“<span class="quote"><strong class="emphasis">Vervielfältigen</strong></span>” im Sinne dieser Lizenz
                                 bedeutet, mittels beliebiger Verfahren
                                 Vervielfältigungsstücke des Schutzgegenstandes herzustellen,
                                 insbesondere durch Ton- oder Bildaufzeichnungen, und umfasst
                                 auch den Vorgang, erstmals körperliche Fixierungen des
                                 Schutzgegenstandes sowie Vervielfältigungsstücke dieser
                                 Fixierungen anzufertigen, sowie die Übertragung des
                                 Schutzgegenstandes auf einen Bild- oder Tonträger oder auf
                                 ein anderes elektronisches Medium, gleichviel ob in
                                 digitaler oder analoger Form.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc-de.fair-dealing-rights">
                     <div class="formalpara">
                        <p><b>Schranken des Immaterialgüterrechts</b>  Diese Lizenz ist in keiner Weise darauf gerichtet,
                           Befugnisse zur Nutzung des Schutzgegenstandes zu vermindern,
                           zu beschränken oder zu vereiteln, die Ihnen aufgrund der
                           Schranken des Urheberrechts oder anderer Rechtsnormen bereits
                           ohne Weiteres zustehen oder sich aus dem Fehlen eines
                           immaterialgüterrechtlichen Schutzes ergeben.
                        </p>
                     </div>
                  </li>
                  <li id="cc-de.license-grant">
                     <div class="formalpara">
                        <p><b>Einräumung von Nutzungsrechten</b>  Unter den Bedingungen dieser Lizenz räumt Ihnen der
                           Lizenzgeber – unbeschadet unverzichtbarer Rechte und
                           vorbehaltlich des Abschnitts <a href="#cc-de.restrictions.f">f</a> – das vergütungsfreie,
                           räumlich und zeitlich (für die Dauer des Schutzrechts am
                           Schutzgegenstand) unbeschränkte einfache Recht ein, den
                           Schutzgegenstand auf die folgenden Arten und Weisen zu nutzen
                           (“<span class="quote">unentgeltlich eingeräumtes einfaches Nutzungsrecht
                              für jedermann</span>”):
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc-de.license-grant.a">
                              <p>Den Schutzgegenstand in beliebiger Form und Menge zu
                                 vervielfältigen, ihn in Sammelwerke zu integrieren und ihn
                                 als Teil solcher Sammelwerke zu vervielfältigen;
                              </p>
                           </li>
                           <li id="cc-de.license-grant.b">
                              <p>Abwandlungen des Schutzgegenstandes anzufertigen,
                                 einschließlich Übersetzungen unter Nutzung jedweder Medien,
                                 sofern deutlich erkennbar gemacht wird, dass es sich um
                                 Abwandlungen handelt;
                              </p>
                           </li>
                           <li id="cc-de.license-grant.c">
                              <p>den Schutzgegenstand, allein oder in Sammelwerke
                                 aufgenommen, öffentlich zu zeigen und zu verbreiten;
                              </p>
                           </li>
                           <li id="cc-de.license-grant.d">
                              <p>Abwandlungen des Schutzgegenstandes zu veröffentlichen,
                                 öffentlich zu zeigen und zu verbreiten.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <p>Das vorgenannte Nutzungsrecht wird für alle bekannten sowie
                        für alle noch nicht bekannten Nutzungsarten eingeräumt. Es
                        beinhaltet auch das Recht, solche Änderungen am Schutzgegenstand
                        vorzunehmen, die für bestimmte nach dieser Lizenz zulässige
                        Nutzungen technisch erforderlich sind. Alle sonstigen Rechte,
                        die über diesen Abschnitt hinaus nicht ausdrücklich durch den
                        Lizenzgeber eingeräumt werden, bleiben diesem allein
                        vorbehalten. Soweit Datenbanken oder Zusammenstellungen von
                        Daten Schutzgegenstand dieser Lizenz oder Teil dessen sind und
                        einen immaterialgüterrechtlichen Schutz eigener Art genießen,
                        verzichtet der Lizenzgeber auf sämtliche aus diesem Schutz
                        resultierenden Rechte.
                     </p>
                  </li>
                  <li id="cc-de.restrictions">
                     <div class="formalpara">
                        <p><b>Bedingungen</b>  Die Einräumung des Nutzungsrechts gemäß Abschnitt <a href="#cc-de.license-grant">3</a> dieser Lizenz erfolgt
                           ausdrücklich nur unter den folgenden Bedingungen:
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc-de.restrictions.a">
                              <p>Sie dürfen den Schutzgegenstand ausschließlich unter den
                                 Bedingungen dieser Lizenz verbreiten oder öffentlich zeigen.
                                 Sie müssen dabei stets eine Kopie dieser Lizenz oder deren
                                 vollständige Internetadresse in Form des
                                 Uniform-Resource-Identifier (URI) beifügen. Sie dürfen keine
                                 Vertrags- oder Nutzungsbedingungen anbieten oder fordern,
                                 die die Bedingungen dieser Lizenz oder die durch diese
                                 Lizenz gewährten Rechte beschränken. Sie dürfen den
                                 Schutzgegenstand nicht unterlizenzieren. Bei jeder Kopie des
                                 Schutzgegenstandes, die Sie verbreiten oder öffentlich
                                 zeigen, müssen Sie alle Hinweise unverändert lassen, die auf
                                 diese Lizenz und den Haftungsausschluss hinweisen. Wenn Sie
                                 den Schutzgegenstand verbreiten oder öffentlich zeigen,
                                 dürfen Sie (in Bezug auf den Schutzgegenstand) keine
                                 technischen Maßnahmen ergreifen, die den Nutzer des
                                 Schutzgegenstandes in der Ausübung der ihm durch diese
                                 Lizenz gewährten Rechte behindern können. Dieser Abschnitt
                                 <a href="#cc-de.restrictions.a">a</a> gilt auch für
                                 den Fall, dass der Schutzgegenstand einen Bestandteil eines
                                 Sammelwerkes bildet, was jedoch nicht bedeutet, dass das
                                 Sammelwerk insgesamt dieser Lizenz unterstellt werden muss.
                                 Sofern Sie ein Sammelwerk erstellen, müssen Sie auf die
                                 Mitteilung eines Lizenzgebers hin aus dem Sammelwerk die in
                                 Abschnitt <a href="#cc-de.restrictions.d">d</a>
                                 aufgezählten Hinweise entfernen. Wenn Sie eine Abwandlung
                                 vornehmen, müssen Sie auf die Mitteilung eines Lizenzgebers
                                 hin von der Abwandlung die in Abschnitt <a href="#cc-de.restrictions.d">d</a> aufgezählten Hinweise
                                 entfernen.
                              </p>
                           </li>
                           <li id="cc-de.restrictions.b">
                              <p>Sie dürfen eine Abwandlung ausschließlich unter den
                                 Bedingungen:
                              </p>
                              <div class="orderedlist">
                                 <ol style="list-style: lower-roman;">
                                    <li>
                                       <p>dieser Lizenz,</p>
                                    </li>
                                    <li>
                                       <p>einer späteren Version dieser Lizenz mit denselben Lizenzelementen;</p>
                                    </li>
                                    <li>
                                       <p>einer rechtsordnungsspezifischen
                                          Creative-Commons-Lizenz mit denselben Lizenzelementen ab
                                          Version 3.0 aufwärts (z.B. Namensnennung – Keine
                                          kommerzielle Nutzung – Weitergabe unter gleichen
                                          Bedingungen 3.0 US) oder
                                       </p>
                                    </li>
                                    <li>
                                       <p>der Creative-Commons-Unported-Lizenz mit denselben
                                          Lizenzelementen ab Version 3.0 aufwärts
                                       </p>
                                    </li>
                                 </ol>
                              </div>
                              <p>verbreiten oder öffentlich zeigen (“<span class="quote">Verwendbare Lizenz</span>”).
                              </p>
                              <p>Sie müssen stets eine Kopie der verwendbaren Lizenz oder
                                 deren vollständige Internetadresse in Form des
                                 Uniform-Resource-Identifier (URI) beifügen, wenn Sie die
                                 Abwandlung verbreiten oder öffentlich zeigen. Sie dürfen
                                 keine Vertrags- oder Nutzungsbedingungen anbieten oder
                                 fordern, die die Bedingungen der verwendbaren Lizenz oder
                                 die durch sie gewährten Rechte beschränken. Bei jeder
                                 Abwandlung, die Sie verbreiten oder öffentlich zeigen,
                                 müssen Sie alle Hinweise auf die verwendbare Lizenz und den
                                 Haftungsausschluss unverändert lassen. Wenn Sie die
                                 Abwandlung verbreiten oder öffentlich zeigen, dürfen Sie (in
                                 Bezug auf die Abwandlung) keine technischen Maßnahmen
                                 ergreifen, die den Nutzer der Abwandlung in der Ausübung der
                                 ihm durch die verwendbare Lizenz gewährten Rechte behindern
                                 können. Dieser Abschnitt <a href="#cc-de.restrictions.b">b</a> gilt auch für den Fall, dass
                                 die Abwandlung einen Bestandteil eines Sammelwerkes bildet,
                                 was jedoch nicht bedeutet, dass das Sammelwerk insgesamt der
                                 verwendbaren Lizenz unterstellt werden muss.
                              </p>
                           </li>
                           <li id="cc-de.restrictions.c">
                              <p>Die Rechteeinräumung gemäß Abschnitt <a href="#cc.license-grant">3</a> gilt nur für
                                 Handlungen, die nicht vorrangig auf einen geschäftlichen
                                 Vorteil oder eine geldwerte Vergütung gerichtet sind
                                 (“<span class="quote">nicht-kommerzielle Nutzung</span>”,
                                 “<span class="quote">Non-commercial-Option</span>”). Wird Ihnen in
                                 Zusammenhang mit dem Schutzgegenstand dieser Lizenz ein
                                 anderer Schutzgegenstand überlassen, ohne dass eine
                                 vertragliche Verpflichtung hierzu besteht (etwa im Wege von
                                 File-Sharing), so wird dies nicht als auf geschäftlichen
                                 Vorteil oder geldwerte Vergütung gerichtet angesehen, wenn
                                 in Verbindung mit dem Austausch der Schutzgegenstände
                                 tatsächlich keine Zahlung oder geldwerte Vergütung geleistet
                                 wird.
                              </p>
                           </li>
                           <li id="cc-de.restrictions.d">
                              <p>Die Verbreitung und das öffentliche Zeigen des
                                 Schutzgegenstandes oder auf ihm aufbauender Abwandlungen
                                 oder ihn enthaltender Sammelwerke ist Ihnen nur unter der
                                 Bedingung gestattet, dass Sie, vorbehaltlich etwaiger
                                 Mitteilungen im Sinne von Abschnitt <a href="#cc-de.restrictions.a">a</a>, alle dazu gehörenden
                                 Rechtevermerke unberührt lassen. Sie sind verpflichtet, die
                                 Rechteinhaberschaft in einer der Nutzung entsprechenden,
                                 angemessenen Form anzuerkennen, indem Sie – soweit bekannt –
                                 Folgendes angeben:
                              </p>
                              <div class="orderedlist">
                                 <ol style="list-style: lower-roman;">
                                    <li>
                                       <p>Den Namen (oder das Pseudonym, falls ein solches
                                          verwendet wird) des Rechteinhabers und / oder, falls der
                                          Lizenzgeber im Rechtevermerk, in den Nutzungsbedingungen
                                          oder auf andere angemessene Weise eine Zuschreibung an
                                          Dritte vorgenommen hat (z.B. an eine Stiftung, ein
                                          Verlagshaus oder eine Zeitung)
                                          (“<span class="quote">Zuschreibungsempfänger</span>”), Namen bzw. Bezeichnung
                                          dieses oder dieser Dritten;
                                       </p>
                                    </li>
                                    <li>
                                       <p>den Titel des Inhaltes;</p>
                                    </li>
                                    <li>
                                       <p>in einer praktikablen Form den
                                          Uniform-Resource-Identifier (URI, z.B. Internetadresse),
                                          den der Lizenzgeber zum Schutzgegenstand angegeben hat,
                                          es sei denn, dieser URI verweist nicht auf den
                                          Rechtevermerk oder die Lizenzinformationen zum
                                          Schutzgegenstand;
                                       </p>
                                    </li>
                                    <li>
                                       <p>und im Falle einer Abwandlung des Schutzgegenstandes
                                          in Übereinstimmung mit Abschnitt <a href="#cc-de.license-grant.b">b</a> einen Hinweis
                                          darauf, dass es sich um eine Abwandlung handelt.
                                       </p>
                                    </li>
                                 </ol>
                              </div>
                              <p>Die nach diesem Abschnitt <a href="#cc-de.restrictions.d">d</a> erforderlichen Angaben
                                 können in jeder angemessenen Form gemacht werden; im Falle
                                 einer Abwandlung des Schutzgegenstandes oder eines
                                 Sammelwerkes müssen diese Angaben das Minimum darstellen und
                                 bei gemeinsamer Nennung mehrerer Rechteinhaber dergestalt
                                 erfolgen, dass sie zumindest ebenso hervorgehoben sind wie
                                 die Hinweise auf die übrigen Rechteinhaber. Die Angaben nach
                                 diesem Abschnitt dürfen Sie ausschließlich zur Angabe der
                                 Rechteinhaberschaft in der oben bezeichneten Weise
                                 verwenden. Durch die Ausübung Ihrer Rechte aus dieser Lizenz
                                 dürfen Sie ohne eine vorherige, separat und schriftlich
                                 vorliegende Zustimmung des Lizenzgebers und / oder des
                                 Zuschreibungsempfängers weder explizit noch implizit
                                 irgendeine Verbindung zum Lizenzgeber oder
                                 Zuschreibungsempfänger und ebenso wenig eine Unterstützung
                                 oder Billigung durch ihn andeuten.
                              </p>
                           </li>
                           <li id="cc-de.restrictions.e">
                              <p>Die oben unter <a href="#cc-de.restrictions.a">a</a> bis <a href="#cc-de.restrictions.d">d</a> genannten Einschränkungen
                                 gelten nicht für solche Teile des Schutzgegenstandes, die
                                 allein deshalb unter den Schutzgegenstandsbegriff fallen,
                                 weil sie als Datenbanken oder Zusammenstellungen von Daten
                                 einen immaterialgüterrechtlichen Schutz eigener Art
                                 genießen.
                              </p>
                           </li>
                           <li id="cc-de.restrictions.f">
                              <p>Bezüglich Vergütung für die Nutzung des
                                 Schutzgegenstandes gilt Folgendes:
                              </p>
                              <div class="orderedlist">
                                 <ol style="list-style: lower-roman;">
                                    <li id="cc-de.restrictions.f.i">
                                       <div class="formalpara">
                                          <p><b>Unverzichtbare gesetzliche Vergütungsansprüche:</b>  Soweit unverzichtbare Vergütungsansprüche im
                                             Gegenzug für gesetzliche Lizenzen vorgesehen oder
                                             Pauschalabgabensysteme (zum Beispiel für Leermedien)
                                             vorhanden sind, behält sich der Lizenzgeber das
                                             ausschließliche Recht vor, die entsprechende Vergütung
                                             einzuziehen für jede Ausübung eines Rechts aus dieser
                                             Lizenz durch Sie.
                                          </p>
                                       </div>
                                    </li>
                                    <li id="cc-de.restrictions.f.ii">
                                       <div class="formalpara">
                                          <p><b>Vergütung bei Zwangslizenzen:</b>  Sofern Zwangslizenzen außerhalb dieser Lizenz
                                             vorgesehen sind und zustande kommen, behält sich der
                                             Lizenzgeber das ausschließliche Recht auf Einziehung
                                             der entsprechenden Vergütung für den Fall vor, dass
                                             Sie eine Nutzung des Schutzgegenstandes für andere als
                                             die in Abschnitt <a href="#cc-de.restrictions.c">c</a> als nicht-kommerziell
                                             definierten Zwecke vornehmen, verzichtet für alle
                                             übrigen, lizenzgerechten Fälle von Nutzung jedoch auf
                                             jegliche Vergütung.
                                          </p>
                                       </div>
                                    </li>
                                    <li>
                                       <div class="formalpara">
                                          <p><b>Vergütung in sonstigen Fällen:</b>  Bezüglich lizenzgerechter Nutzung des
                                             Schutzgegenstandes durch Sie, die nicht unter die
                                             beiden vorherigen Abschnitte <a href="#cc-de.restrictions.f.i">i</a> und <a href="#cc-de.restrictions.f.ii">ii</a> fällt,
                                             verzichtet der Lizenzgeber auf jegliche Vergütung,
                                             unabhängig davon, ob eine Einziehung der Vergütung
                                             durch ihn selbst oder nur durch eine
                                             Verwertungsgesellschaft möglich wäre. Der Lizenzgeber
                                             behält sich jedoch das ausschließliche Recht auf
                                             Einziehung der entsprechenden Vergütung (durch ihn
                                             selbst oder eine Verwertungsgesellschaft) für den Fall
                                             vor, dass Sie eine Nutzung des Schutzgegenstandes für
                                             andere als die in Abschnitt <a href="#cc-de.restrictions.c">c</a> als nicht-kommerziell
                                             definierten Zwecke vornehmen.
                                          </p>
                                       </div>
                                    </li>
                                 </ol>
                              </div>
                           </li>
                           <li>
                              <p>Persönlichkeitsrechte bleiben – soweit sie bestehen –
                                 von dieser Lizenz unberührt.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc-de.representation-warranties-disclaimer">
                     <div class="formalpara">
                        <p><b>Gewährleistung</b>  SOFERN KEINE ANDERS LAUTENDE, SCHRIFTLICHE VEREINBARUNG
                           ZWISCHEN DEM LIZENZGEBER UND IHNEN GESCHLOSSEN WURDE UND
                           SOWEIT MÄNGEL NICHT ARGLISTIG VERSCHWIEGEN WURDEN, BIETET DER
                           LIZENZGEBER DEN SCHUTZGEGENSTAND UND DIE EINRÄUMUNG VON
                           RECHTEN UNTER AUSSCHLUSS JEGLICHER GEWÄHRLEISTUNG AN UND
                           ÜBERNIMMT WEDER AUSDRÜCKLICH NOCH KONKLUDENT GARANTIEN
                           IRGENDEINER ART. DIES UMFASST INSBESONDERE DAS FREISEIN VON
                           SACH- UND RECHTSMÄNGELN, UNABHÄNGIG VON DEREN ERKENNBARKEIT
                           FÜR DEN LIZENZGEBER, DIE VERKEHRSFÄHIGKEIT DES
                           SCHUTZGEGENSTANDES, SEINE VERWENDBARKEIT FÜR EINEN BESTIMMTEN
                           ZWECK SOWIE DIE KORREKTHEIT VON BESCHREIBUNGEN. DIESE
                           GEWÄHRLEISTUNGSBESCHRÄNKUNG GILT NICHT, SOWEIT MÄNGEL ZU
                           SCHÄDEN DER IN ABSCHNITT <a href="#cc-de.limitation-on-liability">6</a> BEZEICHNETEN ART FÜHREN UND AUF
                           SEITEN DES LIZENZGEBERS DAS JEWEILS GENANNTE VERSCHULDEN BZW.
                           VERTRETENMÜSSEN EBENFALLS VORLIEGT.
                        </p>
                     </div>
                  </li>
                  <li id="cc-de.limitation-on-liability">
                     <div class="formalpara">
                        <p><b>Haftungsbeschränkung</b>  DER LIZENZGEBER HAFTET IHNEN GEGENÜBER IN BEZUG AUF
                           SCHÄDEN AUS DER VERLETZUNG DES LEBENS, DES KÖRPERS ODER DER
                           GESUNDHEIT NUR, SOFERN IHM WENIGSTENS FAHRLÄSSIGKEIT
                           VORZUWERFEN IST, FÜR SONSTIGE SCHÄDEN NUR BEI GROBER
                           FAHRLÄSSIGKEIT ODER VORSATZ, UND ÜBERNIMMT DARÜBER HINAUS
                           KEINERLEI FREIWILLIGE HAFTUNG.
                        </p>
                     </div>
                  </li>
                  <li id="cc-de.termination">
                     <div class="formalpara">
                        <p><b>Erlöschen</b>  
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li>
                              <p>Diese Lizenz und die durch sie eingeräumten
                                 Nutzungsrechte erlöschen mit Wirkung für die Zukunft im
                                 Falle eines Verstoßes gegen die Lizenzbedingungen durch Sie,
                                 ohne dass es dazu der Kenntnis des Lizenzgebers vom Verstoß
                                 oder einer weiteren Handlung einer der Vertragsparteien
                                 bedarf. Mit natürlichen oder juristischen Personen, die
                                 Abwandlungen des Schutzgegenstandes oder diesen enthaltende
                                 Sammelwerke unter den Bedingungen dieser Lizenz von Ihnen
                                 erhalten haben, bestehen nachträglich entstandene
                                 Lizenzbeziehungen jedoch solange weiter, wie die genannten
                                 Personen sich ihrerseits an sämtliche Lizenzbedingungen
                                 halten. Darüber hinaus gelten die Ziffern <a href="#cc-de.def">1</a>, <a href="#cc-de.fair-dealing-rights">2</a>, <a href="#cc-de.representation-warranties-disclaimer">5</a>,
                                 <a href="#cc-de.limitation-on-liability">6</a>,
                                 <a href="#cc-de.termination">7</a> und
                                 <a href="#cc-de.misc">8</a> auch nach einem
                                 Erlöschen dieser Lizenz fort. 
                              </p>
                           </li>
                           <li>
                              <p>Vorbehaltlich der oben genannten Bedingungen gilt diese
                                 Lizenz unbefristet bis der rechtliche Schutz für den
                                 Schutzgegenstand ausläuft. Davon abgesehen behält der
                                 Lizenzgeber das Recht, den Schutzgegenstand unter anderen
                                 Lizenzbedingungen anzubieten oder die eigene Weitergabe des
                                 Schutzgegenstandes jederzeit einzustellen, solange die
                                 Ausübung dieses Rechts nicht einer Kündigung oder einem
                                 Widerruf dieser Lizenz (oder irgendeiner Weiterlizenzierung,
                                 die auf Grundlage dieser Lizenz bereits erfolgt ist bzw.
                                 zukünftig noch erfolgen muss) dient und diese Lizenz unter
                                 Berücksichtigung der oben zum Erlöschen genannten
                                 Bedingungen vollumfänglich wirksam bleibt.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc-de.misc">
                     <div class="formalpara">
                        <p><b>Sonstige Bestimmungen</b>  
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc-de.misc.a">
                              <p>Jedes Mal wenn Sie den Schutzgegenstand für sich
                                 genommen oder als Teil eines Sammelwerkes verbreiten oder
                                 öffentlich zeigen, bietet der Lizenzgeber dem Empfänger eine
                                 Lizenz zu den gleichen Bedingungen und im gleichen Umfang
                                 an, wie Ihnen in Form dieser Lizenz.
                              </p>
                           </li>
                           <li id="cc-de.misc.b">
                              <p>Jedes Mal wenn Sie eine Abwandlung des
                                 Schutzgegenstandes verbreiten oder öffentlich zeigen, bietet
                                 der Lizenzgeber dem Empfänger eine Lizenz am ursprünglichen
                                 Schutzgegenstand zu den gleichen Bedingungen und im gleichen
                                 Umfang an, wie Ihnen in Form dieser Lizenz.
                              </p>
                           </li>
                           <li id="cc-de.misc.c">
                              <p>Sollte eine Bestimmung dieser Lizenz unwirksam sein, so
                                 bleibt davon die Wirksamkeit der Lizenz im Übrigen
                                 unberührt.
                              </p>
                           </li>
                           <li id="cc-de.misc.d">
                              <p>Keine Bestimmung dieser Lizenz soll als abbedungen und
                                 kein Verstoß gegen sie als zulässig gelten, solange die von
                                 dem Verzicht oder von dem Verstoß betroffene Seite nicht
                                 schriftlich zugestimmt hat.
                              </p>
                           </li>
                           <li id="cc-de.misc.e">
                              <p>Diese Lizenz (zusammen mit in ihr ausdrücklich
                                 vorgesehenen Erlaubnissen, Mitteilungen und Zustimmungen,
                                 soweit diese tatsächlich vorliegen) stellt die vollständige
                                 Vereinbarung zwischen dem Lizenzgeber und Ihnen in Bezug auf
                                 den Schutzgegenstand dar. Es bestehen keine Abreden,
                                 Vereinbarungen oder Erklärungen in Bezug auf den
                                 Schutzgegenstand, die in dieser Lizenz nicht genannt sind.
                                 Rechtsgeschäftliche Änderungen des Verhältnisses zwischen
                                 dem Lizenzgeber und Ihnen sind nur über Modifikationen
                                 dieser Lizenz möglich. Der Lizenzgeber ist an etwaige
                                 zusätzliche, einseitig durch Sie übermittelte Bestimmungen
                                 nicht gebunden. Diese Lizenz kann nur durch schriftliche
                                 Vereinbarung zwischen Ihnen und dem Lizenzgeber modifiziert
                                 werden. Derlei Modifikationen wirken ausschließlich zwischen
                                 dem Lizenzgeber und Ihnen und wirken sich nicht auf die
                                 Dritten gemäß Ziffern <a href="#cc-de.misc.a">a</a> und
                                 <a href="#cc-de.misc.b">b</a> angeboteten Lizenzen
                                 aus.
                              </p>
                           </li>
                           <li id="cc-de.misc.f">
                              <p>Sofern zwischen Ihnen und dem Lizenzgeber keine
                                 anderweitige Vereinbarung getroffen wurde und soweit
                                 Wahlfreiheit besteht, findet auf diesen Lizenzvertrag das
                                 Recht der Bundesrepublik Deutschland Anwendung.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
               </ol>
            </div>
            <div class="sidebar">
               <header class="sidebar-titlepage">
                  <h3>Creative Commons Notice</h3>
               </header>
               <div class="sidebar-content">
                  <p>Creative Commons ist nicht Partei dieser Lizenz und übernimmt
                     keinerlei Gewähr oder dergleichen in Bezug auf den
                     Schutzgegenstand. Creative Commons haftet Ihnen oder einer anderen
                     Partei unter keinem rechtlichen Gesichtspunkt für irgendwelche
                     Schäden, die – abstrakt oder konkret, zufällig oder vorhersehbar –
                     im Zusammenhang mit dieser Lizenz entstehen. Unbeschadet der
                     vorangegangen beiden Sätze, hat Creative Commons alle Rechte und
                     Pflichten eines Lizenzgebers, wenn es sich ausdrücklich als
                     Lizenzgeber im Sinne dieser Lizenz bezeichnet.
                  </p>
                  <p>Creative Commons gewährt den Parteien nur insoweit das Recht,
                     das Logo und die Marke "Creative Commons" zu nutzen, als dies
                     notwendig ist, um der Öffentlichkeit gegenüber kenntlich zu
                     machen, dass der Schutzgegenstand unter einer CCPL steht. Ein
                     darüber hinaus gehender Gebrauch der Marke "Creative Commons" oder
                     einer verwandten Marke oder eines verwandten Logos bedarf der
                     vorherigen schriftlichen Zustimmung von Creative Commons. Jeder
                     erlaubte Gebrauch richtet sich nach der Creative Commons
                     Marken-Nutzungs-Richtlinie in der jeweils aktuellen Fassung, die
                     von Zeit zu Zeit auf der Website veröffentlicht oder auf andere
                     Weise auf Anfrage zugänglich gemacht wird. Zur Klarstellung: Die
                     genannten Einschränkungen der Markennutzung sind nicht Bestandteil
                     dieser Lizenz. 
                  </p>
                  <p>Creative Commons kann kontaktiert werden über <a href="http://creativecommons.org">http://creativecommons.org</a>.
                  </p>
               </div>
            </div>
         </article>
         <article id="cc-by-nc-sa-30-unported" class="appendix">
            <header class="appendix-titlepage">
               <h2>Appendix B. Attribution-NonCommercial-ShareAlike 3.0 Unported</h2>
            </header>
            <p>Taken from <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en">http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.en</a>.
            </p>
            <blockquote>
               <p>CREATIVE COMMONS CORPORATION IS NOT A LAW FIRM AND DOES NOT
                  PROVIDE LEGAL SERVICES. DISTRIBUTION OF THIS LICENSE DOES NOT
                  CREATE AN ATTORNEY-CLIENT RELATIONSHIP. CREATIVE COMMONS PROVIDES
                  THIS INFORMATION ON AN "AS-IS" BASIS. CREATIVE COMMONS MAKES NO
                  WARRANTIES REGARDING THE INFORMATION PROVIDED, AND DISCLAIMS
                  LIABILITY FOR DAMAGES RESULTING FROM ITS USE.
               </p>
            </blockquote>
            <blockquote>
               <h3>License</h3>
               <p>THE WORK (AS DEFINED BELOW) IS PROVIDED UNDER THE TERMS OF
                  THIS CREATIVE COMMONS PUBLIC LICENSE ("CCPL" OR "LICENSE"). THE
                  WORK IS PROTECTED BY COPYRIGHT AND/OR OTHER APPLICABLE LAW. ANY
                  USE OF THE WORK OTHER THAN AS AUTHORIZED UNDER THIS LICENSE OR
                  COPYRIGHT LAW IS PROHIBITED.
               </p>
               <p>BY EXERCISING ANY RIGHTS TO THE WORK PROVIDED HERE, YOU ACCEPT
                  AND AGREE TO BE BOUND BY THE TERMS OF THIS LICENSE. TO THE EXTENT
                  THIS LICENSE MAY BE CONSIDERED TO BE A CONTRACT, THE LICENSOR
                  GRANTS YOU THE RIGHTS CONTAINED HERE IN CONSIDERATION OF YOUR
                  ACCEPTANCE OF SUCH TERMS AND CONDITIONS.
               </p>
            </blockquote>
            <div class="orderedlist">
               <ol style="list-style: decimal;">
                  <li id="cc.def">
                     <p>Definitions</p>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc.def.adaption">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Adaptation</span>”</b>  means a work based upon the Work, or upon the Work and
                                    other pre-existing works, such as a translation,
                                    adaptation, derivative work, arrangement of music or other
                                    alterations of a literary or artistic work, or phonogram
                                    or performance and includes cinematographic adaptations or
                                    any other form in which the Work may be recast,
                                    transformed, or adapted including in any form recognizably
                                    derived from the original, except that a work that
                                    constitutes a Collection will not be considered an
                                    Adaptation for the purpose of this License. For the
                                    avoidance of doubt, where the Work is a musical work,
                                    performance or phonogram, the synchronization of the Work
                                    in timed-relation with a moving image
                                    (“<span class="quote">synching</span>”) will be considered an
                                    Adaptation for the purpose of this License.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.collection">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Collection</span>”</b>  means a collection of literary or artistic works, such
                                    as encyclopedias and anthologies, or performances,
                                    phonograms or broadcasts, or other works or subject matter
                                    other than works listed in Section <a href="#cc.def.work">g</a> below, which, by reason of the
                                    selection and arrangement of their contents, constitute
                                    intellectual creations, in which the Work is included in
                                    its entirety in unmodified form along with one or more
                                    other contributions, each constituting separate and
                                    independent works in themselves, which together are
                                    assembled into a collective whole. A work that constitutes
                                    a Collection will not be considered an Adaptation (as
                                    defined above) for the purposes of this License.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.distribute">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Distribute</span>”</b>  means to make available to the public the original and
                                    copies of the Work or Adaptation, as appropriate, through
                                    sale or other transfer of ownership.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.license-elements">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">License Elements</span>”</b>  means the following high-level license attributes as
                                    selected by Licensor and indicated in the title of this
                                    License: Attribution, Noncommercial, ShareAlike.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.licensor">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Licensor</span>”</b>  means the individual, individuals, entity or entities
                                    that offer(s) the Work under the terms of this
                                    License.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.original-author">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Original Author</span>”</b>  means, in the case of a literary or artistic work, the
                                    individual, individuals, entity or entities who created
                                    the Work or if no individual or entity can be identified,
                                    the publisher; and in addition (i) in the case of a
                                    performance the actors, singers, musicians, dancers, and
                                    other persons who act, sing, deliver, declaim, play in,
                                    interpret or otherwise perform literary or artistic works
                                    or expressions of folklore; (ii) in the case of a
                                    phonogram the producer being the person or legal entity
                                    who first fixes the sounds of a performance or other
                                    sounds; and, (iii) in the case of broadcasts, the
                                    organization that transmits the broadcast.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.work">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Work</span>”</b>  means the literary and/or artistic work offered under
                                    the terms of this License including without limitation any
                                    production in the literary, scientific and artistic
                                    domain, whatever may be the mode or form of its expression
                                    including digital form, such as a book, pamphlet and other
                                    writing; a lecture, address, sermon or other work of the
                                    same nature; a dramatic or dramatico-musical work; a
                                    choreographic work or entertainment in dumb show; a
                                    musical composition with or without words; a
                                    cinematographic work to which are assimilated works
                                    expressed by a process analogous to cinematography; a work
                                    of drawing, painting, architecture, sculpture, engraving
                                    or lithography; a photographic work to which are
                                    assimilated works expressed by a process analogous to
                                    photography; a work of applied art; an illustration, map,
                                    plan, sketch or three-dimensional work relative to
                                    geography, topography, architecture or science; a
                                    performance; a broadcast; a phonogram; a compilation of
                                    data to the extent it is protected as a copyrightable
                                    work; or a work performed by a variety or circus performer
                                    to the extent it is not otherwise considered a literary or
                                    artistic work.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.you">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">You</span>”</b>  means an individual or entity exercising rights under
                                    this License who has not previously violated the terms of
                                    this License with respect to the Work, or who has received
                                    express permission from the Licensor to exercise rights
                                    under this License despite a previous violation.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.publicly-perform">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Publicly Perform</span>”</b>  means to perform public recitations of the Work and to
                                    communicate to the public those public recitations, by any
                                    means or process, including by wire or wireless means or
                                    public digital performances; to make available to the
                                    public Works in such a way that members of the public may
                                    access these Works from a place and at a place
                                    individually chosen by them; to perform the Work to the
                                    public by any means or process and the communication to
                                    the public of the performances of the Work, including by
                                    public digital performance; to broadcast and rebroadcast
                                    the Work by any means including signs, sounds or
                                    images.
                                 </p>
                              </div>
                           </li>
                           <li id="cc.def.reproduce">
                              <div class="formalpara">
                                 <p><b>“<span class="quote">Reproduce</span>”</b>  means to make copies of the Work by any means
                                    including without limitation by sound or visual recordings
                                    and the right of fixation and reproducing fixations of the
                                    Work, including storage of a protected performance or
                                    phonogram in digital form or other electronic
                                    medium.
                                 </p>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc.fair-dealing-rights">
                     <div class="formalpara">
                        <p><b>Fair Dealing Rights.</b>  Nothing in this License is intended to reduce, limit, or
                           restrict any uses free from copyright or rights arising from
                           limitations or exceptions that are provided for in connection
                           with the copyright protection under copyright law or other
                           applicable laws.
                        </p>
                     </div>
                  </li>
                  <li id="cc.license-grant">
                     <div class="formalpara">
                        <p><b>License Grant.</b>  Subject to the terms and conditions of this License,
                           Licensor hereby grants You a worldwide, royalty-free,
                           non-exclusive, perpetual (for the duration of the applicable
                           copyright) license to exercise the rights in the Work as
                           stated below:
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc.license-grant.a">
                              <p>to Reproduce the Work, to incorporate the Work into one
                                 or more Collections, and to Reproduce the Work as
                                 incorporated in the Collections;
                              </p>
                           </li>
                           <li id="cc.license-grant.b">
                              <p>to create and Reproduce Adaptations provided that any
                                 such Adaptation, including any translation in any medium,
                                 takes reasonable steps to clearly label, demarcate or
                                 otherwise identify that changes were made to the original
                                 Work. For example, a translation could be marked “<span class="quote">The
                                    original work was translated from English to
                                    Spanish,</span>” or a modification could indicate
                                 “<span class="quote">The original work has been
                                    modified.</span>”;
                              </p>
                           </li>
                           <li id="cc.license-grant.c">
                              <p>to Distribute and Publicly Perform the Work including as
                                 incorporated in Collections; and,
                              </p>
                           </li>
                           <li id="cc.license-grant.d">
                              <p>to Distribute and Publicly Perform Adaptations.</p>
                           </li>
                        </ol>
                     </div>
                     <p>The above rights may be exercised in all media and formats
                        whether now known or hereafter devised. The above rights include
                        the right to make such modifications as are technically
                        necessary to exercise the rights in other media and formats.
                        Subject to Section <a href="#cc.misc.rightsgranted">f</a>,
                        all rights not expressly granted by Licensor are hereby
                        reserved, including but not limited to the rights described in
                        Section <a href="#cc.restrictions.e">e</a>.
                     </p>
                  </li>
                  <li id="cc.restrictions">
                     <div class="formalpara">
                        <p><b>Restrictions.</b>  The license granted in Section <a href="#cc.license-grant">3</a> above is expressly made subject
                           to and limited by the following restrictions:
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li id="cc.restrictions.a">
                              <p>You may Distribute or Publicly Perform the Work only
                                 under the terms of this License. You must include a copy of,
                                 or the Uniform Resource Identifier (URI) for, this License
                                 with every copy of the Work You Distribute or Publicly
                                 Perform. You may not offer or impose any terms on the Work
                                 that restrict the terms of this License or the ability of
                                 the recipient of the Work to exercise the rights granted to
                                 that recipient under the terms of the License. You may not
                                 sublicense the Work. You must keep intact all notices that
                                 refer to this License and to the disclaimer of warranties
                                 with every copy of the Work You Distribute or Publicly
                                 Perform. When You Distribute or Publicly Perform the Work,
                                 You may not impose any effective technological measures on
                                 the Work that restrict the ability of a recipient of the
                                 Work from You to exercise the rights granted to that
                                 recipient under the terms of the License. This Section
                                 <a href="#cc.restrictions.a">a</a> applies to the
                                 Work as incorporated in a Collection, but this does not
                                 require the Collection apart from the Work itself to be made
                                 subject to the terms of this License. If You create a
                                 Collection, upon notice from any Licensor You must, to the
                                 extent practicable, remove from the Collection any credit as
                                 required by Section <a href="#cc.restrictions.d">d</a>,
                                 as requested. If You create an Adaptation, upon notice from
                                 any Licensor You must, to the extent practicable, remove
                                 from the Adaptation any credit as required by Section
                                 <a href="#cc.restrictions.d">d</a>, as
                                 requested.
                              </p>
                           </li>
                           <li id="cc.restrictions.b">
                              <p>You may Distribute or Publicly Perform an Adaptation
                                 only under: (i) the terms of this License; (ii) a later
                                 version of this License with the same License Elements as
                                 this License; (iii) a Creative Commons jurisdiction license
                                 (either this or a later license version) that contains the
                                 same License Elements as this License (e.g.,
                                 Attribution-NonCommercial-ShareAlike 3.0 US)
                                 (“<span class="quote">Applicable License</span>”). You must include a
                                 copy of, or the URI, for Applicable License with every copy
                                 of each Adaptation You Distribute or Publicly Perform. You
                                 may not offer or impose any terms on the Adaptation that
                                 restrict the terms of the Applicable License or the ability
                                 of the recipient of the Adaptation to exercise the rights
                                 granted to that recipient under the terms of the Applicable
                                 License. You must keep intact all notices that refer to the
                                 Applicable License and to the disclaimer of warranties with
                                 every copy of the Work as included in the Adaptation You
                                 Distribute or Publicly Perform. When You Distribute or
                                 Publicly Perform the Adaptation, You may not impose any
                                 effective technological measures on the Adaptation that
                                 restrict the ability of a recipient of the Adaptation from
                                 You to exercise the rights granted to that recipient under
                                 the terms of the Applicable License. This Section <a href="#cc.restrictions.b">b</a> applies to the Adaptation as
                                 incorporated in a Collection, but this does not require the
                                 Collection apart from the Adaptation itself to be made
                                 subject to the terms of the Applicable License.
                              </p>
                           </li>
                           <li id="cc.restrictions.c">
                              <p>You may not exercise any of the rights granted to You in
                                 Section <a href="#cc.license-grant">3</a> above in any
                                 manner that is primarily intended for or directed toward
                                 commercial advantage or private monetary compensation. The
                                 exchange of the Work for other copyrighted works by means of
                                 digital file-sharing or otherwise shall not be considered to
                                 be intended for or directed toward commercial advantage or
                                 private monetary compensation, provided there is no payment
                                 of any monetary compensation in con-nection with the
                                 exchange of copyrighted works.
                              </p>
                           </li>
                           <li id="cc.restrictions.d">
                              <p>If You Distribute, or Publicly Perform the Work or any
                                 Adaptations or Collections, You must, unless a request has
                                 been made pursuant to Section <a href="#cc.restrictions.a">a</a>, keep intact all copyright
                                 notices for the Work and provide, reasonable to the medium
                                 or means You are utilizing: (i) the name of the Original
                                 Author (or pseudonym, if applicable) if supplied, and/or if
                                 the Original Author and/or Licensor designate another party
                                 or parties (e.g., a sponsor institute, publishing entity,
                                 journal) for attribution (“<span class="quote">Attribution
                                    Parties</span>”) in Licensor's copyright notice, terms of
                                 service or by other reasonable means, the name of such party
                                 or parties; (ii) the title of the Work if supplied; (iii) to
                                 the extent reasonably practicable, the URI, if any, that
                                 Licensor specifies to be associated with the Work, unless
                                 such URI does not refer to the copyright notice or licensing
                                 information for the Work; and, (iv) consistent with Section
                                 <a href="#cc.license-grant.b">b</a>, in the case of
                                 an Adaptation, a credit identifying the use of the Work in
                                 the Adaptation (e.g., “<span class="quote">French translation of the Work
                                    by Original Author,</span>” or “<span class="quote">Screenplay based on
                                    original Work by Original Author</span>”). The credit
                                 required by this Section <a href="#cc.restrictions.d">d</a> may be implemented in any
                                 reasonable manner; provided, however, that in the case of a
                                 Adaptation or Collection, at a minimum such credit will
                                 appear, if a credit for all contributing authors of the
                                 Adaptation or Collection appears, then as part of these
                                 credits and in a manner at least as prominent as the credits
                                 for the other contributing authors. For the avoidance of
                                 doubt, You may only use the credit required by this Section
                                 for the purpose of attribution in the manner set out above
                                 and, by exercising Your rights under this License, You may
                                 not implicitly or explicitly assert or imply any connection
                                 with, sponsorship or endorsement by the Original Author,
                                 Licensor and/or Attribution Parties, as appropriate, of You
                                 or Your use of the Work, without the separate, express prior
                                 written permission of the Original Author, Licensor and/or
                                 Attribution Parties.
                              </p>
                           </li>
                           <li id="cc.restrictions.e">
                              <p>For the avoidance of doubt:</p>
                              <div class="orderedlist">
                                 <ol style="list-style: lower-roman;">
                                    <li id="cc.restriction.e.i">
                                       <div class="formalpara">
                                          <p><b>Non-waivable Compulsory License Schemes.</b>  In those jurisdictions in which the right to
                                             collect royalties through any statutory or compulsory
                                             licensing scheme cannot be waived, the Licensor
                                             reserves the exclusive right to collect such royalties
                                             for any exercise by You of the rights granted under
                                             this License;
                                          </p>
                                       </div>
                                    </li>
                                    <li id="cc.restriction.e.ii">
                                       <div class="formalpara">
                                          <p><b>Waivable Compulsory License Schemes.</b>  In those jurisdictions in which the right to
                                             collect royalties through any statutory or compulsory
                                             licensing scheme can be waived, the Licensor reserves
                                             the exclusive right to collect such royalties for any
                                             exercise by You of the rights granted under this
                                             License if Your exercise of such rights is for a
                                             purpose or use which is otherwise than noncommercial
                                             as permitted under Section <a href="#cc.restrictions.c">c</a> and otherwise waives
                                             the right to collect royalties through any statutory
                                             or compulsory licensing scheme; and,
                                          </p>
                                       </div>
                                    </li>
                                    <li id="cc.restriction.e.iii">
                                       <div class="formalpara">
                                          <p><b>Voluntary License Schemes.</b>  The Licensor reserves the right to collect
                                             royalties, whether individually or, in the event that
                                             the Licensor is a member of a collecting society that
                                             administers voluntary licensing schemes, via that
                                             society, from any exercise by You of the rights
                                             granted under this License that is for a purpose or
                                             use which is otherwise than noncommercial as permitted
                                             under Section <a href="#cc.restrictions.c">c</a>.
                                          </p>
                                       </div>
                                    </li>
                                 </ol>
                              </div>
                           </li>
                           <li>
                              <p>Except as otherwise agreed in writing by the Licensor or
                                 as may be otherwise permitted by applicable law, if You
                                 Reproduce, Distribute or Publicly Perform the Work either by
                                 itself or as part of any Adaptations or Collections, You
                                 must not distort, mutilate, modify or take other derogatory
                                 action in relation to the Work which would be prejudicial to
                                 the Original Author's honor or reputation. Licensor agrees
                                 that in those jurisdictions (e.g. Japan), in which any
                                 exercise of the right granted in Section <a href="#cc.license-grant.b">b</a> of this License (the right
                                 to make Adaptations) would be deemed to be a distortion,
                                 mutilation, modification or other derogatory action
                                 prejudicial to the Original Author's honor and reputation,
                                 the Licensor will waive or not assert, as appropriate, this
                                 Section, to the fullest extent permitted by the applicable
                                 national law, to enable You to reasonably exercise Your
                                 right under Section <a href="#cc.license-grant.b">b</a>
                                 of this License (right to make Adaptations) but not
                                 otherwise.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc.representation-warranties-disclaimer">
                     <div class="formalpara">
                        <p><b>Representations, Warranties and Disclaimer</b>  UNLESS OTHERWISE MUTUALLY AGREED TO BY THE PARTIES IN
                           WRITING AND TO THE FULLEST EXTENT PERMITTED BY APPLICABLE LAW,
                           LICENSOR OFFERS THE WORK AS-IS AND MAKES NO REPRESENTATIONS OR
                           WARRANTIES OF ANY KIND CONCERNING THE WORK, EXPRESS, IMPLIED,
                           STATUTORY OR OTHERWISE, INCLUDING, WITHOUT LIMITATION,
                           WARRANTIES OF TITLE, MERCHANTABILITY, FITNESS FOR A PARTICULAR
                           PURPOSE, NONINFRINGEMENT, OR THE ABSENCE OF LATENT OR OTHER
                           DEFECTS, ACCURACY, OR THE PRESENCE OF ABSENCE OF ERRORS,
                           WHETHER OR NOT DISCOVERABLE. SOME JURISDICTIONS DO NOT ALLOW
                           THE EXCLUSION OF IMPLIED WARRANTIES, SO THIS EXCLUSION MAY NOT
                           APPLY TO YOU.
                        </p>
                     </div>
                  </li>
                  <li id="cc.limitation-on-liability">
                     <div class="formalpara">
                        <p><b>Limitation on Liability.</b>  EXCEPT TO THE EXTENT REQUIRED BY APPLICABLE LAW, IN NO
                           EVENT WILL LICENSOR BE LIABLE TO YOU ON ANY LEGAL THEORY FOR
                           ANY SPECIAL, INCIDENTAL, CONSEQUENTIAL, PUNITIVE OR EXEMPLARY
                           DAMAGES ARISING OUT OF THIS LICENSE OR THE USE OF THE WORK,
                           EVEN IF LICENSOR HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
                           DAMAGES.
                        </p>
                     </div>
                  </li>
                  <li id="cc.termination">
                     <div class="formalpara">
                        <p><b>Termination</b>  
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li>
                              <p>This License and the rights granted hereunder will
                                 terminate automatically upon any breach by You of the terms
                                 of this License. Individuals or entities who have received
                                 Adaptations or Collections from You under this License,
                                 however, will not have their licenses terminated provided
                                 such individuals or entities remain in full compliance with
                                 those licenses. Sections <a href="#cc.def">1</a>, 
                                 <a href="#cc.fair-dealing-rights">2</a>, <a href="#cc.representation-warranties-disclaimer">5</a>,
                                 <a href="#cc.limitation-on-liability">6</a>, <a href="#cc.termination">7</a>, and <a href="#cc.misc">8</a>
                                 will survive any termination of this License.
                              </p>
                           </li>
                           <li>
                              <p>Subject to the above terms and conditions, the license
                                 granted here is perpetual (for the duration of the
                                 applicable copyright in the Work). Notwithstanding the
                                 above, Licensor reserves the right to release the Work under
                                 different license terms or to stop distributing the Work at
                                 any time; provided, however that any such election will not
                                 serve to withdraw this License (or any other license that
                                 has been, or is required to be, granted under the terms of
                                 this License), and this License will continue in full force
                                 and effect unless terminated as stated above.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li id="cc.misc">
                     <div class="formalpara">
                        <p><b>Miscellaneous</b>  
                        </p>
                     </div>
                     <div class="orderedlist">
                        <ol style="list-style: lower-alpha;">
                           <li>
                              <p>Each time You Distribute or Publicly Perform the Work or
                                 a Collection, the Licensor offers to the recipient a license
                                 to the Work on the same terms and conditions as the license
                                 granted to You under this License.
                              </p>
                           </li>
                           <li>
                              <p>Each time You Distribute or Publicly Perform an
                                 Adaptation, Licensor offers to the recipient a license to
                                 the original Work on the same terms and conditions as the
                                 license granted to You under this License.
                              </p>
                           </li>
                           <li>
                              <p>If any provision of this License is invalid or
                                 unenforceable under applicable law, it shall not affect the
                                 validity or enforceability of the remainder of the terms of
                                 this License, and without further action by the parties to
                                 this agreement, such provision shall be reformed to the
                                 minimum extent necessary to make such provision valid and
                                 enforceable.
                              </p>
                           </li>
                           <li>
                              <p>No term or provision of this License shall be deemed
                                 waived and no breach consented to unless such waiver or
                                 consent shall be in writing and signed by the party to be
                                 charged with such waiver or consent.
                              </p>
                           </li>
                           <li>
                              <p>This License constitutes the entire agreement between
                                 the parties with respect to the Work licensed here. There
                                 are no understandings, agreements or representations with
                                 respect to the Work not specified here. Licensor shall not
                                 be bound by any additional provisions that may appear in any
                                 communication from You. This License may not be modified
                                 without the mutual written agreement of the Licensor and
                                 You.
                              </p>
                           </li>
                           <li id="cc.misc.rightsgranted">
                              <p>The rights granted under, and the subject matter
                                 referenced, in this License were drafted utilizing the
                                 terminology of the Berne Convention for the Protection of
                                 Literary and Artistic Works (as amended on September 28,
                                 1979), the Rome Convention of 1961, the WIPO Copyright
                                 Treaty of 1996, the WIPO Performances and Phonograms Treaty
                                 of 1996 and the Universal Copyright Convention (as revised
                                 on July 24, 1971). These rights and subject matter take
                                 effect in the relevant jurisdiction in which the License
                                 terms are sought to be enforced according to the
                                 corresponding provisions of the implementation of those
                                 treaty provisions in the applicable national law. If the
                                 standard suite of rights granted under applicable copyright
                                 law includes additional rights not granted under this
                                 License, such additional rights are deemed to be included in
                                 the License; this License is not intended to restrict the
                                 license of any rights under applicable law.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
               </ol>
            </div>
            <div class="sidebar">
               <header class="sidebar-titlepage">
                  <h3>Creative Commons Notice</h3>
               </header>
               <div class="sidebar-content">
                  <p>Creative Commons is not a party to this License, and makes no
                     warranty whatsoever in connection with the Work. Creative Commons
                     will not be liable to You or any party on any legal theory for any
                     damages whatsoever, including without limitation any general,
                     special, incidental or consequential damages arising in connection
                     to this license. Notwithstanding the foregoing two (2) sentences,
                     if Creative Commons has expressly identified itself as the
                     Licensor hereunder, it shall have all rights and obligations of
                     Licensor.
                  </p>
                  <p>Except for the limited purpose of indicating to the public
                     that the Work is licensed under the CCPL, Creative Commons does
                     not authorize the use by either party of the trademark
                     “<span class="quote">Creative Commons</span>” or any related trademark or logo
                     of Creative Commons without the prior written consent of Creative
                     Commons. Any permitted use will be in compliance with Creative
                     Commons' then-current trademark usage guidelines, as may be
                     published on its website or otherwise made available upon request
                     from time to time. For the avoidance of doubt, this trademark
                     restriction does not form part of this License.
                  </p>
                  <p>Creative Commons may be contacted at <a href="http://creativecommons.org">http://creativecommons.org</a>.
                  </p>
               </div>
            </div>
         </article>
      </article>
      <!-- Start Piwik Tracking Code --><script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/doccookbook/" : "http://sourceforge.net/apps/piwik/doccookbook/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript>
         <p><img src="http://sourceforge.net/apps/piwik/doccookbook/piwik.php?idsite=1"
                 style="border:0"
                 alt="" /></p>
      </noscript>
      <!-- End Piwik Tracking Code -->
   </body>
</html>