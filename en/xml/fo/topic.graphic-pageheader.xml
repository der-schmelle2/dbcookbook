<?xml version="1.0" encoding="UTF-8"?>

<!--
    License CC BY-NC-SA 3.0

   This work is licensed under the
   "Namensnennung – Keine kommerzielle Nutzung – Weitergabe unter
    gleichen Bedingungen 3.0 Deutschland (CC BY-NC-SA 3.0)"
   http://creativecommons.org/licenses/by-nc-sa/3.0/de/deed.de

   Read the English translation here:

   "Attribution-NonCommercial-ShareAlike 3.0 Unported (CC BY-NC-SA 3.0)"
   http://creativecommons.org/licenses/by-nc-sa/3.0/

-->
<?xml-model href="file:../5.1/dbref.rnc" type="application/relax-ng-compact-syntax"?>
<section xml:id="dbc.fo.graphic-pageheader" remap="topic" userlevel="easy"
    xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>Inserting Logos into Page Headers and Footers</title>
    <info>
        <author>
            <personname>
                <firstname>Peter</firstname>
                <surname>Schmelzer</surname>
            </personname>
        </author>
        <keywordset>
            <keyword>page header</keyword>
            <keyword>page footer</keyword>
            <keyword>header</keyword>
            <keyword>footer</keyword>
            <keyword>format</keyword>
            <keyword>page</keyword>
        </keywordset>
        <subjectset>
            <subject>
                <subjectterm>graphic</subjectterm>
            </subject>
        </subjectset>
    </info>

    <section role="problem">
        <title>Problem</title>
        <para>You need to know how to insert a logo or graphic in your page
            header.</para>
    </section>

    <section role="solution">
        <title>Solution</title>
        <para>This example solution will place logo on top right side of a
            single-sided document. Other placements are possible and will be
            shown in the <emphasis>Discussion</emphasis> section. The logo is at
            max 1 inch high to avoid conflicts with the body text area.</para>
        <para>A logo on every page in your document will give your work a
            personal touch or a corporate identity. Furthermore it's a way to
            protect your hard work against simple duplication through a copier
            or a simple forwarding of parts of your document.</para>
        <para>First of all you need to create a customization layer as described
            in the following steps. If you have a customization layer style
            sheet, you can skip the first step, otherwise follow the steps to
            create your customization layer:</para>
        <procedure>
            <step>
                <para>Create a customization layer as shown in <xref
                        linkend="dbc.common.dbcustomize"/>.</para>
            </step>
            <step>
                <para>Include the stylesheet from <xref
                        linkend="ex.fo.graphic-pageheader"/> into your
                    customization layer:</para>
                <programlisting language="xml">&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:d="http://docbook.org/ns/docbook">
  &lt;!-- ... -->
  <emphasis role="bold">&lt;xsl:include href="graphic-pageheader.xsl"/></emphasis>
  &lt;!-- ... -->
&lt;/xsl:stylesheet></programlisting>
            </step>
            <step>
                <para>Include the style sheet from <xref
                        linkend="ex.fo.graphic-pageheader"/> into your
                    customization layer:</para>
                <example xml:id="ex.fo.graphic-pageheader">
                    <title>Logo in page header
                            (<filename>graphic-pageheader.xsl</filename>)</title>
                    <info>
                        <output xmlns="urn:x-toms:docbook-ext">
                            <filename>graphic-pageheader/graphic-pageheader.xsl</filename>
                        </output>
                    </info>
                    <programlisting language="xml">&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns="http://docbook.org/ns/docbook"
    xmlns:d="http://docbook.org/ns/docbook" version="1.0">
    &lt;!-- Path to your graphic files -->
    &lt;xsl:param name="img.src.path">graphic-pageheader/&lt;xsl:param><co xml:id="co.topic.graphic-pageheader.path"/>
    &lt;!-- Your header logo -->
    &lt;xsl:param name="header.image.filename">Opensource.svg&lt;/xsl:param>
    &lt;!-- Header rule yes (1) / no (0) -->
    &lt;xsl:param name="header.rule" select="0"/>

    &lt;xsl:template name="header.content"><co xml:id="co.topic.graphic-pageheader.content"/>
        &lt;xsl:param name="pageclass" select="''"<co xml:id="co.topic.graphic-pageheader.variables"/>
        &lt;xsl:param name="sequence" select="''"/>
        &lt;xsl:param name="position" select="''"/>
        &lt;xsl:param name="gentext-key" select="''"/>
        &lt;fo:block><co xml:id="co.topic.graphic-pageheader.block"/>
            &lt;!-- sequence can be odd, even, first, blank -->
            &lt;!-- position can be left, center, right -->
            &lt;xsl:choose>
                &lt;xsl:when test="$sequence = 'blank'">
                    &lt;!-- nothing --><co xml:id="co.topic.graphic-pageheader.blank"/>
                &lt;/xsl:when>

                &lt;xsl:when test="$position='left'">
                    &lt;!-- Same for odd, even, empty, and blank sequences -->
                    &lt;!-- nothing -->
                &lt;/xsl:when>

                &lt;xsl:when test="($sequence='odd' or $sequence='even') and $position='center'">
                    &lt;!-- nothing -->
                &lt;/xsl:when>

                &lt;xsl:when test="$position='center'"><co xml:id="co.topic.graphic-pageheader.center"/>
                    &lt;!-- nothing for empty and blank sequences -->
                &lt;/xsl:when>

                &lt;xsl:when test="$position='right'"><co xml:id="co.topic.graphic-pageheader.right"/>
                    &lt;!-- Same for odd, even, empty, and blank sequences -->
                    &lt;fo:external-graphic content-height="1in"><co xml:id="co.topic.graphic-pageheader.height"/>
                       &lt;xsl:attribute name="src"><co xml:id="co.topic.graphic-pageheader.attribute"/>
                            &lt;xsl:call-template name="fo-external-image"><co xml:id="co.topic.graphic-pageheader.template"/>
                                &lt;xsl:with-param name="filename" select="concat($img.src.path, $header.image.filename)"/><co xml:id="co.topic.graphic-pageheader.file"/>
                            &lt;/xsl:call-template>
                       &lt;/xsl:attribute>
                    &lt;/fo:external-graphic>
                &lt;/xsl:when>

                &lt;xsl:when test="$sequence = 'first'">
                    &lt;!-- nothing for first pages -->
                &lt;/xsl:when>

                &lt;xsl:when test="$sequence = 'blank'">
                    &lt;!-- nothing for blank pages -->
                &lt;/xsl:when>
            &lt;/xsl:choose>
        &lt;/fo:block>
    &lt;/xsl:template>
&lt;/xsl:stylesheet></programlisting>
                    <calloutlist>
                        <callout arearefs="co.topic.graphic-pageheader.path">
                            <para>This setting is global for your pictures,
                                logos, graphics. Keep in mind that the
                                    <tag>imagedata</tag> command does not need a
                                path if all files are in the same folder. You
                                can write something like this:</para>
                            <para>&lt;imagedata fileref="pic02.pdf"/>
                                directly.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.content">
                            <para>We assume that your graphic should be placed
                                in the header of all pages except title
                                pages.</para>
                        </callout>
                        <callout
                            arearefs="co.topic.graphic-pageheader.variables">
                            <para>This is the default value and will be used if
                                no parameters are passed.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.block">
                            <para>A <tag>fo:block</tag>-element creates a
                                rectangle area on a page which can contain
                                lists, tables or graphics.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.blank">
                            <para>Here you can insert a text like <emphasis>This
                                    page is intentionally left
                                blank</emphasis>.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.center">
                            <para>This is a good place for the chapter
                                title.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.right">
                            <para>This is the place for our logo as described at
                                the top of our solution.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.height">
                            <para>To avoid conflicts with the body text area, we
                                limit its height to 1 inch. When you specify
                                only one parameter like 
                                    <tag>height</tag> or <tag>width</tag>, your
                                logo will be scaled with the <link
                                    xlink:href="#li.fo.external-graphics"
                                    >correct aspect ratio</link>.</para>
                        </callout>
                        <callout
                            arearefs="co.topic.graphic-pageheader.attribute">
                            <para>The file name is passed on the <tag
                                    class="attribute">src</tag> attribute.
                                    <emphasis>src</emphasis>.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.template">
                            <para>The template which is called to import and
                                place the graphic.</para>
                        </callout>
                        <callout arearefs="co.topic.graphic-pageheader.file">
                            <para>Our file defined at the top of our
                                customization layer.</para>
                        </callout>
                    </calloutlist>
                </example>
            </step>
            <step>
                <para>Use your customization layer to transform your DocBook
                    document into FO.</para>
            </step>
        </procedure>
    </section>
    <section role="discussion">
        <title>Discussion</title>
        <para>These points will be submitted later</para>
        <itemizedlist>
            <listitem>
                <para>Logo on recto/verso pages (double-sided docs)</para>
            </listitem>
            <listitem>
                <para>Logo in the footer</para>
            </listitem>
            <listitem>
                <para>Logo and chapter title in the page header</para>
            </listitem>
        </itemizedlist>
    </section>
    <section role="seealso">
        <title>See Also</title>
        <itemizedlist>
            <listitem xml:id="li.fo.external-graphics">
                <para>Full parameter description for
                        <tag>fo:external-graphic</tag><link
                        xlink:href="http://www.w3.org/TR/xsl/#fo_external-graphic"
                    /></para>
            </listitem>
            <listitem>
                <para>Parameter description for <tag>xsl:attribute</tag><link
                        xlink:href="https://www.w3schools.com/xml/ref_xsl_el_attribute.asp"
                    /></para>
            </listitem>
            <listitem>
                <para>Parameter description for <tag>xsl:with-param</tag>
                    <link
                        xlink:href="https://www.w3schools.com/xml/ref_xsl_el_with-param.asp"
                    /></para>
            </listitem>
        </itemizedlist>
        <para/>
        <para>The <emphasis>Opensource</emphasis>-Logo is a trademark which is
            owned by <link xlink:href="https://opensource.org"/>. This site is
            not affiliated with or endorsed by the Open Source
            Initiative.</para>
    </section>
</section>
