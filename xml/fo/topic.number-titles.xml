<?xml version="1.0" encoding="UTF-8"?>
<!--<?xml-model href="file:../5.1/dbref.rnc" type="application/relax-ng-compact-syntax"?>-->
<section xml:id="dbc.fo.number-titles" remap="topic"
   xmlns="http://docbook.org/ns/docbook"
   xmlns:xi="http://www.w3.org/2001/XInclude"
   xmlns:xlink="http://www.w3.org/1999/xlink">
  <title>Numbering Part, Chapter, Appendix, and other Titles</title>
  <info>
    <definitions definitionfile="defs.xml"/>
  </info>
  
  <section role="problem">
    <title>Problem</title>
    <para>You want a number in front of your structural elements like
        <tag>appendix</tag>, <tag>chapter</tag>, <tag>section</tag>,
      etc.</para>
  </section>
  <section role="solution" xml:id="sec.fo.number-titles.solution">
    <title>Solution</title>
    <para>The DocBook XSL stylesheets provide already a decent numbering
      scheme for high level divisions like parts, appendices, chapters,
      and references. The most common use is numbering section. If you
      want to automatically number section titles, set the
        <parameter>section.autolabel</parameter> parameter either
      manually or through a customization layer, for example: </para>
    <programlisting language="xml">&lt;xsl:param name="section.autolabel" select="1"/></programlisting>
  </section>
  <section role="discussion">
    <title>Discussion</title>
    <para>The DocBook XSL stylesheets contain autolabel parameters for
      the common elements <tag>appendix</tag>, <tag>chapter</tag>,
        <tag>part</tag>, <tag>preface</tag>, <tag>qandadiv</tag>,
        <tag>reference</tag>, and <tag>section</tag>. These can be set
      individually to change the numbering of for the same elements. The
      default values are shown in <xref
        linkend="tab.fo.number-titles.autolabel"/>. </para>
    <table xml:id="tab.fo.number-titles.autolabel">
      <title>Autolabel Parameters and their Default Values</title>
      <tgroup cols="3">
        <thead>
          <row>
            <entry>Parameter</entry>
            <entry>Default</entry>
            <entry>Example</entry>
          </row>
        </thead>
        <tbody>
          <row>
            <entry><parameter>appendix.autolabel</parameter></entry>
            <entry><literal>A</literal></entry>
            <entry>Appendix A. Python 3</entry>
          </row>
          <row>
            <entry><parameter>chapter.autolabel</parameter></entry>
            <entry><literal>1</literal></entry>
            <entry>Chapter 1. A Tutorial Introduction</entry>
          </row>
          <row>
            <entry><parameter>part.autolabel</parameter></entry>
            <entry><literal>I</literal></entry>
            <entry>Part I. The Python Language</entry>
          </row>
          <row>
            <entry><parameter>preface.autolabel</parameter></entry>
            <entry><literal>0</literal></entry>
            <entry>Prefaces are usually not numbered</entry>
          </row>
          <row>
            <entry><parameter>qandadiv.autolabel</parameter></entry>
            <entry><literal>1</literal></entry>
            <entry>3.1 Installation Questions</entry>
          </row>
          <row>
            <entry><parameter>reference.autolabel</parameter></entry>
            <entry><literal>I</literal></entry>
            <entry>I. Python Reference</entry>
          </row>
          <row>
            <entry><parameter>section.autolabel</parameter></entry>
            <entry><literal>0</literal></entry>
            <entry>Not numbered by default</entry>
          </row>
        </tbody>
      </tgroup>
    </table>
    
    <para>The autolabel parameters can contain the following
      values:</para>
    
    <variablelist>
      <varlistentry>
        <term>Value <literal>0</literal></term>
        <listitem>
          <para>A value of zero disables the automatic numbering. For
            example, if you want to disable automatic numbering for
            appendix elements, use this:</para>
          <programlisting language="xml">&lt;xsl:param name="appendix.autolabel" select="0"/></programlisting>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Value <literal>1</literal></term>
        <listitem>
          <para>A value of one enables the automatic numbering and uses
            arabic numerals. For example, section numbering is disabled
            by default. Use the code in the <xref
              xrefstyle="select:title"
              linkend="sec.fo.number-titles.solution"/> section.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>String</term>
        <listitem>
          <para>A string enables a different automatic numbering schema,
            for example roman numerals. See the following table to get
            an overview. </para>
          <table xml:id="tab.fo.">
            <title>Possible Formats for Autolabel Parameters</title>
            <tgroup cols="4">
              <thead>
                <row>
                  <entry>Value</entry>
                  <entry>Alternative Value</entry>
                  <entry>Style</entry>
                  <entry>Example</entry>
                </row>
              </thead>
              <tbody>
                <row>
                  <entry><literal>1</literal></entry>
                  <entry><literal>arabic</literal></entry>
                  <entry>Arabic numerals</entry>
                  <entry>1, 2, 3, 4, …</entry>
                </row>
                <row>
                  <entry><literal>I</literal></entry>
                  <entry><literal>upperroman</literal></entry>
                  <entry>Uppercase roman numerals</entry>
                  <entry>I, II, III, IV, …</entry>
                </row>
                <row>
                  <entry><literal>i</literal></entry>
                  <entry><literal>lowerroman</literal></entry>
                  <entry>Lowercase roman numerals</entry>
                  <entry>i, ii, iii, iv, …</entry>
                </row>
                <row>
                  <entry><literal>A</literal></entry>
                  <entry><literal>upperalpha</literal></entry>
                  <entry>Uppercase letters</entry>
                  <entry>A, B, C, D, …</entry>
                </row>
                <row>
                  <entry><literal>a</literal></entry>
                  <entry><literal>loweralpha</literal></entry>
                  <entry>Lowercase letters</entry>
                  <entry>a, b, c, d, …</entry>
                </row>
                <row>
                  <entry><tag class="numcharref">x661</tag></entry>
                  <entry><literal>arabicindic</literal></entry>
                  <entry>Arabic-Indic numerals</entry>
                  <entry>&#x661;, &#x662;, &#x663;, &#x664;, …</entry>
                </row>
              </tbody>
            </tgroup>
          </table>
        </listitem>
      </varlistentry>
    </variablelist>
    
    <para>Mostly you will probably want your sections be
      numbered including its parent numbering. If you do not touch
      <parameter>chapter.autolabel</parameter>, use the parameter 
      <parameter>section.label.includes.component.label</parameter> and
      set it to <literal>1</literal>:</para>
    <programlisting language="xml"
      >&lt;xsl:param name="section.autolabel" select="1"/>
&lt;xsl:param name="section.label.includes.component.label" select="1"/></programlisting>
    <para>Furthermore, with the parameter
      <parameter>section.autolabel.max.depth</parameter> you can control
      which sections get a number. By default, all sections are get
      numbered (default value is <literal>8</literal>.) If you want to
      number only sections at level 1, set the parameter to the value
      <literal>1</literal>.
    </para>
    
    <para>However, when dealing with other numbering systems, the above
      table is not enough. To support, for example, Japanese numbering,
      you need to customize the named template
      <function>autolabel.format</function> from
      <filename>common/labels.xsl</filename>.</para>
    
    <example>
      <title>Extending <function>autolabel.format</function></title>
      <programlisting language="xml">&lt;xsl:template name="autolabel.format">
  &lt;xsl:param name="context" select="."/>
  &lt;xsl:param name="format"/>

  &lt;xsl:choose>
    &lt;xsl:when test="string($format) != 0">
      &lt;xsl:choose>
        &lt;xsl:when test="string($format)='001'">
          &lt;xsl:value-of select="$format"/>
        &lt;/xsl:when>
        &lt;xsl:when test="$format='loweralpha' or $format='a'">
          &lt;xsl:value-of select="'a'"/>
        &lt;/xsl:when>
        &lt;xsl:when test="$format='lowerroman' or $format='i'">
          &lt;xsl:value-of select="'i'"/>
        &lt;/xsl:when>
        &lt;xsl:when test="$format='upperalpha' or $format='A'">
          &lt;xsl:value-of select="'A'"/>
        &lt;/xsl:when>
        &lt;xsl:when test="$format='upperroman' or $format='I'">
          &lt;xsl:value-of select="'I'"/>
        &lt;/xsl:when>
        &lt;xsl:when test="$format='arabicindic' or $format='&#x661;'">
          &lt;xsl:value-of select="'&#x661;'"/>
        &lt;/xsl:when>
        <emphasis role="bold"
        >&lt;xsl:when test="$format='japanese' or $format='&amp;#x4e00;'">
          &lt;xsl:value-of select="'&amp;#x4e00;'"/>
        &lt;/xsl:when></emphasis>
        &lt;xsl:otherwise>
          &lt;xsl:message>
            &lt;xsl:text>Unexpected &lt;/xsl:text>
            &lt;xsl:value-of select="local-name(.)"/>
            &lt;xsl:text>.autolabel value: &lt;/xsl:text>
            &lt;xsl:value-of select="$format"/>
            &lt;xsl:text>; using default.&lt;/xsl:text>
          &lt;/xsl:message>
          &lt;xsl:call-template name="default.autolabel.format"/>
        &lt;/xsl:otherwise>
      &lt;/xsl:choose>
    &lt;/xsl:when>
  &lt;/xsl:choose>
&lt;/xsl:template></programlisting>
    </example>
    
    <para>Unfortunately, the <command>xsltproc</command> processor does
      not support this currently (1.1.24). Only Saxon does it correct.</para>
  </section>
  
  <section role="seealso">
    <title>See Also</title>
    <itemizedlist>
      <listitem>
        <para><link xlink:href="http://www.sagehill.net/docbookxsl/SectionNumbering.html"/></para>
      </listitem>
      <listitem>
        <para><link xlink:href="http://en.wikipedia.org/wiki/Category:Numerals"/></para>
      </listitem>
    </itemizedlist>
  </section>
</section>
